[
  {
    "id": "daily-digest-agent",
    "title": "AI Daily Digest Agent",
    "description": "Aggregates RSS articles, transcripts, and emails into a single Gemini-authored morning digest and sends it to Slack.",
    "problem": "Knowledge workers spend too much time scanning sources each morning; this agent compiles the highlights automatically.",
    "tags": [
      "ai",
      "slack",
      "digest",
      "rss",
      "automation"
    ],
    "workflow": {
      "name": "My workflow 14",
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [
                {
                  "field": "cronExpression",
                  "expression": "0 9 * * 1-5"
                }
              ]
            }
          },
          "type": "n8n-nodes-base.scheduleTrigger",
          "typeVersion": 1.2,
          "position": [
            -760,
            880
          ],
          "id": "546206f6-8979-47c4-b757-f2d15ea6b5e2",
          "name": "Schedule Trigger"
        },
        {
          "parameters": {
            "url": "https://feeds.businessinsider.com/custom/all",
            "options": {}
          },
          "type": "n8n-nodes-base.rssFeedRead",
          "typeVersion": 1.1,
          "position": [
            -220,
            480
          ],
          "id": "89afa486-1373-446a-9ad9-1e2c07440594",
          "name": "business insider"
        },
        {
          "parameters": {
            "url": "http://rss.cnn.com/rss/money_topstories.rss",
            "options": {}
          },
          "type": "n8n-nodes-base.rssFeedRead",
          "typeVersion": 1.1,
          "position": [
            -220,
            320
          ],
          "id": "672b094a-8e74-4c3b-8d31-80cfeaf8a776",
          "name": "cnn"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.merge",
          "typeVersion": 3,
          "position": [
            0,
            400
          ],
          "id": "e94d4829-f060-4627-9542-1bbe2c327ff5",
          "name": "Merge"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "fe0167d3-2e87-4b6b-a7b7-3993cafce60e",
                  "name": "title",
                  "value": "={{ $json.title }}",
                  "type": "string"
                },
                {
                  "id": "cd5318c7-c8b8-45a0-b0a1-00afecdc819c",
                  "name": "contentSnippet",
                  "value": "={{ $json.contentSnippet }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            220,
            400
          ],
          "id": "8123245c-c8d3-4582-b09c-973a5033a0e9",
          "name": "Edit Fields"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "news",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            440,
            400
          ],
          "id": "ba254ac3-59cd-4eaa-a9c4-2f6170e6b5eb",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Create a summary of the biggest news stories in the last 24 hours.\nMake sure to categorize the news by topics, and list the title and the summary under each category.\n\n<news>\n{{ JSON.stringify($json.news) }}\n</news> \n"
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            660,
            400
          ],
          "id": "844ffb78-1293-46d4-9bf7-331862aa326d",
          "name": "Basic LLM Chain"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            580,
            620
          ],
          "id": "85aaeebd-2359-4a8a-bc30-ae8115deb389",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "f1472042-3f7a-4fe3-b4f3-4cb377e5ceb8",
                  "name": "news",
                  "value": "={{ $json.text }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1020,
            400
          ],
          "id": "505f25d0-b63b-4526-835c-9df9db98b6fd",
          "name": "Edit Fields1"
        },
        {
          "parameters": {
            "content": "# News",
            "height": 620,
            "width": 1720
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -300,
            180
          ],
          "id": "446df485-9389-44a7-b247-fa8e689067fc",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "numberInputs": 4
          },
          "type": "n8n-nodes-base.merge",
          "typeVersion": 3,
          "position": [
            1960,
            860
          ],
          "id": "ecb7cd9f-4cf7-44eb-ab51-a46b22898a3e",
          "name": "Merge1"
        },
        {
          "parameters": {
            "operation": "5DayForecast",
            "format": "imperial",
            "cityName": "los angeles,us"
          },
          "type": "n8n-nodes-base.openWeatherMap",
          "typeVersion": 1,
          "position": [
            -220,
            1180
          ],
          "id": "1b1b6e34-f0ac-4af2-9d9c-4763cedb9295",
          "name": "OpenWeatherMap",
          "credentials": {
            "openWeatherMapApi": {
              "id": "gTK9YmLWx133jqwn",
              "name": "OpenWeatherMap"
            }
          }
        },
        {
          "parameters": {
            "fieldToSplitOut": "list",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            20,
            1180
          ],
          "id": "04b6ba60-6ee0-445d-99fa-6203c2357c20",
          "name": "Split Out"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "ca2a4f67-c574-47a8-9aeb-3a586140943f",
                  "leftValue": "={{ $now.plus(1, \"days\").toSeconds() > $json.dt }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            240,
            1180
          ],
          "id": "41074405-36a2-4f5a-92cf-ba96645b82ec",
          "name": "Filter"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "weather_forecast",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            460,
            1180
          ],
          "id": "13ffe9ad-c9bc-4682-a12d-e74e91cc108b",
          "name": "Aggregate1"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Summarize the weather forecast for the next 24 hours using the provided forecast data. \nAdd clothing suggestions for a middle aged female who typically wears casual clothing.\nPlease note if she needs to carry an umbrella.\nThe summary should be an overview for the day, don't provide hourly breakdown on the weather changes.\n\n<WeatherForecast>\n{{ JSON.stringify($json.weather_forecast) }}\n</WeatherForecast>"
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            680,
            1180
          ],
          "id": "fc02621c-bd2f-4724-b50c-a4bf321e771c",
          "name": "Basic LLM Chain1"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            640,
            1360
          ],
          "id": "9c90e4ff-688c-418a-92b2-500c9e84b34b",
          "name": "OpenAI Chat Model1",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "0dfe8ddb-2165-43d1-9114-4abffc3ecfbc",
                  "name": "weather_forecast",
                  "value": "={{ $json.text }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1040,
            1180
          ],
          "id": "2b89fe5d-8f0f-4e49-a532-c0b72d455c9a",
          "name": "Edit Fields2"
        },
        {
          "parameters": {
            "content": "# Weather",
            "height": 600,
            "width": 1720
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -300,
            1020
          ],
          "id": "ad6238da-20a8-4311-b996-9e05a883ad63",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "operation": "getAll",
            "simple": false,
            "filters": {
              "labelIds": [
                "CATEGORY_PERSONAL"
              ],
              "readStatus": "unread",
              "receivedAfter": "={{ $now.minus(1, \"day\") }}"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.gmail",
          "typeVersion": 2.1,
          "position": [
            -140,
            1880
          ],
          "id": "fe170333-dd9d-4992-b417-681b8e8a3443",
          "name": "Gmail",
          "webhookId": "c485b21f-207d-4efb-9e85-566ff2e3de15",
          "credentials": {
            "gmailOAuth2": {
              "id": "E1ofNfqugb4UykcT",
              "name": "Gmail 2rum2room2"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "c5d24917-c196-4979-b118-40bedcf0511a",
                  "name": "email",
                  "value": "={{ $json.text }}",
                  "type": "string"
                },
                {
                  "id": "f99c070e-5e12-4b9f-8a46-84cad215c4d5",
                  "name": "from",
                  "value": "={{ $json.from.value }}",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            80,
            1880
          ],
          "id": "174d3816-15b3-4c5b-8429-e654451690fb",
          "name": "Edit Fields3"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "emails",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            300,
            1880
          ],
          "id": "74d2edad-8d4a-4f7d-acf7-b46523ea8a6c",
          "name": "Aggregate2"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Extract all the emails that were sent by humans and aren't newsletters or system updates or calendar updates and summarize the emails in one sentence for a digest and add who (name + email) sent the email.\n\n<emails>\n{{ $json.emails.map(item => `\\n<email>\\n<from>\\n${JSON.stringify(item.from)}\\n</from>\\n<body>\\n${item.email}\\n</body>\\n</email>\\n`).join('') }}\n</emails>\n",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            520,
            1880
          ],
          "id": "ad4cd02d-d2a4-4c94-9d93-c8d1025d2506",
          "name": "Basic LLM Chain2"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            480,
            2100
          ],
          "id": "0188e119-c4ed-4395-a8f8-cfda2d596aaa",
          "name": "OpenAI Chat Model2",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "jsonSchemaExample": "{\n\t\"emails\": [\"email 1\", \"email 2\"]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            660,
            2100
          ],
          "id": "dfc30db5-301f-448a-bc20-d80a35cc208d",
          "name": "Structured Output Parser"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "8b795abf-c0d7-42f9-aa3d-f5a4ed47dda1",
                  "name": "emails",
                  "value": "={{ JSON.stringify($json.output.emails) }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            880,
            1880
          ],
          "id": "0e1043d0-71ad-43e7-a1fb-dca55bbac2f4",
          "name": "Edit Fields4"
        },
        {
          "parameters": {
            "content": "# Emails",
            "height": 480,
            "width": 1500
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -300,
            1800
          ],
          "id": "ddab72eb-af03-4153-9d4b-000c51db4aeb",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "operation": "getAll",
            "calendar": {
              "__rl": true,
              "value": "2rum2room2@gmail.com",
              "mode": "list",
              "cachedResultName": "2rum2room2@gmail.com"
            },
            "timeMax": "={{ $now.plus({ days: 1 }) }}",
            "options": {}
          },
          "type": "n8n-nodes-base.googleCalendar",
          "typeVersion": 1.3,
          "position": [
            -180,
            2640
          ],
          "id": "c316f6f7-f205-4759-b27f-358262f71720",
          "name": "Google Calendar"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "c2ed0b62-fb10-4d36-a53e-b448f385b93f",
                  "name": "summary",
                  "value": "={{ $json.summary }}",
                  "type": "string"
                },
                {
                  "id": "a224249f-f845-43a2-b50c-805212713481",
                  "name": "startDate",
                  "value": "={{ $json.start.dateTime }}",
                  "type": "string"
                },
                {
                  "id": "60793d7b-ba96-4114-9682-b722d7402f7a",
                  "name": "timezone",
                  "value": "={{ $json.start.timeZone }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            40,
            2640
          ],
          "id": "967aa856-fef4-454c-bbfa-5ebc8d138258",
          "name": "Edit Fields5"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "calendar_events",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            260,
            2640
          ],
          "id": "008d06e6-fe16-42ba-997d-9df9d209293f",
          "name": "Aggregate3"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "768d5214-4d37-4b8f-9cbb-e34305e68381",
                  "name": "calendar_events",
                  "value": "={{ JSON.stringify($json.calendar_events) }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            480,
            2640
          ],
          "id": "f7eb428c-c645-492f-b681-e965139a725f",
          "name": "Edit Fields6"
        },
        {
          "parameters": {
            "content": "# Calendar",
            "height": 440,
            "width": 1120
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -300,
            2440
          ],
          "id": "52bd710f-b474-49ac-b93e-78f194cfdcae",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "fieldsToAggregate": {
              "fieldToAggregate": [
                {
                  "fieldToAggregate": "news"
                },
                {
                  "fieldToAggregate": "weather_forecast"
                },
                {
                  "fieldToAggregate": "emails"
                },
                {
                  "fieldToAggregate": "calendar_events"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            2180,
            880
          ],
          "id": "cae01c8b-d668-4224-a927-ac280773eebd",
          "name": "Aggregate4"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "68158149-a655-4cba-857d-e1b289bd750f",
                  "name": "news",
                  "value": "={{ $json.news[0] }}",
                  "type": "string"
                },
                {
                  "id": "c3d828f7-f9a5-47b4-9e0f-03eea9e4b7bb",
                  "name": "weather_forecast",
                  "value": "={{ $json.weather_forecast[0] }}",
                  "type": "string"
                },
                {
                  "id": "531afbd6-339e-4408-bfc4-7c2daca1a751",
                  "name": "emails",
                  "value": "={{ $json.emails[0] }}",
                  "type": "string"
                },
                {
                  "id": "05bb70c2-ec0a-4b38-a08c-6d5c3bd44d06",
                  "name": "calendar_events",
                  "value": "={{ $json.calendar_events[0] }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            2400,
            880
          ],
          "id": "befcca45-1026-48be-abce-776d0bebcac5",
          "name": "Edit Fields7"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=\nCreate a daily digest from the data below.\nUse a personal, light-hearted tone (2nd person). \nUse the `send_daily_digest` tool to send the digest.\n\nThe elements of to include (from the source data)\n1. Weather forecast\n2. News\n3. Emails\n4. Calendar events\n\n<DataSource>\n<News>\n{{ $json.news }}\n</News>\n<WeatherForecast>\n{{ $json.weather_forecast }}\n</WeatherForecast>\n<Emails>\n{{ $json.emails }}\n</Emails>\n<CalendarEvents>\n{{ $json.calendar_events }}\n</CalendarEvents>\n</DataSource>\n\nMake sure to format the email as raw text with proper new lines, separating everything.\nDo not use any markdown - as it will be read on mobile. Don't use any bold, other styling.\n\nExample formating:\n\nHi there,\n\nToday's weather\n- forecast\n- clothing recommendations\n\nUnread emails\n- email 1\n- email 2\n\nToday's events\n- event 1\n- event 2\n\nLatest news\n\nCategory 1\n- news item 1\n\nCategory 2\n- news item 1\n\nHave a great day, Miri!",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.agent",
          "typeVersion": 1.7,
          "position": [
            3080,
            880
          ],
          "id": "a5034448-272b-4321-b78d-7f0fb4744fde",
          "name": "AI Agent"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            3000,
            1120
          ],
          "id": "148eef7a-a645-4967-a72b-887b68835afb",
          "name": "OpenAI Chat Model3",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "sendTo": "2rum2room2@gmail.com",
            "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
            "emailType": "text",
            "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
            "options": {}
          },
          "type": "n8n-nodes-base.gmailTool",
          "typeVersion": 2.1,
          "position": [
            3240,
            1100
          ],
          "id": "eb93a9ae-996b-43f2-a62c-7faf6350144e",
          "name": "send_digest",
          "webhookId": "162a213b-823b-4420-8c95-05e882822299",
          "credentials": {
            "gmailOAuth2": {
              "id": "E1ofNfqugb4UykcT",
              "name": "Gmail 2rum2room2"
            }
          }
        },
        {
          "parameters": {
            "content": "# Build and send digest",
            "height": 500,
            "width": 640,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            2860,
            780
          ],
          "id": "8c215499-36f2-4903-8099-2d28f537c183",
          "name": "Sticky Note4"
        },
        {
          "parameters": {
            "content": "# Prepare the data",
            "height": 460,
            "width": 720
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1880,
            720
          ],
          "id": "2e62acc6-e972-4428-bc9f-9fd546fd0fbf",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w2)\n\n## Be part of a growing community and help us create more content like this",
            "height": 220,
            "width": 860,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -300,
            -140
          ],
          "id": "44f740f1-7849-4d41-bf55-57bb89ad4c08",
          "name": "Sticky Note6"
        }
      ],
      "pinData": {},
      "connections": {
        "Schedule Trigger": {
          "main": [
            [
              {
                "node": "cnn",
                "type": "main",
                "index": 0
              },
              {
                "node": "business insider",
                "type": "main",
                "index": 0
              },
              {
                "node": "OpenWeatherMap",
                "type": "main",
                "index": 0
              },
              {
                "node": "Gmail",
                "type": "main",
                "index": 0
              },
              {
                "node": "Google Calendar",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "cnn": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "business insider": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Merge": {
          "main": [
            [
              {
                "node": "Edit Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate": {
          "main": [
            [
              {
                "node": "Basic LLM Chain",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain": {
          "main": [
            [
              {
                "node": "Edit Fields1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields1": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenWeatherMap": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "Filter",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Filter": {
          "main": [
            [
              {
                "node": "Aggregate1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate1": {
          "main": [
            [
              {
                "node": "Basic LLM Chain1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model1": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain1",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain1": {
          "main": [
            [
              {
                "node": "Edit Fields2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Gmail": {
          "main": [
            [
              {
                "node": "Edit Fields3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields3": {
          "main": [
            [
              {
                "node": "Aggregate2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate2": {
          "main": [
            [
              {
                "node": "Basic LLM Chain2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model2": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain2",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "Basic LLM Chain2",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain2": {
          "main": [
            [
              {
                "node": "Edit Fields4",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Google Calendar": {
          "main": [
            [
              {
                "node": "Edit Fields5",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields5": {
          "main": [
            [
              {
                "node": "Aggregate3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate3": {
          "main": [
            [
              {
                "node": "Edit Fields6",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields2": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Edit Fields4": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 2
              }
            ]
          ]
        },
        "Edit Fields6": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 3
              }
            ]
          ]
        },
        "Merge1": {
          "main": [
            [
              {
                "node": "Aggregate4",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate4": {
          "main": [
            [
              {
                "node": "Edit Fields7",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields7": {
          "main": [
            [
              {
                "node": "AI Agent",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model3": {
          "ai_languageModel": [
            [
              {
                "node": "AI Agent",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "send_digest": {
          "ai_tool": [
            [
              {
                "node": "AI Agent",
                "type": "ai_tool",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "4110066c-8073-4e4d-a127-96077cb46794",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ucEHSGg73IPzhX1n",
      "tags": []
    }
  },
  {
    "id": "job-board-linkedin-leadgen",
    "title": "LinkedIn + Job Board Lead Generation",
    "description": "Scrapes fresh job posts, enriches contacts with Gemini, and populates Airtable/Google Sheets for outreach sequences.",
    "problem": "Manual lead research is slow; this workflow automates sourcing and enrichment for sales and recruiting teams.",
    "tags": [
      "leadgen",
      "linkedin",
      "research",
      "airtable",
      "sales"
    ],
    "workflow": {
      "name": "My workflow 14",
      "nodes": [
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w6)\n\n## Be part of a growing community and help us create more content like this",
            "height": 220,
            "width": 860,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            4480,
            1280
          ],
          "id": "44f740f1-7849-4d41-bf55-57bb89ad4c08",
          "name": "Sticky Note6"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            4140,
            1860
          ],
          "id": "3cdd4760-f5ab-4e66-b902-098aab9cf457",
          "name": "When clicking â€˜Test workflowâ€™"
        },
        {
          "parameters": {
            "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  if (item.json.area_html) {\n    const parts = item.json.area_html.split('<span class=\"before:middot\"></span>');\n  item.json.area = parts?.[0]?.trim()\n  item.json.followers = parts?.[1]?.trim()\n  }\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            10300,
            1240
          ],
          "id": "6470b14a-eced-44e8-8ce8-a78e60452ef6",
          "name": "Code1"
        },
        {
          "parameters": {
            "fieldToSplitOut": "definitions",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            9020,
            1620
          ],
          "id": "29d398b7-c04d-408f-9451-96e66609f81a",
          "name": "Split Out"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "definitions",
            "extractionValues": {
              "values": [
                {
                  "key": "key",
                  "cssSelector": "dt"
                },
                {
                  "key": "value",
                  "cssSelector": "dd"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            9220,
            1620
          ],
          "id": "ca95ed4e-487c-4f00-9a16-c26b1e90f901",
          "name": "HTML5"
        },
        {
          "parameters": {
            "jsCode": "const data = {};\n// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  let value = item.json.value;\n  const key = item.json.key;\n  if (key === 'Website') {\n    value = value.split('\\n')[0]\n  }\n  data[item.json.key] = value;\n}\n\nreturn {\n  ...data,\n  description: $('Extract about us').first().json.description\n}"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            9480,
            1660
          ],
          "id": "0e40eafd-f182-4d12-b606-cb63e3a919bf",
          "name": "Code2"
        },
        {
          "parameters": {
            "fieldToSplitOut": "employee",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            8980,
            1940
          ],
          "id": "493e4b01-275c-46a4-acd1-3025529c0492",
          "name": "Split Out1"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "employee",
            "extractionValues": {
              "values": [
                {
                  "key": "name",
                  "cssSelector": "h3"
                },
                {
                  "key": "title",
                  "cssSelector": "h4"
                },
                {
                  "key": "linkedin_url",
                  "cssSelector": "a",
                  "returnValue": "attribute",
                  "attribute": "href"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            9360,
            1980
          ],
          "id": "066be7dc-6638-4b21-a36c-64cee647fc2c",
          "name": "HTML7"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "employees",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            9700,
            2000
          ],
          "id": "9d2ca065-1cbb-43a0-b9c7-816b1b56c98b",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "fieldToSplitOut": "article",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            8960,
            2340
          ],
          "id": "1263406e-c2e8-4c6a-814f-d12effe93c8b",
          "name": "Split Out2"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "article",
            "extractionValues": {
              "values": [
                {
                  "key": "link",
                  "cssSelector": ".main-feed-card__overlay-link",
                  "returnValue": "attribute",
                  "attribute": "href"
                },
                {
                  "key": "content",
                  "cssSelector": "[data-test-id=\"main-feed-activity-card__commentary\"]"
                },
                {
                  "key": "reshared_content",
                  "cssSelector": "[data-test-id=\"feed-reshare-content__commentary\"]"
                },
                {
                  "key": "time",
                  "cssSelector": "time",
                  "skipSelectors": "span"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            9240,
            2340
          ],
          "id": "5895154d-b990-41a4-9d31-846fcdd381e8",
          "name": "HTML9"
        },
        {
          "parameters": {
            "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  Object.keys(item.json).forEach(key => {\n    if (!item.json[key]) {\n      delete item.json[key]\n    }\n  })\n  \n  let time;\n  if (item.json.time.endsWith('h')) {\n    time = { hours: parseInt(item.json.time) }\n  }\n  else if (item.json.time.endsWith('d')) {\n    time = { days: parseInt(item.json.time) }\n  } else if (item.json.time.endsWith('w')) {\n    time = { weeks: parseInt(item.json.time) }\n  } else if (item.json.time.endsWith('mo')) {\n    time = { months: parseInt(item.json.time) }\n  }\n\n  if (time) {\n    item.json.posted_at = $now.minus(time).toFormat('yyyy-MM-dd')\n  }\n\n  delete item.json.time\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            9580,
            2340
          ],
          "id": "3a78dcb5-9d83-469f-aa0b-037d9c0980ce",
          "name": "Code3"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "db889fcb-eb49-4c25-aed7-19d00c63c23c",
                  "leftValue": "={{ DateTime.fromISO($json.posted_at).toSeconds() }}",
                  "rightValue": "={{ $now.minus(3, 'months').toSeconds() }}",
                  "operator": {
                    "type": "number",
                    "operation": "gt"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            9860,
            2340
          ],
          "id": "841e55a9-1cfc-43d9-a95d-484ad5c9e208",
          "name": "Filter1"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "updates",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            10120,
            2280
          ],
          "id": "921724fa-9163-4937-9fbe-19dce91e3183",
          "name": "Aggregate1"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "products",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            9680,
            2600
          ],
          "id": "fc47956b-638d-4d41-80b6-649ff522948c",
          "name": "Aggregate2"
        },
        {
          "parameters": {
            "fieldToSplitOut": "products",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            9140,
            2980
          ],
          "id": "fd9e24f5-4215-4267-b595-a2945b7d9d12",
          "name": "Split Out3"
        },
        {
          "parameters": {
            "fieldToSplitOut": "affiliate_pages",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            9140,
            3380
          ],
          "id": "1ffa6473-7398-45c7-9401-d33f4339065d",
          "name": "Split Out4"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "affiliate_pages",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            9800,
            3380
          ],
          "id": "0e024675-68ec-437b-9914-236d6720bb41",
          "name": "Aggregate4"
        },
        {
          "parameters": {
            "mode": "combine",
            "combineBy": "combineByPosition",
            "numberInputs": 7,
            "options": {}
          },
          "type": "n8n-nodes-base.merge",
          "typeVersion": 3.1,
          "position": [
            10860,
            2120
          ],
          "id": "67afe935-1673-48d3-883b-12c0a14e58d1",
          "name": "Merge"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            11080,
            2200
          ],
          "id": "5e3f1c59-c03a-425b-a6e9-83f11e1f000a",
          "name": "Aggregate3"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            11960,
            2960
          ],
          "id": "e62e36e3-7af5-40fb-b49a-8de416ab6493",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"company_summary\": {\n            \"type\": \"string\",\n            \"description\": \"The summary of the company information\"\n        },\n        \"why_good_prospect\": {\n            \"type\": \"string\",\n            \"description\": \"Explanation why this company is a good prospect\"\n        }\n    },\n    \"required\": [\n        \"company_summary\",\n        \"why_good_prospect\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            12140,
            2960
          ],
          "id": "b5c9ab7f-5407-4bdd-88a9-de2dc6dc887a",
          "name": "Structured Output Parser"
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "n8n-nodes-base.splitInBatches",
          "typeVersion": 3,
          "position": [
            5460,
            1860
          ],
          "id": "df05d847-821b-423a-bb99-fd97036d27df",
          "name": "Loop Over Items"
        },
        {
          "parameters": {
            "maxItems": 2
          },
          "type": "n8n-nodes-base.limit",
          "typeVersion": 1,
          "position": [
            5120,
            1860
          ],
          "id": "5b0cb657-ce72-475d-b7dd-c7eb0f6f0a7c",
          "name": "Limit"
        },
        {
          "parameters": {
            "content": "# Configure",
            "height": 360,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            4460,
            1740
          ],
          "id": "b99a3fb7-ee70-4d15-afc4-15cf72f18211",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "content": "# Change or remove the limit",
            "height": 440,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            5060,
            1660
          ],
          "id": "f7a572db-9054-4888-a8d3-5853eb61fe64",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "baa6e64d-4305-421a-be0a-60cc6d2b06bf",
                  "name": "GOOGLE_API_KEY",
                  "value": "{YOUR_GOOGLE_API_KEY}",
                  "type": "string"
                },
                {
                  "id": "d8e33d4c-b790-488f-a57c-58b80bb5824d",
                  "name": "GOOGLE_CUSTOM_SEARCH",
                  "value": "{YOUR_GOOGLE_CUSTOM_SEARCH_ID}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            4520,
            1860
          ],
          "id": "31adb8f4-e7a5-4407-bd7a-eaf2319bd340",
          "name": "Configure"
        },
        {
          "parameters": {
            "url": "https://remotive.com/remote-jobs/feed/marketing",
            "options": {}
          },
          "type": "n8n-nodes-base.rssFeedRead",
          "typeVersion": 1.1,
          "position": [
            4820,
            1860
          ],
          "id": "93a87ee2-a577-4518-9913-0a7393d56d2f",
          "name": "Get job board RSS feed",
          "retryOnFail": true
        },
        {
          "parameters": {
            "url": "={{ $json.link }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            5880,
            1880
          ],
          "id": "3b057b02-4bf2-4e69-9b4a-b491cbcf794b",
          "name": "Scrape the job ad",
          "retryOnFail": true
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "extractionValues": {
              "values": [
                {
                  "key": "info",
                  "cssSelector": ".tw-mt-4.tw-text-sm"
                },
                {
                  "key": "job_ad",
                  "cssSelector": ".tw-flex > section > .tw-mt-8 > .left > div:nth-child(1)"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            6260,
            1880
          ],
          "id": "1ffc69c2-e88b-491f-aa7e-864a1e7d34be",
          "name": "Extract job ad"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/customsearch/v1",
            "sendQuery": true,
            "queryParameters": {
              "parameters": [
                {
                  "name": "key",
                  "value": "={{ $('Configure').item.json.GOOGLE_API_KEY }}"
                },
                {
                  "name": "cx",
                  "value": "={{ $('Configure').item.json.GOOGLE_CUSTOM_SEARCH }}"
                },
                {
                  "name": "q",
                  "value": "={{ `site:linkedin.com/company ${$('Get job board RSS feed').item.json['dc:creator']} ${$json.location}` }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            5880,
            2380
          ],
          "id": "85ada378-accf-47e3-8013-28ee9be75819",
          "name": "Google X-Ray Search",
          "retryOnFail": true
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6a5c5157-a1de-46c9-b6fa-c3f999a76d1e",
                  "leftValue": "={{ $json.searchInformation.totalResults.toNumber() }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "number",
                    "operation": "gt"
                  }
                },
                {
                  "id": "ec5a091f-e9c1-4ed5-8e0e-af7ddcccf0db",
                  "leftValue": "={{ $json.items[0].link }}",
                  "rightValue": "linkedin.com",
                  "operator": {
                    "type": "string",
                    "operation": "contains"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            6100,
            2380
          ],
          "id": "a0ca6256-881a-4a67-94a6-7db31b700c3f",
          "name": "Results?"
        },
        {
          "parameters": {
            "url": "={{ $json.linkedin_url }}",
            "sendHeaders": true,
            "headerParameters": {
              "parameters": [
                {
                  "name": "user-agent",
                  "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36"
                },
                {
                  "name": "referer",
                  "value": "https://www.google.com/"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            6780,
            2360
          ],
          "id": "e826ba65-f572-47cf-a55c-6f24c637004b",
          "name": "Scrape LinkedIn",
          "retryOnFail": true
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "extractionValues": {
              "values": [
                {
                  "key": "about_us",
                  "cssSelector": ".core-section-container[data-test-id=\"about-us\"]",
                  "returnValue": "html"
                },
                {
                  "key": "locations",
                  "cssSelector": ".core-section-container.locations",
                  "returnValue": "html"
                },
                {
                  "key": "employees",
                  "cssSelector": ".core-section-container[data-test-id=\"employees-at\"]",
                  "returnValue": "html"
                },
                {
                  "key": "updates",
                  "cssSelector": ".core-section-container[data-test-id=\"updates\"]",
                  "returnValue": "html"
                },
                {
                  "key": "info",
                  "cssSelector": ".top-card-layout__card .top-card-layout__entity-info:nth-child(1)",
                  "returnValue": "html"
                },
                {
                  "key": "products",
                  "cssSelector": ".core-section-container > .core-section-container__content > .base-card",
                  "returnValue": "html",
                  "returnArray": true
                },
                {
                  "key": "crunchbase",
                  "cssSelector": "a[data-tracking-control-name=\"funding_crunchbase\"]",
                  "returnValue": "attribute",
                  "attribute": "href"
                },
                {
                  "key": "affiliate_pages",
                  "cssSelector": "section[data-test-id=\"affiliated-pages\"] > div > ul > li",
                  "returnValue": "html",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            7240,
            2360
          ],
          "id": "d6a17b1c-f4e2-4740-a273-68c44987adb1",
          "name": "Extract main blocks"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "info",
            "extractionValues": {
              "values": [
                {
                  "key": "name",
                  "cssSelector": "h1"
                },
                {
                  "key": "category",
                  "cssSelector": "h2"
                },
                {
                  "key": "area_html",
                  "cssSelector": "h3",
                  "returnValue": "html"
                },
                {
                  "key": "summary",
                  "cssSelector": "h4"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            8160,
            1240
          ],
          "id": "2efa53f9-0973-42bf-85ef-c5a5f578c6f4",
          "name": "Extract info"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "about_us",
            "extractionValues": {
              "values": [
                {
                  "key": "description",
                  "cssSelector": "p"
                },
                {
                  "key": "definitions",
                  "cssSelector": "dl > div",
                  "returnValue": "html",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            8160,
            1660
          ],
          "id": "7db32e1f-c782-488e-b19a-213aa927bd19",
          "name": "Extract about us"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "employees",
            "extractionValues": {
              "values": [
                {
                  "key": "employee",
                  "cssSelector": "ul li",
                  "returnValue": "html",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            7940,
            1940
          ],
          "id": "4312d3b1-3181-4c35-9039-d197ac3c8e8a",
          "name": "Extract employees"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "locations",
            "extractionValues": {
              "values": [
                {
                  "key": "locations",
                  "cssSelector": "div[id^=\"address-\"]",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            8160,
            1460
          ],
          "id": "314dbac7-7087-4090-8577-409c755e8224",
          "name": "Extract locations"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "updates",
            "extractionValues": {
              "values": [
                {
                  "key": "article",
                  "cssSelector": "div[data-id=\"entire-feed-card-link\"]",
                  "returnValue": "html",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            7920,
            2340
          ],
          "id": "c852a34d-ee21-4e7b-93f1-b0e31ed5963c",
          "name": "Extract updates"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4a990f72-dc16-464c-b35c-1573c38b2d18",
                  "leftValue": "={{ $json.products }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            8240,
            3000
          ],
          "id": "037030e3-220e-4389-841e-8bfd31bdd2bc",
          "name": "Are there products?"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4b4a37dd-46e9-46f3-8dc6-1767a75375c2",
                  "leftValue": "={{ $json.affiliate_pages }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            8240,
            3400
          ],
          "id": "feb27d6d-7c3b-46c5-ba09-051c698c425b",
          "name": "Are there affiliated pages?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "2fa0ab4a-ca7c-47ab-90cc-75f8fe83b372",
                  "name": "affiliate_pages",
                  "value": "[]",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            9140,
            3600
          ],
          "id": "e653cc9a-5e37-4465-b910-92a8f9bcd9d1",
          "name": "No affiliated pages"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "6d5b89ba-9161-4999-bf63-8b0dad2d0f86",
                  "name": "products",
                  "value": "=[]",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            9140,
            3160
          ],
          "id": "251bb936-9e9c-4968-8b24-ddbfd9713a9d",
          "name": "No products"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "products",
            "extractionValues": {
              "values": [
                {
                  "key": "name",
                  "cssSelector": "h3",
                  "skipSelectors": "img"
                },
                {
                  "key": "category",
                  "cssSelector": "h4 a"
                },
                {
                  "key": "description",
                  "cssSelector": "p"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            9360,
            2980
          ],
          "id": "1d23d8d8-8c0f-45b0-9fd6-62c8fbec0f9f",
          "name": "Extract products"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "affiliate_pages",
            "extractionValues": {
              "values": [
                {
                  "key": "title",
                  "cssSelector": "h3"
                },
                {
                  "key": "link",
                  "cssSelector": "a",
                  "returnValue": "attribute",
                  "attribute": "href"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            9360,
            3380
          ],
          "id": "b11a5b3d-ec1c-4074-bffe-760403bc08ac",
          "name": "Extract affiliated pages"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Instruction>\nOur company sells marketing services. We scraped a list of marketing jobs, and found the linkedin profile and other data points of the advertiser.\n\nCreate a summary about this prospect that can be shared in the company Slack for the sales team.\n\nThe important signals are\n1. The company is looking for a hire, use information from the job ad\n2. The company does have a team that we target\n\nAlso make sure information from their new updates are also extracted.\n\nThe structure of the message should have\n1. Name of the company\n2. Quick summary of the company\n3. Why it's a good prospect\n</Instruction>\n\n<JobAd>\n{{ $('Extract job ad').item.json.job_ad }}\n</JobAd>\n\n<Data>\n{{ JSON.stringify($json.data, null, 2) }}\n</Data>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.6,
          "position": [
            11960,
            2740
          ],
          "id": "ea814608-ede2-4edc-afa0-cd2cdc94065e",
          "name": "Summarize available data",
          "retryOnFail": true
        },
        {
          "parameters": {
            "sendTo": "2rum2room2@gmail.com",
            "subject": "=New prospect: {{ $('Aggregate3').item.json.data[0].name }}",
            "message": "=<h1>Company name: {{ $('Aggregate3').item.json.data[0].name }}</h1>\n<p>Category: {{ $('Aggregate3').item.json.data[0].category }}</p>\n<p>Linkedin Page: {{ $('Set Linkedin URL from the first result').item.json.linkedin_url }}</p>\n<p>Website: {{ $('Aggregate3').item.json.data[0].Website }}</p>\n{{ $('Extract main blocks').item.json.crunchbase ? `<p>Crunchbase: ${$('Extract main blocks').item.json.crunchbase.split('?')[0]}</p>` : `` }}\n\n<h2>Summary</h2>\n<p>{{ $json.output.company_summary }}</p>\n<h2>Why is it a good prospect</h2>\n<p>{{ $json.output.why_good_prospect }}</p>",
            "options": {}
          },
          "type": "n8n-nodes-base.gmail",
          "typeVersion": 2.1,
          "position": [
            12320,
            2740
          ],
          "id": "3eee559b-ccd5-42ef-a5f7-5c11c8adb5d4",
          "name": "Send email",
          "webhookId": "5239298c-8f8b-408b-bc7e-cc36cd3a59e8",
          "credentials": {
            "gmailOAuth2": {
              "id": "E1ofNfqugb4UykcT",
              "name": "Gmail 2rum2room2"
            }
          }
        },
        {
          "parameters": {
            "content": "# Use the data\n\nPush the collected data into\n\n- your CRM\n- Airtable\n- Google Sheets\n- Notion\n- postgres\n- ...",
            "height": 760,
            "width": 660
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            11860,
            2400
          ],
          "id": "86105f1c-32b6-4295-8e3c-4c70542c078a",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# Extracting the data from LinkedIn\n\n## The CSS selectors could occasionally change - don't panic, very easy to fix, just replace them in the workflow. As of 25/4/10 these selectors are working",
            "height": 3040,
            "width": 4460
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            7120,
            940
          ],
          "id": "51a725da-19e9-431c-82af-2f724249a1de",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "content": "# Wait\n\n## To avoid being flagged or detected, wait some seconds before doing another scraping",
            "height": 380,
            "width": 440
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            12440,
            3700
          ],
          "id": "a3032b8d-0947-4e8b-9253-07eb35481ea1",
          "name": "Sticky Note4"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            12600,
            3900
          ],
          "id": "83349d99-0e87-4079-b0b1-d76357edb40d",
          "name": "Wait 5s",
          "webhookId": "0c941134-e324-4857-8e36-2ded681a4b38"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "11f75f95-038e-49c4-b7b3-2eb765ad2d1b",
                  "name": "linkedin_url",
                  "value": "={{ $json.items[0].link }}",
                  "type": "string"
                },
                {
                  "id": "dd80b252-cd03-42f4-be70-069f565d046a",
                  "name": "description",
                  "value": "={{ $json.items[0].pagemap.metatags[0]['og:description'] }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            6340,
            2360
          ],
          "id": "a079755a-cb7e-462b-a2b6-ddc17f936fa9",
          "name": "Set Linkedin URL from the first result"
        },
        {
          "parameters": {
            "jsCode": "for (const item of $input.all()) {\n  const companySlugMatch = item.json.linkedin_url.match(/[^linkedin]+linkedin\\.com\\/company\\/([^\\/]+)/);\n  if (companySlugMatch) {\n    const companySlug = companySlugMatch[1];\n    item.json.linkedin_url = `https://www.linkedin.com/company/${companySlug}`;\n  }\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            6560,
            2360
          ],
          "id": "8de6392c-e763-4448-8a1d-7baab38c77cc",
          "name": "Clean linkedin url"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "d5e4966d-3cb0-409f-9878-d227d6515afb",
                  "leftValue": "={{ $json.location }}",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "exists",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            5600,
            2380
          ],
          "id": "496fe359-d5d4-4424-b908-42bb20bc8961",
          "name": "If"
        },
        {
          "parameters": {
            "jsCode": "for (const item of $input.all()) {\n  if (item.json.info.includes('Location:')) {\n    const location = item.json.info.split('Location:')[1]\n  item.json.location = location.slice(0, location.length - 1).replace(/\\n/g, '').trim()\n  }\n  \n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            6620,
            1880
          ],
          "id": "6d7372cd-74ec-4e03-a8fc-4593acc5d54c",
          "name": "Extract location data1"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "8562b688-864d-47a2-9b04-08dffc8040fe",
                  "leftValue": "={{ $json.locations }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            9920,
            1420
          ],
          "id": "4f46887f-61b1-413f-a981-52e9aca2a1e2",
          "name": "If1"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "b94e6f5d-bbed-4b6b-b3f1-b23ff2fe5f16",
                  "name": "locations",
                  "value": "=[]",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            10160,
            1500
          ],
          "id": "db28dd8a-5e88-4199-a427-79adea5e9eef",
          "name": "Edit Fields1"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "17e760be-a45a-43e1-999f-18ac321dcdde",
                  "leftValue": "={{ $json.definitions }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            8620,
            1660
          ],
          "id": "9e915a6f-ace8-4fe0-b3e8-b88aef26ad30",
          "name": "If2"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "905a9082-fd1e-4961-acdd-9233a3e15aa0",
                  "name": "description",
                  "value": "={{ $json.description }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            9680,
            1780
          ],
          "id": "cba24601-4566-4448-8762-cfd1122b2ea1",
          "name": "Edit Fields4"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "2313cbcb-a3cc-4bd2-8d02-cad37db9473f",
                  "leftValue": "={{ $json.employees }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            8160,
            1940
          ],
          "id": "7560c1b3-5d2e-4210-a99e-27008b1c6374",
          "name": "If3"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "3e16c3b2-650c-4a58-b5fd-d138af9775ce",
                  "name": "employees",
                  "value": "=[]",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            9980,
            2120
          ],
          "id": "7aa3e935-e5ec-42db-8193-67f17d5c1f96",
          "name": "Edit Fields"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "9839990c-6444-433b-8dd9-42c1b264be1e",
                  "leftValue": "={{ $json.updates }}",
                  "rightValue": "",
                  "operator": {
                    "type": "array",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            8340,
            2500
          ],
          "id": "c0804a56-f9dd-4f39-b8df-4e8012ca3325",
          "name": "If4"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "98037fb5-6297-4970-810f-626219a27964",
                  "name": "updates",
                  "value": "=[]",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            8900,
            2580
          ],
          "id": "89d0b809-db71-4059-a5a2-b68998c2025b",
          "name": "Edit Fields2"
        }
      ],
      "pinData": {},
      "connections": {
        "When clicking â€˜Test workflowâ€™": {
          "main": [
            [
              {
                "node": "Configure",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "HTML5",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTML5": {
          "main": [
            [
              {
                "node": "Code2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out1": {
          "main": [
            [
              {
                "node": "HTML7",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTML7": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out2": {
          "main": [
            [
              {
                "node": "HTML9",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTML9": {
          "main": [
            [
              {
                "node": "Code3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Code3": {
          "main": [
            [
              {
                "node": "Filter1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Filter1": {
          "main": [
            [
              {
                "node": "Aggregate1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Code1": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Code2": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 2
              }
            ]
          ]
        },
        "Aggregate": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 3
              }
            ]
          ]
        },
        "Aggregate1": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 4
              }
            ]
          ]
        },
        "Split Out3": {
          "main": [
            [
              {
                "node": "Extract products",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate2": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 5
              }
            ]
          ]
        },
        "Split Out4": {
          "main": [
            [
              {
                "node": "Extract affiliated pages",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate4": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 6
              }
            ]
          ]
        },
        "Merge": {
          "main": [
            [
              {
                "node": "Aggregate3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate3": {
          "main": [
            [
              {
                "node": "Summarize available data",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Summarize available data",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "Summarize available data",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Loop Over Items": {
          "main": [
            [],
            [
              {
                "node": "Scrape the job ad",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Limit": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Configure": {
          "main": [
            [
              {
                "node": "Get job board RSS feed",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get job board RSS feed": {
          "main": [
            [
              {
                "node": "Limit",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Scrape the job ad": {
          "main": [
            [
              {
                "node": "Extract job ad",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract job ad": {
          "main": [
            [
              {
                "node": "Extract location data1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Google X-Ray Search": {
          "main": [
            [
              {
                "node": "Results?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Results?": {
          "main": [
            [
              {
                "node": "Set Linkedin URL from the first result",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Scrape LinkedIn": {
          "main": [
            [
              {
                "node": "Extract main blocks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract main blocks": {
          "main": [
            [
              {
                "node": "Extract info",
                "type": "main",
                "index": 0
              },
              {
                "node": "Extract locations",
                "type": "main",
                "index": 0
              },
              {
                "node": "Extract about us",
                "type": "main",
                "index": 0
              },
              {
                "node": "Extract employees",
                "type": "main",
                "index": 0
              },
              {
                "node": "Extract updates",
                "type": "main",
                "index": 0
              },
              {
                "node": "Are there products?",
                "type": "main",
                "index": 0
              },
              {
                "node": "Are there affiliated pages?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract info": {
          "main": [
            [
              {
                "node": "Code1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract about us": {
          "main": [
            [
              {
                "node": "If2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract employees": {
          "main": [
            [
              {
                "node": "If3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract locations": {
          "main": [
            [
              {
                "node": "If1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract updates": {
          "main": [
            [
              {
                "node": "If4",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Are there products?": {
          "main": [
            [
              {
                "node": "Split Out3",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "No products",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Are there affiliated pages?": {
          "main": [
            [
              {
                "node": "Split Out4",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "No affiliated pages",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "No affiliated pages": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 6
              }
            ]
          ]
        },
        "No products": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 5
              }
            ]
          ]
        },
        "Extract products": {
          "main": [
            [
              {
                "node": "Aggregate2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract affiliated pages": {
          "main": [
            [
              {
                "node": "Aggregate4",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Summarize available data": {
          "main": [
            [
              {
                "node": "Send email",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Send email": {
          "main": [
            [
              {
                "node": "Wait 5s",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait 5s": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set Linkedin URL from the first result": {
          "main": [
            [
              {
                "node": "Clean linkedin url",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Clean linkedin url": {
          "main": [
            [
              {
                "node": "Scrape LinkedIn",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract location data1": {
          "main": [
            [
              {
                "node": "If",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If": {
          "main": [
            [
              {
                "node": "Google X-Ray Search",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If1": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 1
              }
            ],
            [
              {
                "node": "Edit Fields1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields1": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "If2": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Edit Fields4",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields4": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 2
              }
            ]
          ]
        },
        "If3": {
          "main": [
            [
              {
                "node": "Split Out1",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Edit Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 3
              }
            ]
          ]
        },
        "If4": {
          "main": [
            [
              {
                "node": "Split Out2",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Edit Fields2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields2": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 4
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "1fbd84d5-ed35-46b4-830c-84dea19669ba",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ucEHSGg73IPzhX1n",
      "tags": []
    }
  },
  {
    "id": "postiz-social-scheduler",
    "title": "Postiz Social Video Scheduler",
    "description": "Downloads source video, uploads it to Postiz, fetches integrations, and schedules posts for TikTok/YouTube/Instagram.",
    "problem": "Creators need a repeatable way to share the same asset across multiple channels without logging into each platform.",
    "tags": [
      "social",
      "postiz",
      "video",
      "scheduler"
    ],
    "workflow": {
      "name": "Episode 12: Postiz",
      "nodes": [
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            -660,
            0
          ],
          "id": "78dd86e6-c5e6-4d44-bd04-8813c14637de",
          "name": "When clicking â€˜Execute workflowâ€™"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.identifier }}",
                        "rightValue": "tiktok",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "3ff74ffe-3f82-437d-9218-bce4f7551211"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "tiktok"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "2edc7f5f-18cf-45e2-9a10-03c6ee2a062f",
                        "leftValue": "={{ $json.identifier }}",
                        "rightValue": "youtube",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "youtube"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "f461c331-7506-486b-ab4a-de03823f82f9",
                        "leftValue": "={{ $json.identifier }}",
                        "rightValue": "instagram",
                        "operator": {
                          "type": "string",
                          "operation": "contains"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "instagram"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            440,
            0
          ],
          "id": "7deee34b-70d3-4f33-98e0-e715ff1ce2bf",
          "name": "Switch"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "0f5772c0-1f84-45e9-b131-8be1c8dd6d85",
                  "name": "postiz_api",
                  "value": "YOUR_POSTIZ_URL/api/public/v1",
                  "type": "string"
                },
                {
                  "id": "781d5f1b-1724-4cd4-9e0d-916de65b43e5",
                  "name": "share_video_url",
                  "value": "https://cdn.pixabay.com/video/2023/08/31/178472-859955927_small.mp4?download",
                  "type": "string"
                },
                {
                  "id": "f3d9536a-3dc9-4673-b774-0434ca64575f",
                  "name": "share_title",
                  "value": "Summer is coming",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -400,
            0
          ],
          "id": "e610724a-f113-4238-a83b-1c2b0a2a6f9c",
          "name": "Configure me"
        },
        {
          "parameters": {
            "content": "# â— Config",
            "height": 380,
            "width": 220,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -460,
            -160
          ],
          "id": "33143617-4eda-4d49-9d1a-684922a9de0b",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "url": "={{ $json.share_video_url }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -180,
            0
          ],
          "id": "212f1b54-8e8b-4b39-b114-dfdc0f430d85",
          "name": "Download video"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Configure me').item.json.postiz_api }}/upload",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "data"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            40,
            0
          ],
          "id": "f63f1714-0c2f-49ba-947c-eb5401c081f1",
          "name": "Upload video to Postiz",
          "credentials": {
            "httpBearerAuth": {
              "id": "qaxoCSbcbmatcO44",
              "name": "Local postiz"
            },
            "httpCustomAuth": {
              "id": "X84DBVwdxIyjeWnM",
              "name": "Custom Auth account"
            },
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('Configure me').item.json.postiz_api }}/integrations",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            240,
            0
          ],
          "id": "e8b6b201-0295-4134-827a-212fb2213174",
          "name": "Get Postiz integrations",
          "credentials": {
            "httpBearerAuth": {
              "id": "qaxoCSbcbmatcO44",
              "name": "Local postiz"
            },
            "httpCustomAuth": {
              "id": "X84DBVwdxIyjeWnM",
              "name": "Custom Auth account"
            },
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Configure me').item.json.postiz_api }}/posts",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n  \"type\": \"schedule\",\n  \"date\": \"{{ $now.plus(1, 'days').toISO() }}\",\n  \"tags\": [],\n  \"shortLink\": false,\n  \"posts\": [\n    {\n      \"integration\": {\n        \"id\": \"{{ $('Switch').item.json.id }}\"\n      },\n      \"value\": [\n        {\n          \"content\": \"{{ $('Configure me').item.json.share_title }}\",\n          \"image\": [\n            {\n              \"id\": \"{{ $('Upload video to Postiz').item.json.id }}\",\n              \"path\": \"{{ $('Upload video to Postiz').item.json.path }}\"\n            }\n          ]\n        }\n      ],\n      \"settings\": {\n        \"title\": \"{{ $('Configure me').item.json.share_title }}\"\n      }\n    }\n  ]\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1080,
            -20
          ],
          "id": "4012aa85-d3c0-4f79-82cf-de9153e875fd",
          "name": "HTTP Request",
          "credentials": {
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          }
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6edb3f17-3d22-408b-a935-5e9f59fa6cc5",
                  "leftValue": "",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            680,
            0
          ],
          "id": "e89f81f7-9ba2-4e81-94c2-5a620f2ecd85",
          "name": "YouTube check"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6edb3f17-3d22-408b-a935-5e9f59fa6cc5",
                  "leftValue": "",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            680,
            -260
          ],
          "id": "8901e4c4-bc30-40fb-8d49-a8118ff45346",
          "name": "TikTok check"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6edb3f17-3d22-408b-a935-5e9f59fa6cc5",
                  "leftValue": "",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            680,
            240
          ],
          "id": "60733cb5-bce9-446f-b060-c81a15316bc4",
          "name": "Instagram check"
        },
        {
          "parameters": {
            "content": "## Implement your logic here\n\nShare on the social media integrations you select",
            "height": 800,
            "width": 320
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            600,
            -400
          ],
          "id": "9a63682d-8c3a-4bbe-bef8-841a71869768",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "content": "# Schedule the post",
            "height": 280,
            "width": 360,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            980,
            -140
          ],
          "id": "8c3f1f18-3890-4158-9cc0-ea5f1d387082",
          "name": "Sticky Note2"
        }
      ],
      "pinData": {},
      "connections": {
        "When clicking â€˜Execute workflowâ€™": {
          "main": [
            [
              {
                "node": "Configure me",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Switch": {
          "main": [
            [
              {
                "node": "TikTok check",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "YouTube check",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Instagram check",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Configure me": {
          "main": [
            [
              {
                "node": "Download video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Download video": {
          "main": [
            [
              {
                "node": "Upload video to Postiz",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload video to Postiz": {
          "main": [
            [
              {
                "node": "Get Postiz integrations",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Postiz integrations": {
          "main": [
            [
              {
                "node": "Switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "YouTube check": {
          "main": [
            [
              {
                "node": "HTTP Request",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "2a01f863-ddea-40c9-a732-99170d4ab203",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ABdn0f2r46qrgkkP",
      "tags": []
    }
  },
  {
    "id": "reddit-startup-ideas",
    "title": "Reddit Startup Idea Miner",
    "description": "Monitors Reddit threads, summarizes pain points with Gemini, and generates YC-style startup briefs in Notion.",
    "problem": "Finding validated startup ideas is tedious; this agent mines Reddit discussions and converts them into structured ideas.",
    "tags": [
      "reddit",
      "startup",
      "notion",
      "summaries",
      "ai"
    ],
    "workflow": {
      "name": "Episode 15: Startup ideas for YC RFS",
      "nodes": [
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            520,
            640
          ],
          "id": "875c9036-40db-42a9-a5de-9a63e04afd97",
          "name": "When clicking â€˜Execute workflowâ€™"
        },
        {
          "parameters": {
            "content": "# Set me up\n1. Setup the Reddit credentials\n2. Feel free to change the order by Reddit category (top, new, best, etc.) - and even the subreddit\n2. If you are our skool community member, replace this node with the Reddit pagination subworflow",
            "height": 480,
            "width": 260,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1300,
            340
          ],
          "id": "957f6f11-e9cc-445f-a292-1028df2c2470",
          "name": "Sticky Note12"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "value": "gpt-4.1-2025-04-14",
              "mode": "list",
              "cachedResultName": "gpt-4.1-2025-04-14"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            1520,
            1700
          ],
          "id": "ba227b86-fd5a-4bbf-9272-1bd421f5d54e",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "b737649d-c34b-4fb5-a008-96bcfc93d9ce",
                  "name": "request_for_startups",
                  "value": "=# Full-stack AI Companies:\nTraditional AI startups often build tools and sell them to businesses. A more disruptive approach is to launch companies that directly compete against industry incumbents using AI. For example, instead of selling AI to law firms, create a new AI-powered law firm. This \"full-stack\" model could be applied to any field with slow-moving players.\n\n# More Design Founders:\nDesigners should become founders, especially as no-code tools make product building more accessible. Good design will become a greater competitive advantage. Designers possess skills like user empathy and aesthetic judgment, which are vital for startup successâ€”as seen in companies like Airbnb and Stripe. YC wants to fund teams with strong design at their core.\n\n# Voice AI:\nDespite advances in business tech, voice interactions (phone calls) havenâ€™t changed in decades. New voice models and conversational AI are now realistic enough to be indistinguishable from humans. With over a trillion business calls annually, AI voice bots are poised to revolutionize this area.\n\n# AI for Scientific Advancement:\nMost scientific software in fields like chemistry and operations research is out-of-date. AI, especially at test time, enables solving complex problems in drug discovery, chemical processes, and more. YC is interested in startups leveraging AI to modernize scientific applications and physical production processes.\n\n# AI Personal Assistant:\nCurrent productivity tools help track tasks but donâ€™t complete them. LLMs now enable assistants that can deeply understand personal work routines and take on tasks like managing communications, scheduling, and recurring work, much like a human chief of staff.\n\n# Healthcare AI:\nU.S. healthcare spends over $1 trillion on administrative costs due to inefficiencies and lack of interoperability. Recent LLMs now enable automation of data extraction, entry, and administrative tasks. YC seeks startups tackling these issues to improve healthcare efficiency.\n\n# AI Personal Tutor for Everyone:\nThe dream of truly personalized, computer-based education is now possible with AI. New models can explain complex concepts step-by-step and use multimodal tools (animations, 3D objects, voice). A high-quality, AI-enabled tutor could be personalized for every learner and subject, radically improving education.\n\n# Software Tools to Make Robots:\nRobotics is close to a major breakthrough (\"ChatGPT moment\"). As AI improves robot perception and judgment, there's strong potential in industrial and farming applications. YC wants to fund teams building tools that make it easier for others to create functional robots.\n\n# The Future of Education:\nEducation is massive and hard to disrupt, with over a billion learners globally. AIâ€”especially LLMsâ€”can potentially personalize learning, improve access, and automate drudge work for students and teachers. The long-term transformation of education is inevitable.\n\n# AI Residential Security:\nHome security is a $20B/year industry dominated by outdated legacy firms. Commercial security uses AI for facial recognition, behavior detection, and virtual guards. There is a huge opportunity to use AI to provide genuinely safer homes, far beyond current home security offerings.\n\n# Internal Agent Builder:\nEvery employee will soon be able to create AI agents to automate their repetitive workâ€”not just developers. YC seeks infrastructure startups enabling workers to build, permission, and securely connect these agents to all work tools, freeing humans for higher-value tasks.\n\n# AI Research Labs:\nYC wants to fund new AI research labs, not just quick-to-market startups. OpenAI began as YC Research, and the model of independent, long-term AI research efforts has led to huge breakthroughs. There is still significant opportunity for new labs to tackle unsolved AI problems.\n\n# AI Voice Assistants for Email:\nVoice-enabled assistants (Vapi, Retell, ChatGPT Voice Mode) are now effective enough to triage inboxes by voice during time like a morning commute. Email is an especially promising domain for a universal voice assistant due to its centrality in daily life.\n\n# AI for Personal Finance:\nMost people make irrational financial decisions due to poor or biased advice, or expensive advisors. LLMs offer a new opportunity to provide personalized, unbiased, API-connected finance, investment, and tax advice to everyone for little to no cost.",
                  "type": "string"
                },
                {
                  "id": "7efb5516-5020-4607-b797-0b742e546912",
                  "name": "technology_definitions",
                  "value": "=# AI Agents\nAI agents are software systems that use artificial intelligence to autonomously perform tasks and achieve goals on behalf of a user or another system. They can reason, plan, and act with varying degrees of independence, often employing multiple tools and models to complete tasks. \n\nKey Characteristics:\n\nAutonomy:\nAI agents can operate with minimal or no direct human intervention, making decisions and taking actions based on their programming and learned behavior. \nGoal-Oriented:\nThey are designed to pursue specific objectives, whether that's answering customer inquiries, automating tasks, or making data-driven decisions. \n\nReasoning and Planning:\nAI agents can analyze situations, create plans, and adapt their actions to achieve their goals. \n\nAction Execution:\nThey can interact with the environment, utilizing various tools and systems to carry out tasks. \n\nLearning and Adaptation:\nMany AI agents can learn from their interactions and improve their performance over time, becoming more efficient and effective at their tasks. \n\nHow they work:\n\n1. Perception and Data Collection:\nAI agents gather information from various sources, such as user input, data streams, and sensor data. \n2. Decision Making:\nBased on the gathered information and pre-defined rules or learned patterns, the agent decides on the best course of action. \n3. Action Execution:\nThe agent carries out the chosen action, which could involve interacting with a software system, sending a message, or manipulating physical objects. \n4. Learning and Adaptation:\n\nThrough feedback and experience, the agent refines its decision-making process and adapts its behavior to improve future performance. \n\nExamples of AI Agents:\n\nChatbots and Virtual Assistants:\nAI agents can power conversational interfaces that answer questions, provide support, and complete tasks. \n\nRobotics:\nAI agents can control robots to perform physical tasks in various environments, from manufacturing to exploration. \n\nAutonomous Vehicles:\nAI agents can make decisions and control vehicles, enabling self-driving capabilities. \n\nCode Generation:\nAI agents can assist developers by generating code, debugging, and refactoring. \n\nFraud Detection:\nAI agents can analyze transaction data and identify suspicious patterns, helping prevent fraud. \n\nSupply Chain Optimization:\nAI agents can optimize logistics, inventory management, and other aspects of the supply chain. \n\nHealthcare:\nAI agents can assist with diagnosis, treatment planning, and patient monitoring\n\n# RAG\n\nIn the context of large language models (LLMs), Retrieval-Augmented Generation (RAG) is a technique that enhances the accuracy and relevance of AI-generated text by combining the strengths of information retrieval and generative AI. RAG works by first retrieving relevant information from external data sources and then using that information to inform and improve the generation of responses. \nHere's a more detailed breakdown:\n\n1. Retrieval:\nRAG systems use search algorithms to query external data sources like databases, knowledge bases, or the web. \nThis step aims to find the most relevant information related to the user's query. \nFor example, if a user asks about a specific company policy, the RAG system will search for documents related to that policy within the company's knowledge base. \n2. Augmentation (or Generation): \nThe retrieved information is then integrated into the LLM.\nThe LLM uses this external knowledge to generate more accurate, up-to-date, and contextually relevant responses.\nThis approach allows LLMs to provide answers that are not limited to their pre-trained knowledge and can incorporate specific information from various sources.\n\nBenefits of RAG:\n\nReduced Hallucinations:\nRAG can significantly reduce the instances of LLMs generating inaccurate or fabricated information (hallucinations) by grounding their responses in real data. \n\nIncreased Accuracy:\nBy using real-time information, RAG systems can provide more accurate and reliable answers. \n\nImproved Relevance:\nRAG enables LLMs to provide responses tailored to specific contexts and user needs. \n\nCost-Effectiveness:\nRAG offers a more cost-effective way to update LLMs with new information compared to retraining them on the entire dataset. \n\nIn essence, RAG transforms LLMs from static knowledge repositories into dynamic information processors capable of accessing and synthesizing knowledge from diverse sources to generate more informed and relevant outputs.\n\n# LLM\n\nLarge Language Models (LLMs) are advanced artificial intelligence systems designed to understand, generate, and manipulate human language. They are trained on massive amounts of text data and utilize deep learning techniques, particularly the Transformer architecture, to process and generate human-like text. LLMs are capable of performing various natural language processing tasks, including text generation, translation, question answering, and more. \n\nHere's a more detailed explanation:\nKey Features:\nMassive Data Training:\nLLMs are trained on enormous datasets of text and code, allowing them to learn intricate patterns and relationships within language.\nDeep Learning Architecture:\nThey commonly use the Transformer architecture, which excels at handling sequential data and capturing contextual information.\nNatural Language Understanding and Generation:\nLLMs can understand the nuances of human language, including context, sentiment, and intent, and generate coherent and contextually relevant text.\nVersatile Applications:\nLLMs are used in a wide range of applications, including chatbots, content creation, language translation, code generation, and more. \nHow LLMs Work:\n1. Training:\nLLMs are trained on vast amounts of data, learning to predict the next word in a sequence or to perform other language-related tasks.\n2. Contextual Understanding:\nThrough the training process, LLMs develop a deep understanding of language, including syntax, semantics, and context.\n3. Input Processing:\nWhen a user provides input, the LLM processes the text, breaking it down into smaller units (tokens) and analyzing their relationships.\n4. Output Generation:\nBased on the input and its learned knowledge, the LLM generates a response or output, which can be text, code, or other forms of data. \nExamples of LLMs:\nGPT series (Generative Pre-trained Transformer):\nDeveloped by OpenAI, these models are known for their ability to generate human-quality text.\nBERT (Bidirectional Encoder Representations from Transformers):\nDeveloped by Google, BERT is used for understanding the context of text and is often used in search and other NLP tasks. \nWhat are Large Language Models (LLMs)? | phData\nIn essence, LLMs are powerful AI systems that are revolutionizing how we interact with technology and process information, enabling more natural and intuitive ways to communicate and access knowledge.\n\n# Multi-agent system\n\nA multi-agent system (MAS) is a system composed of multiple interacting intelligent agents that collaborate to achieve common or conflicting goals. These agents can be software programs or robots, and they operate within a shared environment, making decisions and taking actions to fulfill their objectives. MAS allows for complex problem-solving by distributing tasks among specialized agents, enabling them to perform actions that a single agent might struggle with. \n\nHere's a more detailed breakdown:\nKey Components:\nAgents:\nAutonomous entities with specific roles and functionalities, capable of perceiving their environment, making decisions, and taking actions.\nEnvironment:\nThe shared space where agents interact and operate, which can be physical or virtual.\nCommunication:\nA mechanism for agents to exchange information and coordinate their actions.\nControl Structure:\nA mechanism to manage the interactions and decision-making processes among agents. \nHow it Works:\n1. Task Decomposition:\nA complex problem is broken down into smaller, manageable sub-tasks. \n2. Agent Specialization:\nDifferent agents are assigned specific roles based on their expertise and capabilities. \n3. Collaboration and Coordination:\nAgents communicate and coordinate their actions to achieve the overall goal. \n4. Emergent Behavior:\nThe interactions between agents can lead to unexpected or emergent behavior, which can be beneficial or require careful management. \nBenefits of Multi-Agent Systems:\nIncreased Efficiency and Scalability:\nMAS can handle complex tasks more efficiently by distributing the workload among specialized agents. \nImproved Robustness and Adaptability:\nIf one agent fails, the system can still function by redistributing tasks among the remaining agents. \nComplex Problem Solving:\nMAS can tackle problems that are too difficult for a single agent to solve. \nFlexibility and Reusability:\nIndividual agents can be reused in different MAS configurations. \nExamples:\nRobotics: Multi-robot systems for manufacturing, exploration, or disaster response. \nAutonomous Vehicles: Coordinating multiple self-driving cars in a traffic network. \nE-commerce: Optimizing online shopping experiences with personalized recommendations and customer service. \nSmart Grids: Managing electricity distribution and integrating renewable energy sources. \nHealthcare: Coordinating patient care, optimizing hospital resources, and assisting with medical diagnoses. \n\n# Multi-modal LLMs\n\nMultimodal large language models (MLLMs) are AI models that can understand and generate content across multiple data types, or \"modalities,\" such as text, images, audio, and video. Unlike traditional language models that primarily handle text, MLLMs integrate information from various sources to create a richer, more comprehensive understanding of the world. \n\nHere's a more detailed explanation:\nKey Concepts:\nModalities:\nMLLMs can process and generate different types of data, including:\nText: Traditional language input and output. \nImages: Visual information, such as pictures and videos. \nAudio: Sound, including speech and music. \nOther modalities: Sensor data, robot state information, and more. \nMultimodal Fusion:\nMLLMs use techniques to combine information from different modalities. This might involve:\nEarly Fusion: Combining features from different modalities at the beginning of processing. \nLate Fusion: Processing modalities separately and then combining the results. \nHybrid Fusion: Combining elements of both early and late fusion. \nCross-modal Interactions:\nMLLMs can perform tasks that involve multiple modalities, such as:\nImage captioning: Generating text descriptions of images. \nVisual Question Answering (VQA): Answering questions based on images. \nText-to-image generation: Creating images from text descriptions. \nSpeech-to-text and text-to-speech: Converting audio to text and vice versa. \nHow they work:\nMLLMs typically have components for each modality (e.g., a vision model for images, an audio model for sound, and a language model for text). These components process the input data and extract features. These features are then combined using multimodal fusion techniques to create a unified representation that the model uses for understanding and generating outputs. \nExamples of MLLMs:\nMicrosoft's Kosmos-1: An example of a vision-language model that can process images and text.\nDeepMind's Flamingo: Another vision-language model known for its ability to understand and generate text descriptions of images.\nGoogle's PaLM-E: A model that can handle information about a robot's state and surroundings in addition to text and images.\nOpen-source models like LLaVA: Provide access to multimodal capabilities for research and development. \nBenefits of MLLMs:\nRicher Contextual Understanding:\nBy combining information from multiple modalities, MLLMs can achieve a deeper understanding of the world than text-only models. \nNew Applications:\nMLLMs unlock new possibilities for AI applications in areas like content creation, personalized recommendations, human-machine interaction, and more. \nImproved Human-Computer Interaction:\nMLLMs can enable more intuitive and natural interactions with AI, as they can understand and respond to a wider range of inputs.\n\n# AI Voice Agents\n\nAI voice agents are software systems that use artificial intelligence to understand, interpret, and respond to human speech, enabling natural, conversational interactions. They leverage technologies like natural language processing (NLP) and machine learning to answer questions, provide information, and perform actions, much like a human assistant or customer service representative. \n\nHere's a more detailed explanation:\nNatural Language Understanding:\nAI voice agents utilize NLP to decipher the meaning and intent behind spoken words, even with variations in pronunciation, accents, and sentence structure. \nSpeech Recognition:\nThey accurately convert spoken words into text using speech recognition technology, which is crucial for understanding what the user is saying. \nMachine Learning:\nThese agents learn from interactions, improving their ability to understand and respond to user queries over time. \nEnd-to-End Capabilities:\nModern AI voice agents handle the entire interaction process, from receiving input to providing a relevant response, often in near real-time. \nApplications:\nAI voice agents are used in various applications, including:\nCustomer service: Handling routine inquiries, providing support, and resolving issues. \nSmart home control: Interacting with devices like smart speakers and controlling home automation. \nPersonal assistants: Managing schedules, setting reminders, and providing information. \nBusiness automation: Automating tasks like appointment scheduling, data entry, and call routing. \nKey Differences from Older IVR Systems:\nAI voice agents go beyond simple menu navigation (like \"Press 1 for sales\") by engaging in more complex, conversational interactions, remembering context, and responding to interruptions. \nFuture Potential:\nThey are evolving to become more autonomous, capable of handling complex tasks and even making decisions on behalf of the user.",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1080,
            640
          ],
          "id": "87a4dd77-682e-42ec-961a-3913b9497c76",
          "name": "Setup"
        },
        {
          "parameters": {
            "resource": "spreadsheet",
            "title": "New startup ideas",
            "options": {}
          },
          "type": "n8n-nodes-base.googleSheets",
          "typeVersion": 4.6,
          "position": [
            800,
            640
          ],
          "id": "d21cf000-1d79-42d8-9655-a2cc613f02d7",
          "name": "Create Google Sheets",
          "credentials": {
            "googleSheetsOAuth2Api": {
              "id": "y3SQnJ2q0kAJw5OI",
              "name": "Google Sheets account"
            }
          }
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Instructions>\nYour task is to extract any pain points or frustrations that could be resolved with custom software solutions, AI, ML, or automation from the given reddit post.\n\nIdentify whether the case study explicitly mentions any pain points or frustrations related to manual processes or repetitive tasks that could be addressed efficiently with custom software, AI, ML, or automation.\n\nThink out loud while extracting the pain points.\n</Instructions>\n\n<RedditPost>\n{{ $json.title }}\n\n{{ $json.selftext }}\n</RedditPost>",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.agent",
          "typeVersion": 2,
          "position": [
            740,
            980
          ],
          "id": "624d3df6-e176-4ca4-84d7-bfe7b936d017",
          "name": "Find pain points"
        },
        {
          "parameters": {
            "text": "={{ $json.output.includes('<think>') ? $json.output.split('</think>')?.[1] : $json.output }}\n",
            "schemaType": "fromJson",
            "jsonSchemaExample": "{\n\t\"pain_points\": [\"\"]\n}",
            "options": {
              "systemPromptTemplate": "You are an expert extraction algorithm.\nOnly extract relevant information from the text.\nIf you do not know the value of an attribute asked to extract, you may omit the attribute's value.\n\nYour job is to extract the pain points from the provided text.\t"
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1.1,
          "position": [
            1080,
            980
          ],
          "id": "02d73bde-6c40-4bbc-8630-ccd6ab993484",
          "name": "Extract pain points"
        },
        {
          "parameters": {
            "text": "=<Task>\nYour job is to assess, whether the following startup idea falls into the categories that are listed under the request for startup categories below.\n</Task>\n\n<Instructions>\n\nFollow these instructions while thinking out loud:\n1. Read through all the request for startups categories\n2. Read through the startup idea\n3. See if the startup idea fits (strongly) into any of the categories. We don't allow ambiguity.\n4. Assign the rigth category to the startup idea - if it won't fit any, just add `n/a`.\n</Instructions>\n\n<StartupIdea>\n# Pain point\n\n{{ $json.output.pain_points_summary }}\n\n# Startup idea:\n\n{{ $json.output.startup_idea }}\n</StartupIdea>\n\n<RequestForStartups>\n{{ $('Setup').item.json.request_for_startups }}\n</RequestForStartups>",
            "attributes": {
              "attributes": [
                {
                  "name": "reasoning",
                  "description": "explain why the startup idea falls into that category",
                  "required": true
                },
                {
                  "name": "category",
                  "description": "the request for startups category",
                  "required": true
                },
                {
                  "name": "has_category",
                  "type": "boolean",
                  "description": "does the startup idea fit the request for startups categories",
                  "required": true
                },
                {
                  "name": "industry",
                  "description": "the industry of the startup idea",
                  "required": true
                }
              ]
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1.1,
          "position": [
            1940,
            980
          ],
          "id": "4f69ef6c-403e-4809-b099-2e6121e5e229",
          "name": "Extract category"
        },
        {
          "parameters": {
            "text": "=<Task>\nCreate a startup idea that solves the listed pain points.\n</Task>\n\n<Instructions>\n\nFollow these instructions while thinking out loud:\n1. Read through all the pain points\n2. Come up with an idea, that's using today's hot new technologies, like AI, ML, AI Agents (agentic AI), LLMs and multi-modal LLMs, RAG, AI Voice Agents and multi ai agents. Find the definitions of these technologies below.\n3. You don't have to use all the technologies for an idea - one is enough, but use as much as needed to solve the problem in the best possible way\n</Instructions>\n\n<Context>\n{{ $('Setup').item.json.technology_definitions }}\n</Context>\n\n<PainPoints>\n{{ $json.output.pain_points.map(item => `\\t<PainPoint>${item}</PainPoint>`).join('\\n') }}\n</PainPoints>",
            "attributes": {
              "attributes": [
                {
                  "name": "pain_points_summary",
                  "description": "the summary of the pain points",
                  "required": true
                },
                {
                  "name": "reasoning",
                  "description": "why the startup idea solves the given pain points",
                  "required": true
                },
                {
                  "name": "startup_idea",
                  "description": "the startup idea that solves the pain points",
                  "required": true
                }
              ]
            },
            "options": {
              "systemPromptTemplate": "You are an expert startup product manager who comes up with the best startup ideas for customer pain points."
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1.1,
          "position": [
            1640,
            980
          ],
          "id": "dc7efdb1-4490-489f-bc07-444c87d344e4",
          "name": "Create a startup idea"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "79e47cb0-8c95-4e48-b603-5b2065d01798",
                  "name": "RFS Category",
                  "value": "={{ $json.output.category }}",
                  "type": "string"
                },
                {
                  "id": "527f1c7b-2ad3-4ff0-92d4-20334334f0f9",
                  "name": "Industry",
                  "value": "={{ $json.output.industry }}",
                  "type": "string"
                },
                {
                  "id": "76bee27e-5361-4f51-b98d-dce4029690ed",
                  "name": "Pain points",
                  "value": "={{ $('Create a startup idea').item.json.output.pain_points_summary }}",
                  "type": "string"
                },
                {
                  "id": "98ccaed8-6ab7-4f87-99d5-bd0fab4d799a",
                  "name": "Startup idea",
                  "value": "={{ $('Create a startup idea').item.json.output.startup_idea }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            2500,
            980
          ],
          "id": "2b12af06-98c4-4e22-8e64-c373df2ed93f",
          "name": "Setup fields for Google Sheets"
        },
        {
          "parameters": {
            "operation": "appendOrUpdate",
            "documentId": {
              "__rl": true,
              "value": "={{ $('Create Google Sheets').item.json.spreadsheetId }}",
              "mode": "id"
            },
            "sheetName": {
              "__rl": true,
              "value": "0",
              "mode": "id"
            },
            "columns": {
              "mappingMode": "autoMapInputData",
              "value": {},
              "matchingColumns": [],
              "schema": [
                {
                  "id": "RFS Category",
                  "displayName": "RFS Category",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "canBeUsedToMatch": true,
                  "removed": false
                },
                {
                  "id": "Industry",
                  "displayName": "Industry",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "canBeUsedToMatch": true,
                  "removed": false
                },
                {
                  "id": "Pain points",
                  "displayName": "Pain points",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "canBeUsedToMatch": true,
                  "removed": false
                },
                {
                  "id": "Startup idea",
                  "displayName": "Startup idea",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "canBeUsedToMatch": true,
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {}
          },
          "type": "n8n-nodes-base.googleSheets",
          "typeVersion": 4.6,
          "position": [
            2700,
            1000
          ],
          "id": "6c43f7df-3a3c-47f2-8e4f-5616e21289a2",
          "name": "Save row to Sheets",
          "credentials": {
            "googleSheetsOAuth2Api": {
              "id": "y3SQnJ2q0kAJw5OI",
              "name": "Google Sheets account"
            }
          }
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "n8n-nodes-base.splitInBatches",
          "typeVersion": 3,
          "position": [
            500,
            980
          ],
          "id": "66e45d40-70a8-4e3c-99e4-d4b3af22187b",
          "name": "Loop Over Items"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "ea611ac8-9e7e-425d-aa5b-0487380b425d",
                  "leftValue": "={{ $json.output.pain_points }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthGt",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1400,
            980
          ],
          "id": "abd20894-86a6-4d4d-bd6c-7715a49cbb69",
          "name": "Has pain points?"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "bd56a0e2-3b7c-4cd9-a77e-9f7895b7a70b",
                  "leftValue": "={{ $json.output.has_category }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            2260,
            980
          ],
          "id": "b6d23d58-d136-402b-bd21-bb011271283b",
          "name": "RFS compatible?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "3da9b8a9-f36a-4987-8941-945dd743e46b",
                  "name": "Sheet URL",
                  "value": "=https://docs.google.com/spreadsheets/d/{{ $('Create Google Sheets').item.json.spreadsheetId }}/edit",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            720,
            1320
          ],
          "id": "1c10c505-915d-4466-ac60-0ea4be5a3164",
          "name": "Setup Google Sheet URL"
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
          "typeVersion": 1,
          "position": [
            1040,
            1360
          ],
          "id": "d295316f-1fdd-4084-86dc-c0c89559d2e5",
          "name": "Ollama Chat Model",
          "credentials": {
            "ollamaApi": {
              "id": "cWXUsJ0LsqnzOEx0",
              "name": "Ollama account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
          "typeVersion": 1,
          "position": [
            1360,
            1360
          ],
          "id": "fbe5ae0b-d535-4c01-b3a2-87149af77c83",
          "name": "DeepSeek Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
          "typeVersion": 1,
          "position": [
            1520,
            1360
          ],
          "id": "a128c1ec-21c0-4a2f-94ee-06ab24a9efbd",
          "name": "OpenRouter Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "typeVersion": 1,
          "position": [
            1040,
            1700
          ],
          "id": "07008c40-f307-44cb-b012-0a428ade13d4",
          "name": "Google Gemini Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
          "typeVersion": 1,
          "position": [
            1040,
            1520
          ],
          "id": "f1c5c76b-34cd-4b81-9d03-1732c1bc296b",
          "name": "Azure OpenAI Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            1200,
            1520
          ],
          "id": "c8356d95-5dd4-4260-9539-1d7541f7349f",
          "name": "xAI Grok Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "claude-sonnet-4-20250514",
              "cachedResultName": "Claude 4 Sonnet"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
          "typeVersion": 1.3,
          "position": [
            1360,
            1520
          ],
          "id": "20b15101-7331-4a99-b548-66bf928f6c57",
          "name": "Anthropic Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            1520,
            1520
          ],
          "id": "f7475c50-c5d0-4073-ac9e-c06db19415f3",
          "name": "xAI Grok Chat Model1",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "typeVersion": 1,
          "position": [
            1360,
            1700
          ],
          "id": "fc275a8c-4ea3-4fd4-a6f8-9f9814f53276",
          "name": "Groq Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
          "typeVersion": 1,
          "position": [
            1200,
            1360
          ],
          "id": "133feaa9-04c4-487d-9fdb-59b2db831105",
          "name": "AWS Bedrock Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
          "typeVersion": 1,
          "position": [
            1200,
            1700
          ],
          "id": "48a5e626-7ce3-4575-b2b8-63315739d77e",
          "name": "Mistral Cloud Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Pick your choice of LLM\n\nSelect one LLM and make sure to deactivate the rest",
            "height": 700,
            "width": 720,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            960,
            1220
          ],
          "id": "d390d687-4bd9-4ad0-a6d0-795355462529",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## 1. Setup the Google Sheets nodes to use your Sheets integration. If you self-host, make sure the Sheets API and the Google Drive APIs are both enabled in Google Console\n## 2. Setup Reddit with OAuth credentials\n## 3. Pick your choice of LLM and connect it to the 4 LLM nodes - make sure to deactivate the rest of the chat nodes\n## 4. This template was made on n8n version number `1.97.0` - on lower versions some nodes could misbehave, in that case make sure you update your self-hosted n8n instance",
            "height": 500,
            "width": 900,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1200,
            -240
          ],
          "id": "bb64d712-46d8-46d4-b158-2f8f0dfe27c7",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Be part of a growing community and help us create more content like this\n\n## And get access to our premium workflows and servers",
            "height": 500,
            "width": 700,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            460,
            -240
          ],
          "id": "68cab941-7e2b-4267-a62f-66108caa8609",
          "name": "Sticky Note16"
        },
        {
          "parameters": {
            "content": "# Extract pain points from posts and generate startup ideas",
            "height": 320,
            "width": 2420
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            460,
            860
          ],
          "id": "d1f7b845-906f-4c7f-a979-bd5dbee82919",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "content": "# Done!",
            "height": 320,
            "width": 460,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            460,
            1220
          ],
          "id": "a5a13e21-8739-45db-bac1-54926d54fa70",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# Context\nFeel free to add more context for the technologies the startup ideas could include",
            "height": 480,
            "width": 260,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1000,
            340
          ],
          "id": "0370e902-2952-4595-96d3-72487341220f",
          "name": "Sticky Note13"
        },
        {
          "parameters": {
            "operation": "getAll",
            "subreddit": "smallbusiness",
            "limit": 5,
            "filters": {
              "category": "top"
            }
          },
          "type": "n8n-nodes-base.reddit",
          "typeVersion": 1,
          "position": [
            1380,
            640
          ],
          "id": "ef5c4b42-7e58-4a67-9ca9-074df43557df",
          "name": "Reddit",
          "credentials": {
            "redditOAuth2Api": {
              "id": "l1tTlMrxURLbE7Fs",
              "name": "Reddit account 3"
            }
          }
        }
      ],
      "pinData": {},
      "connections": {
        "When clicking â€˜Execute workflowâ€™": {
          "main": [
            [
              {
                "node": "Create Google Sheets",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Find pain points",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Extract pain points",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Extract category",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Create a startup idea",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Setup": {
          "main": [
            [
              {
                "node": "Reddit",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Create Google Sheets": {
          "main": [
            [
              {
                "node": "Setup",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Find pain points": {
          "main": [
            [
              {
                "node": "Extract pain points",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract pain points": {
          "main": [
            [
              {
                "node": "Has pain points?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract category": {
          "main": [
            [
              {
                "node": "RFS compatible?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Create a startup idea": {
          "main": [
            [
              {
                "node": "Extract category",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup fields for Google Sheets": {
          "main": [
            [
              {
                "node": "Save row to Sheets",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Loop Over Items": {
          "main": [
            [
              {
                "node": "Setup Google Sheet URL",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Find pain points",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Save row to Sheets": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Has pain points?": {
          "main": [
            [
              {
                "node": "Create a startup idea",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "RFS compatible?": {
          "main": [
            [
              {
                "node": "Setup fields for Google Sheets",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Reddit": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "991719c2-1545-4d61-9fd6-8cb926c4900c",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "vRKyEOR9iC6tOmL9",
      "tags": []
    }
  },
  {
    "id": "linkedin-hitl-writer",
    "title": "LinkedIn Content with Human Approval",
    "description": "Ingests industry news, drafts LinkedIn posts with Gemini, and routes them through a manual approval branch before publishing.",
    "problem": "Marketing teams want AI-generated posts but insist on a human-in-the-loop signoff to keep messaging on brand.",
    "tags": [
      "linkedin",
      "content",
      "approval",
      "marketing"
    ],
    "workflow": {
      "name": "My workflow 14",
      "nodes": [
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w3)\n\n## Be part of a growing community and help us create more content like this",
            "height": 220,
            "width": 860,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            760,
            -300
          ],
          "id": "44f740f1-7849-4d41-bf55-57bb89ad4c08",
          "name": "Sticky Note6"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            20,
            200
          ],
          "id": "fa71cf61-6295-4c9e-a3da-3cb97eb1702a",
          "name": "When clicking â€˜Test workflowâ€™"
        },
        {
          "parameters": {
            "url": "https://www.artificialintelligence-news.com/feed/",
            "options": {}
          },
          "type": "n8n-nodes-base.rssFeedRead",
          "typeVersion": 1.1,
          "position": [
            760,
            200
          ],
          "id": "044501f8-aab3-4e4f-8fe0-083a933539ce",
          "name": "RSS Read"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "c5321485-5348-4ca3-83af-3daf61b150d0",
                  "name": "title",
                  "value": "={{ $json.title }}",
                  "type": "string"
                },
                {
                  "id": "705a2b08-41fa-4764-b533-c855249eac53",
                  "name": "link",
                  "value": "={{ $json.link }}",
                  "type": "string"
                },
                {
                  "id": "b56b4d7d-9b6d-468f-a8c6-2ba9f2b13414",
                  "name": "contentSnippet",
                  "value": "={{ $json.contentSnippet }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            980,
            200
          ],
          "id": "d7042c29-2cb2-4edf-9522-749481418d35",
          "name": "Edit Fields"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "news",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            1200,
            200
          ],
          "id": "fa734fc9-a226-47ad-8564-e026354c60f3",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=I'm creating a weekly digest from the latest AI articles for SMB executives. \nHelp me to pick 5 articles worth reading for these executives.\nOnly pick the ones that would be interesting for small and medium business owners.\n\n```\n{{ JSON.stringify($json.news) }}\n```",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            1420,
            200
          ],
          "id": "b954ac22-fc5f-402d-a5bc-3e819488d07b",
          "name": "Basic LLM Chain"
        },
        {
          "parameters": {
            "jsonSchemaExample": "{\n\t\"articles\": [{\n      \"title\": \"\",\n      \"link\": \"\"\n    }]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            1700,
            440
          ],
          "id": "434fe5dc-6a92-4289-b32d-9af01447849a",
          "name": "Structured Output Parser"
        },
        {
          "parameters": {
            "fieldToSplitOut": "output.articles",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            760,
            660
          ],
          "id": "7d133cb6-89b5-45ac-b7f2-659ae023da0a",
          "name": "Split Out"
        },
        {
          "parameters": {
            "url": "={{ $json.link }}",
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            980,
            660
          ],
          "id": "2b83631b-fbce-4196-b19d-130cc7fadceb",
          "name": "HTTP Request"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "extractionValues": {
              "values": [
                {
                  "key": "article",
                  "cssSelector": ".elementor-widget-theme-post-content"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            1200,
            660
          ],
          "id": "1768254d-cff9-4e7b-9be6-1e903a412f18",
          "name": "HTML"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "articles",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            1420,
            660
          ],
          "id": "d2bc9444-75c7-49ac-bac0-1be960774bbf",
          "name": "Aggregate1"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Create a LinkedIn post with the title \"Here is everything that happened in AI this week\" and use the articles below to create an engaging content for SMB business owners.\n\n<instructions>\n- Don't use any markdown for the LinkedIn post as it's not supported (no bold, heading etc.) Use clear text for formatting.\n- Make sure to add the link to the article under its summary.\n- Add a summary of the post (hook) to the beginning of the post. It should consist of 2 short sentences, and needs to grab the attention. Make sure to mention AI in it.\n- also make sure the news summaries explains why it's important for SMB business owners, make it one sentence.\n</instructions>\n\n<articles>\n{{ JSON.stringify($json.articles) }}\n</articles>"
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            1000,
            1120
          ],
          "id": "49d34a49-4cd6-4ea8-a4f4-e734284e2d25",
          "name": "Basic LLM Chain1"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Rewrite the following linkedin post to match the style of the example post.\nMake sure to keep it as plain text.\n\n<ExamplePost>\n{{ $('Writing style').item.json.your_style }}\n</ExamplePost>\n\n<Article>\n{{ $json.text }}\n</Article>"
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            1360,
            1120
          ],
          "id": "ec4bd9df-ebaf-4149-b37d-2d56a4fb6f01",
          "name": "Basic LLM Chain2"
        },
        {
          "parameters": {
            "operation": "sendAndWait",
            "subject": "[action required] LinkedIn post approval is needed",
            "message": "={{ $json.linkedin_post }}",
            "responseType": "customForm",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve the post?",
                  "fieldType": "dropdown",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "yes"
                      },
                      {
                        "option": "no - I'll add my change requests below"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "Change requests",
                  "fieldType": "textarea",
                  "placeholder": "Add your change requests here"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.gmail",
          "typeVersion": 2.1,
          "position": [
            1580,
            1600
          ],
          "id": "bc901fdb-d236-472b-a599-a529b594848d",
          "name": "Gmail",
          "webhookId": "1b16f0aa-aa5f-431f-8e85-247f4e981d6c",
          "credentials": {
            "gmailOAuth2": {
              "id": "E1ofNfqugb4UykcT",
              "name": "Gmail 2rum2room2"
            }
          }
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "298e856c-87fa-4751-a235-eabed33f0f43",
                  "leftValue": "={{ $json.data['Do you approve the post?'] }}",
                  "rightValue": "yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1880,
            1600
          ],
          "id": "acaae32d-9f9c-44e1-85db-f5762113904e",
          "name": "If"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Apply the modification requests on the following LinkedIn post. Besides applying the reqested modifications, return the same linkedin post.\n\nLinkedIn post:\n```\n{{ $('Edit Fields1').item.json.linkedin_post }}\n```\n\nChange requests:\n{{ $json.data['Change requests'] }}",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            1500,
            1960
          ],
          "id": "7610541d-8dd4-482f-87c2-9057414e8741",
          "name": "Basic LLM Chain3"
        },
        {
          "parameters": {
            "jsonSchemaExample": "{\n\t\"modified_post\": \"\"\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            1740,
            2200
          ],
          "id": "2bc3be9f-9be4-49b6-8011-e9fa30106d19",
          "name": "Structured Output Parser1"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "a593cd1a-0603-4b52-9d1f-2f2f717651ff",
                  "name": "linkedin_post",
                  "value": "={{ $json.text }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1340,
            1600
          ],
          "id": "fe4b7db0-643e-4dfa-9356-d1d339eb4b0e",
          "name": "Edit Fields1"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "f2075dc4-d6b0-46d9-aad8-247c054432ec",
                  "name": "text",
                  "value": "={{ $json.output.modified_post }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1880,
            1960
          ],
          "id": "6585ca7f-d75b-479b-b3a3-c3c47a8a8d1d",
          "name": "Edit Fields2"
        },
        {
          "parameters": {
            "person": "F_0mve6gG0",
            "text": "={{ $('Edit Fields1').item.json.linkedin_post }}",
            "additionalFields": {}
          },
          "type": "n8n-nodes-base.linkedIn",
          "typeVersion": 1,
          "position": [
            2460,
            1580
          ],
          "id": "39032942-25e7-453a-b507-f1c08799a8d8",
          "name": "LinkedIn",
          "credentials": {
            "linkedInOAuth2Api": {
              "id": "sOxyu51vK3iNtauN",
              "name": "LinkedIn account 3"
            }
          }
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "value": "gpt-4o",
              "mode": "list",
              "cachedResultName": "gpt-4o"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            980,
            1620
          ],
          "id": "b3829abf-008d-4703-9376-e39cea58767e",
          "name": "gpt-4o",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            660,
            1600
          ],
          "id": "324c2030-346b-40d0-8162-e3b9cf0ff123",
          "name": "gpt-4o-mini",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "content": "# Gather news articles",
            "height": 80,
            "width": 920
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            760,
            80
          ],
          "id": "6d341009-6e49-4453-8b03-fcb50d015629",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "3474133c-bf58-4e48-aa50-bcebd919dc5b",
                  "name": "your_style",
                  "value": "=Dude... Firecrawl is amazing. Turn any website into LLM-ready data? Yes please. I just made a llms-full.txt of my website (all 80 blog posts! ðŸ¥µ) using a free account.\n\nI then threw that 250k token .txt file into Gemini for some analysis to...\n- review the ontology of my work and see the big picture\n- psychoanalyze myself (lol of course)\n\namazing, after that I was both feeling proud of myself (ðŸ¤©) and self-conscious of how obvious my psychological profile is from my published work (ðŸ˜…) so I figured I better make some real progress while I had all this data and an open chat with plenty of headroom in Gemini's sweet sweet 2m context window.\n\nSo I exported my google search console data for the past 3 months to add some analytical context to the content, and threw that into gemini too. Now we're up to ~300k tokens.\n\nI asked it to analyze my SEO and deliver a prioritized plan for improving my strategy.\n\nAnd not only did it give me a really thoughtful overview of my content map, it also was ready to give me an operational plan for improving the overall footprint, my linking strategies, etc. it also gave me some great non-obvious recommendations.\n\nFrankly, this has proven to be extremely effective. Just a year or two ago, this level of SEO analysis & strategic planning would easily have cost me a couple thousand bucks.\n\nBut now... I can do it for free with Claude Desktop + Firecrawl's MCP server, and Gemini 2.0 for 2M context window. \n\nNow... I just need to implement the 2 week plan it wrote for capitalizing on my top performing blogs it affectionately titled \"Stop The Bleeding\" lol, I appreciate Gemini's sense of urgency for improving my funnel.\n\nIt's a pity Squarespace is so poorly positioned for AI augmentation. I 100% have to move away from this platform to something that I can power agentically. \n\nI've thought about Ghost CMS, or building something myself with Lovable. But it's hard to prioritize that at the moment. It's a big lift to migrate a website to a new platform, even in this day and age. There's an opportunity in there somewhere for a hustler.\n\nAnyways, go play with Firecrawl. Well worth it. And if youâ€™ve got this far and you donâ€™t follow me yetâ€¦ wellâ€¦ you know what to do",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            340,
            200
          ],
          "id": "d1cd7039-78a1-4af4-a8d6-47be39f06b95",
          "name": "Writing style"
        },
        {
          "parameters": {
            "content": "# Edit your writing style",
            "height": 340,
            "width": 190,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            300,
            20
          ],
          "id": "f0ff21a2-fcc1-4496-b96b-88b343b8e5cf",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "content": "# Download article content",
            "height": 80,
            "width": 760
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            760,
            540
          ],
          "id": "78d8b4bf-b3e9-4782-a698-5622384f5a70",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# Create LinkedIn post content",
            "height": 80,
            "width": 620
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1000,
            1000
          ],
          "id": "1e656e73-13c3-43f3-b9a2-7cd41cd10502",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "content": "# Approval process",
            "height": 80,
            "width": 640
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1340,
            1480
          ],
          "id": "f89384ea-5216-4263-a008-a484943fc101",
          "name": "Sticky Note4"
        },
        {
          "parameters": {
            "content": "# Edit the post",
            "height": 80,
            "width": 480
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1500,
            1840
          ],
          "id": "8d29fc25-cd86-4d1e-ab0a-ce5bf505403e",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "content": "# Post to LinkedIn",
            "height": 260,
            "width": 320,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            2420,
            1500
          ],
          "id": "6d7c6281-71c8-4e3b-b9db-714472aedc34",
          "name": "Sticky Note7"
        }
      ],
      "pinData": {},
      "connections": {
        "When clicking â€˜Test workflowâ€™": {
          "main": [
            [
              {
                "node": "Writing style",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "RSS Read": {
          "main": [
            [
              {
                "node": "Edit Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate": {
          "main": [
            [
              {
                "node": "Basic LLM Chain",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "Basic LLM Chain",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "HTTP Request",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTTP Request": {
          "main": [
            [
              {
                "node": "HTML",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTML": {
          "main": [
            [
              {
                "node": "Aggregate1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate1": {
          "main": [
            [
              {
                "node": "Basic LLM Chain1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain1": {
          "main": [
            [
              {
                "node": "Basic LLM Chain2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain2": {
          "main": [
            [
              {
                "node": "Edit Fields1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Gmail": {
          "main": [
            [
              {
                "node": "If",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If": {
          "main": [
            [
              {
                "node": "LinkedIn",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Basic LLM Chain3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser1": {
          "ai_outputParser": [
            [
              {
                "node": "Basic LLM Chain3",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields1": {
          "main": [
            [
              {
                "node": "Gmail",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain3": {
          "main": [
            [
              {
                "node": "Edit Fields2",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields2": {
          "main": [
            [
              {
                "node": "Edit Fields1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "gpt-4o": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain2",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Basic LLM Chain3",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "gpt-4o-mini": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain1",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Basic LLM Chain",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Writing style": {
          "main": [
            [
              {
                "node": "RSS Read",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "0aaa24f5-4101-4c5f-8857-427722e96007",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ucEHSGg73IPzhX1n",
      "tags": []
    }
  },
  {
    "id": "google-deep-research",
    "title": "Google Programmable Deep Research",
    "description": "Uses programmable search plus scraping subflows to collect context, summarize sources, and hand results to downstream agents.",
    "problem": "Analysts need trustworthy research packs before writing; this workflow automates discovery, extraction, and consolidation.",
    "tags": [
      "research",
      "google",
      "scraping",
      "ai"
    ],
    "workflow": {
      "name": "My workflow 14",
      "nodes": [
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w4)\n\n## Be part of a growing community and help us create more content like this",
            "height": 220,
            "width": 860,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -260,
            -420
          ],
          "id": "44f740f1-7849-4d41-bf55-57bb89ad4c08",
          "name": "Sticky Note6"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "5c28393f-6e8b-425b-babb-22eac9ad7238",
                  "name": "GOOGLE_API_KEY",
                  "value": "YOUR_GOOGLE_API_KEY_COMES_HERE",
                  "type": "string"
                },
                {
                  "id": "7f935132-6cb7-43a4-ae87-77336bd2cf82",
                  "name": "GOOGLE_CUSTOM_SEARCH",
                  "value": "YOUR_CUSTOM_SEARCH_ID_COMES_HERE",
                  "type": "string"
                },
                {
                  "id": "a848bf0c-0a5f-4acc-9412-aebd93c84380",
                  "name": "top_results",
                  "value": "={{ $json.top_results ?? 3 }}",
                  "type": "number"
                },
                {
                  "id": "c52bbef3-c0a6-4017-a403-abaaee216895",
                  "name": "context",
                  "value": "={{ $json.context }}",
                  "type": "string"
                },
                {
                  "id": "ae883a9e-7207-48ef-ad1f-9c86076e0308",
                  "name": "num_search_terms",
                  "value": "={{ $json.num_search_terms ?? 2 }}",
                  "type": "number"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            60,
            400
          ],
          "id": "77d185cd-6840-4178-b99d-ecbc681809dc",
          "name": "configuration"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"search_terms\": {\n            \"type\": \"array\",\n            \"description\": \"the google search terms\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        }\n    },\n    \"required\": [\n        \"search_terms\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            600,
            700
          ],
          "id": "ce9663e3-b2fd-4a7f-a155-582882fc44f1",
          "name": "Structured Output Parser"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            1900,
            900
          ],
          "id": "d0d79be5-6a89-498d-91b4-ef33d5546d8f",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "9z2BF40dqIRV3ovL",
              "name": "OpenAI"
            }
          }
        },
        {
          "parameters": {
            "fieldToSplitOut": "output.search_terms",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            740,
            400
          ],
          "id": "03b39df2-67d3-428c-913e-6d7ccc7a6bda",
          "name": "Split Out"
        },
        {
          "parameters": {
            "fieldToSplitOut": "items",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            1180,
            400
          ],
          "id": "15cb99a2-74f2-4c16-8032-e3cbbe1c4856",
          "name": "Split Out1"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "extractionValues": {
              "values": [
                {
                  "key": "data",
                  "cssSelector": "body",
                  "returnValue": "html"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            2060,
            400
          ],
          "id": "2a2020a9-974d-4adc-b1d3-07f0e4cb6978",
          "name": "HTML"
        },
        {
          "parameters": {
            "html": "={{ $json.data }}",
            "options": {}
          },
          "type": "n8n-nodes-base.markdown",
          "typeVersion": 1,
          "position": [
            2280,
            400
          ],
          "id": "035220d2-2759-46b3-ab8d-66f7005d2ff1",
          "name": "Markdown"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"summary\": {\n            \"type\": \"string\",\n            \"description\": \"the summary of the content\"\n        }\n    },\n    \"required\": [\n        \"summary\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            3000,
            760
          ],
          "id": "a90ed520-7f70-445c-916a-4a30a46623ae",
          "name": "Structured Output Parser1"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"relevant_to_context\": {\n            \"type\": \"boolean\",\n            \"description\": \"whether the researched content is relevant to the context\"\n        }\n    },\n    \"required\": [\n        \"relevant_to_article\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            3420,
            740
          ],
          "id": "d31c2a54-1b14-4d25-a3f0-21146531245d",
          "name": "Structured Output Parser2"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "research_results",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            4100,
            400
          ],
          "id": "255cd796-6d0f-4197-a4fa-60c85689bbc8",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "workflowInputs": {
              "values": [
                {
                  "name": "top_results",
                  "type": "number"
                },
                {
                  "name": "context"
                },
                {
                  "name": "num_search_terms",
                  "type": "number"
                }
              ]
            }
          },
          "type": "n8n-nodes-base.executeWorkflowTrigger",
          "typeVersion": 1.1,
          "position": [
            -260,
            400
          ],
          "id": "642a7a80-84c0-47b3-b8d9-1e751d3152bc",
          "name": "When Executed by Another Workflow"
        },
        {
          "parameters": {
            "content": "# Configure\n\n- Google API key\n- Google custom search id",
            "height": 400,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            0,
            220
          ],
          "id": "0b43d25d-8fa2-4097-8c77-89f088a0b977",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "content": "# Google programmable search documentation\n\nhttps://developers.google.com/custom-search/v1/using_rest\nhttps://programmablesearchengine.google.com/controlpanel/all",
            "height": 200,
            "width": 620
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -260,
            -40
          ],
          "id": "6b7ab3e0-54b9-42b3-aa0f-da12b31a8e0e",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Context>\n{{ $json.context }}\n</Context>\n\n<Instructions>\nI want to run a research on Google on the context above. \nHelp me to come up with search terms I can use.\nI need exactly {{ $json.num_search_terms }} search term(s) - no more no less. \nMake sure to be creative, and give me different ones so I can get diverse search results.\n</Instructions>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            380,
            400
          ],
          "id": "06920cd4-00a0-494a-abad-71af227500de",
          "name": "create search terms"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/customsearch/v1",
            "sendQuery": true,
            "queryParameters": {
              "parameters": [
                {
                  "name": "key",
                  "value": "={{ $('configuration').item.json.GOOGLE_API_KEY }}"
                },
                {
                  "name": "cx",
                  "value": "={{ $('configuration').item.json.GOOGLE_CUSTOM_SEARCH }}"
                },
                {
                  "name": "q",
                  "value": "={{ $json['output.search_terms'] }}"
                },
                {
                  "name": "num",
                  "value": "={{ $('configuration').item.json.top_results }}"
                },
                {
                  "name": "siteSearch",
                  "value": "reddit.com"
                },
                {
                  "name": "siteSearchFilter",
                  "value": "e"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            960,
            400
          ],
          "id": "3dd1ea7f-8c0d-41f9-a91c-0e9f2026b09b",
          "name": "search on Google",
          "retryOnFail": true
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "c18ff56b-39fa-477c-a48d-bc65ad0a510d",
                  "leftValue": "={{ $json.mime }}",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "notExists",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            1400,
            400
          ],
          "id": "dc0c6d15-b885-430d-a0f6-0f2e7bbd9ca8",
          "name": "remove documents"
        },
        {
          "parameters": {
            "url": "={{ $json.link }}",
            "sendHeaders": true,
            "headerParameters": {
              "parameters": [
                {
                  "name": "user-agent",
                  "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1620,
            400
          ],
          "id": "b50aa2c5-8fb9-4b37-a8e6-80b00db43922",
          "name": "get the content of the link",
          "retryOnFail": false,
          "onError": "continueErrorOutput"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "99cf6ac1-d77b-491c-86dc-44555032f5b0",
                  "leftValue": "={{ $json.error }}",
                  "rightValue": "",
                  "operator": {
                    "type": "object",
                    "operation": "notExists",
                    "singleValue": true
                  }
                },
                {
                  "id": "e6dd1301-acb8-4dc4-83d0-4d5b1a7f2036",
                  "leftValue": "={{ $json.data }}",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "exists",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            1840,
            400
          ],
          "id": "22999b1a-9b5e-47ad-9ca9-5f7050bcc3ad",
          "name": "filter out the errors"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "e70a34f7-b723-47fe-a62f-1a318c483959",
                  "leftValue": "={{ $json.data }}",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "notEmpty",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            2500,
            400
          ],
          "id": "35ded490-70d5-49d4-9b10-9d58498c0489",
          "name": "filter empty results"
        },
        {
          "parameters": {
            "jsCode": "for (const item of $input.all()) {\n  item.json.data = item.json.data.replace(/!\\[[^\\]]+\\]\\([^\\)]+\\)/g, \"\") // remove images\n  item.json.data = item.json.data.replace(/\\[.*?\\]\\(.*?\\)/g, \"\") // remove links\n  item.json.data = item.json.data.replace(/\\n{2,}/g, \"\") // remove extra new line characters\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            2720,
            400
          ],
          "id": "e34ff673-58c4-4420-966e-2b5cca101ce7",
          "name": "cleanup the markdown"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=I've collected research content using Google search.\n\nRead the research content, and analyze whether it is relevant to the context below.\nMake sure it's also useful, and contains relevant information for my context.\n\n<Context>\n{{ $('configuration').item.json.context }}\n</Context>\n\n<ResearchContentSummary>\n{{ $json.output.summary }}\n</ResearchContentSummary>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            3300,
            400
          ],
          "id": "d703961f-4dce-4a9b-85e0-1e716a790663",
          "name": "is it relevant?",
          "retryOnFail": true
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Please summarize the following content for me. Make sure to capture all the information in a concise format. Don't miss anything important.\nIgnore generic website elements like cookie policies, etc.\n\n<Content>\n{{ $json.data }}\n</Content>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            2940,
            400
          ],
          "id": "0ff51b30-b172-476e-8798-d7421d8b5b58",
          "name": "summarize",
          "retryOnFail": true
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "a72e5161-9b19-45fb-bb4f-5ae28d3da266",
                  "leftValue": "={{ $json.output.relevant_to_context }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            3660,
            400
          ],
          "id": "4e21d3c2-c059-48e2-ad58-9eeef5e43b9d",
          "name": "filter irrelevant"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "53e16d12-8a90-4cf8-85e2-6aa2ef2ae3af",
                  "name": "summary",
                  "value": "={{ $('summarize').item.json.output.summary }}",
                  "type": "string"
                },
                {
                  "id": "1ca9f5a5-0e9a-47e6-9fef-079367dc4769",
                  "name": "title",
                  "value": "={{ $('remove documents').item.json.title }}",
                  "type": "string"
                },
                {
                  "id": "11c33d6b-d23c-4bc6-9003-b8ca022b3ada",
                  "name": "link",
                  "value": "={{ $('remove documents').item.json.link }}",
                  "type": "string"
                },
                {
                  "id": "eea8547b-2e21-4b71-a9dc-74639d658485",
                  "name": "snippet",
                  "value": "={{ $('remove documents').item.json.snippet }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            3880,
            400
          ],
          "id": "797834a5-9a83-4685-a94c-8cd3e31b596b",
          "name": "set fields to return"
        },
        {
          "parameters": {
            "content": "# You can replace OpenAI with Ollama!",
            "height": 320,
            "width": 420
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1760,
            740
          ],
          "id": "98bfd96d-8cb6-4bd5-9e56-3a6fa1a648a3",
          "name": "Sticky Note1"
        }
      ],
      "pinData": {},
      "connections": {
        "configuration": {
          "main": [
            [
              {
                "node": "create search terms",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser": {
          "ai_outputParser": [
            [
              {
                "node": "create search terms",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "create search terms",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "summarize",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "is it relevant?",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "search on Google",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out1": {
          "main": [
            [
              {
                "node": "remove documents",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTML": {
          "main": [
            [
              {
                "node": "Markdown",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Markdown": {
          "main": [
            [
              {
                "node": "filter empty results",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser1": {
          "ai_outputParser": [
            [
              {
                "node": "summarize",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser2": {
          "ai_outputParser": [
            [
              {
                "node": "is it relevant?",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "When Executed by Another Workflow": {
          "main": [
            [
              {
                "node": "configuration",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "create search terms": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "search on Google": {
          "main": [
            [
              {
                "node": "Split Out1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "remove documents": {
          "main": [
            [
              {
                "node": "get the content of the link",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "get the content of the link": {
          "main": [
            [
              {
                "node": "filter out the errors",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "filter out the errors": {
          "main": [
            [
              {
                "node": "HTML",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "filter empty results": {
          "main": [
            [
              {
                "node": "cleanup the markdown",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "cleanup the markdown": {
          "main": [
            [
              {
                "node": "summarize",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "is it relevant?": {
          "main": [
            [
              {
                "node": "filter irrelevant",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "summarize": {
          "main": [
            [
              {
                "node": "is it relevant?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "filter irrelevant": {
          "main": [
            [
              {
                "node": "set fields to return",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "set fields to return": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "a4736b82-ed72-48f3-a786-adf8dfce43bd",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ucEHSGg73IPzhX1n",
      "tags": []
    }
  },
  {
    "id": "ai-blog-writer",
    "title": "AI Blog Writer with Structured Research",
    "description": "Chains research subworkflows, scrapes supporting links, and generates multi-section blog posts ready for CMS handoff.",
    "problem": "Content teams struggle to turn raw research into long-form articles; this agent packages insights into publishable drafts.",
    "tags": [
      "blog",
      "content",
      "research",
      "writing"
    ],
    "workflow": {
      "name": "My workflow 14",
      "nodes": [
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w5)\n\n## Be part of a growing community and help us create more content like this",
            "height": 220,
            "width": 860,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            7400,
            560
          ],
          "id": "44f740f1-7849-4d41-bf55-57bb89ad4c08",
          "name": "Sticky Note6"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            7480,
            1440
          ],
          "id": "e792910d-0abd-4ede-b692-d018552286b7",
          "name": "When clicking â€˜Test workflowâ€™"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=I'm working on an article with the following topic:\n\n<TopicTitle>\n{{ $('Come up with a topic1').item.json.output.title }}\n</TopicTitle>\n\n<TopicSummary>\n{{ $('Come up with a topic1').item.json.output.summary }}\n</TopicSummary>\n\nOriginal articles we used as an inspiration to come up with the topic\n\n<InpirationArticles>\n{{ $('Come up with a topic1').item.json.output.inspirations.map(item => `<Article>\\n${item.article}\\n</Article>`).join('\\n') }}\n</InpirationArticles>\n\n\nI did a research on google and came up with the results below. Each article is the markdown content of the HTML body.\n\n<OnlineResearch>\n{{  $json.research_results.map(item => `<Article>\\n${item.summary}\\n</Article>`).join('\\n') }}\n</OnlineResearch>\n\nWrite an detailed, long, engaging article on the subject, make sure to structure the article well, breaking the long text with lists, using bold, etc..",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            11440,
            1440
          ],
          "id": "9d7bc9cb-66e6-4506-ba3d-140f38e14de4",
          "name": "Basic LLM Chain3"
        },
        {
          "parameters": {
            "content": "# 4. Write and post the article\n\n## After creating the article, you could other LLM chains or agents to add\n- SEO keywords\n- Add personality by rewriting the content in your style\n- Adding interlinks\n- Add sources",
            "height": 240,
            "width": 860
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            11440,
            1160
          ],
          "id": "b4094562-03f1-47fc-a40e-b5fede4f5d1f",
          "name": "Sticky Note5",
          "disabled": true
        },
        {
          "parameters": {
            "title": "={{ $json.output.title }}",
            "additionalFields": {
              "content": "={{ $json.content_html }}",
              "status": "publish"
            }
          },
          "type": "n8n-nodes-base.wordpress",
          "typeVersion": 1,
          "position": [
            12120,
            1440
          ],
          "id": "54bbcc1d-4cb5-4b1a-8c8b-7acf9c5a6139",
          "name": "Wordpress",
          "credentials": {
            "wordpressApi": {
              "id": "IvzKT4JMIWbSbJm3",
              "name": "Wordpress account"
            }
          }
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"title\": {\n            \"type\": \"string\",\n            \"description\": \"the title of the article\"\n        },\n        \"content\": {\n            \"type\": \"string\",\n            \"description\": \"the content of the article\"\n        }\n    },\n    \"required\": [\n        \"title\",\n        \"content\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            11700,
            1700
          ],
          "id": "39f365f4-755e-47b0-8e74-60e5acc494de",
          "name": "Structured Output Parser3"
        },
        {
          "parameters": {
            "mode": "markdownToHtml",
            "markdown": "={{ $json.output.content }}",
            "destinationKey": "content_html",
            "options": {}
          },
          "type": "n8n-nodes-base.markdown",
          "typeVersion": 1,
          "position": [
            11900,
            1440
          ],
          "id": "f2bf30a7-5d84-49cf-807b-73f156195a47",
          "name": "Markdown"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4o-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            10280,
            2180
          ],
          "id": "61f91620-db0d-4e86-9514-aa1556bcfef7",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "fieldToSplitOut": "bookmarks",
            "options": {
              "destinationFieldName": "bookmark"
            }
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            8260,
            1440
          ],
          "id": "42ab8e69-f335-4366-af5b-e7008ab61fab",
          "name": "Split Out"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "bookmarks",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            8700,
            1440
          ],
          "id": "d88487f8-565e-41de-98f7-aa7e8031ff54",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"ai_bookmarks\": {\n            \"type\": \"array\",\n            \"description\": \"user name\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"title\": {\n                        \"type\": \"string\"\n                    },\n                    \"link\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"required\": [\n                    \"title\",\n                    \"link\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"ai_bookmarks\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            9440,
            1700
          ],
          "id": "de812263-2794-492b-b793-7655fec7ca59",
          "name": "Structured Output Parser2"
        },
        {
          "parameters": {
            "url": "https://pinboard.in/popular/",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            7780,
            1440
          ],
          "id": "6b28714b-f206-4e5a-ac91-4ae400bf1be7",
          "name": "Get popular bookmarks"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "extractionValues": {
              "values": [
                {
                  "key": "bookmarks",
                  "cssSelector": ".display",
                  "returnValue": "html",
                  "returnArray": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            8040,
            1440
          ],
          "id": "f905febc-df2b-4b63-a04b-d0a85e7b9f41",
          "name": "Extract bookmarks"
        },
        {
          "parameters": {
            "operation": "extractHtmlContent",
            "dataPropertyName": "bookmark",
            "extractionValues": {
              "values": [
                {
                  "key": "link",
                  "cssSelector": ".bookmark_title",
                  "returnValue": "attribute",
                  "attribute": "href"
                },
                {
                  "key": "title",
                  "cssSelector": ".bookmark_title"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.html",
          "typeVersion": 1.2,
          "position": [
            8480,
            1440
          ],
          "id": "1b19927b-9cca-4dd0-9733-610e9f3c5a46",
          "name": "Extract bookmark"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Your job is to find an interesting topic to create an article about in the AI subject. The audience is \"AI enthusiasts\".\n\nYou are presented with popular articles (title and content). Please create an idea for an article that my AI enthusiastic audience will love. They are mostly knowledge workers, managers, leaders.\n\nThe thought process you should follow:\n1. Review all the articles from below\n2. Find the most interesting one for my audience. You can combine multiple articles if it makes sense.\n3. Return the articles used for inspiration by copying them over without changing the content.\n\n<Articles>\n{{ $('Aggregate3').item.json.articles.map(item => `<Article>\\n<Title>\\n${item.title}\\n</Title>\\n<Link>\\n${item.link}\\n<\\Link>\\n<Content>\\n${item.article}\\n</Content>\\n</Article>`).join('\\n') }}\n</Articles>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            10580,
            1440
          ],
          "id": "d13ec8ec-ce16-413e-a458-25d20317d481",
          "name": "Come up with a topic1",
          "retryOnFail": true
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Instruction>\nYour job is to find AI related bookmarks that I can use as inspiration to write an article for my audience - mostly managers and leaders. Make sure you only pick bookmarks that are suitable for them.\n</Instruction>\n\n<ThoughtProcess>\nThe thought process you should follow:\n1. Review all the articles from below\n2. Find the ones that are AI related and relevant for my audience\n3. Return the title and the link of each AI related bookmarks\n</ThoughtProcess>\n\n<Bookmarks>\n{{ $json.bookmarks.map(bookmark => `<Bookmark>\\n<Title>${bookmark.title}</Title>\\n<Link>${bookmark.link}</Link>\\n</Bookmark>`).join('\\n') }}\n</Bookmarks>",
            "hasOutputParser": true
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.5,
          "position": [
            9160,
            1440
          ],
          "id": "6e96cd4d-9672-4f09-bb2a-1701cc99c6a5",
          "name": "Find trending AI bookmarks",
          "retryOnFail": true
        },
        {
          "parameters": {
            "fieldToSplitOut": "output.ai_bookmarks",
            "options": {
              "destinationFieldName": "bookmark"
            }
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            9500,
            1440
          ],
          "id": "892eef5f-8ceb-4520-a3ab-4ffc509ece81",
          "name": "Split Out3"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "destinationFieldName": "articles",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            10120,
            1440
          ],
          "id": "155c67d1-943c-4126-af55-58d0983fd3bf",
          "name": "Aggregate3"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "d7b5f308-b2e9-49f7-b9bd-4d339d96d0ee",
                  "name": "article",
                  "value": "={{ $json.data }}",
                  "type": "string"
                },
                {
                  "id": "2cf35a52-6c39-4109-a5b2-3ae3e45fdde3",
                  "name": "title",
                  "value": "={{ $('Split Out3').item.json.bookmark.title }}",
                  "type": "string"
                },
                {
                  "id": "41c86ac7-6301-47a8-881d-9402f76e1a06",
                  "name": "link",
                  "value": "={{ $('Split Out3').item.json.bookmark.link }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            9920,
            1440
          ],
          "id": "5d4791d9-3d4a-4301-b60a-c7370f2d5592",
          "name": "Edit Fields"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"title\": {\n            \"type\": \"string\"\n        },\n        \"summary\": {\n            \"type\": \"string\"\n        },\n        \"inspirations\": {\n            \"type\": \"array\",\n            \"description\": \"inspirations used to create the concept for the article\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"title\": {\n                        \"type\": \"string\",\n                        \"description\": \"the title of the inspiration\"\n                    },\n                    \"link\": {\n                        \"type\": \"string\",\n                        \"description\": \"the link of the inspiration\"\n                    },\n                    \"article\": {\n                        \"type\": \"string\",\n                        \"description\": \"the content of the inspiration\"\n                    }\n                },\n                \"required\": [\n                    \"title\",\n                    \"link\",\n                    \"article\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"inspirations\",\n        \"title\",\n        \"summary\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.2,
          "position": [
            10680,
            1720
          ],
          "id": "5bd6d308-42e8-49c1-b413-a21fa733479b",
          "name": "Structured Output Parser1"
        },
        {
          "parameters": {
            "workflowId": {
              "__rl": true,
              "value": "0HtQ72bNs1lx7LHj",
              "mode": "list",
              "cachedResultName": "Scrape link subworkflow"
            },
            "workflowInputs": {
              "mappingMode": "defineBelow",
              "value": {
                "link": "={{ $json.bookmark.link }}"
              },
              "matchingColumns": [
                "link"
              ],
              "schema": [
                {
                  "id": "link",
                  "displayName": "link",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": true
            },
            "options": {}
          },
          "type": "n8n-nodes-base.executeWorkflow",
          "typeVersion": 1.2,
          "position": [
            9720,
            1440
          ],
          "id": "16ca64f9-1b83-414d-bc0e-a227278d1bcb",
          "name": "Scrape and summarize bookmarks"
        },
        {
          "parameters": {
            "workflowId": {
              "__rl": true,
              "value": "oSdtjLRztYX86nWY",
              "mode": "list",
              "cachedResultName": "Deep research subworkflow"
            },
            "workflowInputs": {
              "mappingMode": "defineBelow",
              "value": {
                "top_results": 3,
                "num_search_terms": 2,
                "context": "=<Instructions>\nI'd like to create an article. I already got inspirations from other articles, and came up with a title and a summary. Find the data below.\n\nI want to run a research on Google on the subject to collect even more data/inspiration. Help me to come up with search terms I can use.\nI need 4 search terms. Make sure to be creative, and give me different ones so I can get diverse search results.\n</Instructions>\n\n<Title>\n{{ $json.output.title }}\n</Title>\n\n<Summary>\n{{ $json.output.summary }}\n</Summary>\n\n<Inspirations>\n{{ $json.output.inspirations.map(item => `<Inspiration>\\n${item.article}\\n</Inspiration>`).join('\\n') }}\n</Inspirations>"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "top_results",
                  "displayName": "top_results",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number"
                },
                {
                  "id": "context",
                  "displayName": "context",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string"
                },
                {
                  "id": "num_search_terms",
                  "displayName": "num_search_terms",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number"
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": true
            },
            "options": {}
          },
          "type": "n8n-nodes-base.executeWorkflow",
          "typeVersion": 1.2,
          "position": [
            10920,
            1440
          ],
          "id": "99d58229-a7d5-47a6-a202-31909d7ed7b5",
          "name": "Run deep research"
        },
        {
          "parameters": {
            "content": "# 1. Gather bookmarks",
            "height": 80,
            "width": 760
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            8040,
            1320
          ],
          "id": "90cc25ac-d580-4e29-a15f-4a66ebbdd936",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "content": "# 2. Pick the related bookmarks",
            "height": 80,
            "width": 1060
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            9160,
            1320
          ],
          "id": "1e457227-47a7-489c-af94-157541dacb4a",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "content": "# 3. Create topic, deep research",
            "height": 80,
            "width": 560
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            10580,
            1320
          ],
          "id": "aa95b63c-b00d-4fc5-9a7a-7c6463a05fc7",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# I recommend you to add some kind of persistency so you won't use the same bookmarks twice",
            "height": 680,
            "width": 300,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            7680,
            980
          ],
          "id": "36eeeac5-19d7-4f7b-81ab-811e3e54346c",
          "name": "Sticky Note7"
        }
      ],
      "pinData": {},
      "connections": {
        "When clicking â€˜Test workflowâ€™": {
          "main": [
            [
              {
                "node": "Get popular bookmarks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Basic LLM Chain3": {
          "main": [
            [
              {
                "node": "Markdown",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser3": {
          "ai_outputParser": [
            [
              {
                "node": "Basic LLM Chain3",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Markdown": {
          "main": [
            [
              {
                "node": "Wordpress",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Basic LLM Chain3",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Find trending AI bookmarks",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Come up with a topic1",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "Extract bookmark",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate": {
          "main": [
            [
              {
                "node": "Find trending AI bookmarks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser2": {
          "ai_outputParser": [
            [
              {
                "node": "Find trending AI bookmarks",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Get popular bookmarks": {
          "main": [
            [
              {
                "node": "Extract bookmarks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract bookmarks": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Extract bookmark": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Find trending AI bookmarks": {
          "main": [
            [
              {
                "node": "Split Out3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out3": {
          "main": [
            [
              {
                "node": "Scrape and summarize bookmarks",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate3": {
          "main": [
            [
              {
                "node": "Come up with a topic1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields": {
          "main": [
            [
              {
                "node": "Aggregate3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser1": {
          "ai_outputParser": [
            [
              {
                "node": "Come up with a topic1",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Come up with a topic1": {
          "main": [
            [
              {
                "node": "Run deep research",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Scrape and summarize bookmarks": {
          "main": [
            [
              {
                "node": "Edit Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Run deep research": {
          "main": [
            [
              {
                "node": "Basic LLM Chain3",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "e50ee71f-9787-4aba-9a3f-28295ac93b96",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "ucEHSGg73IPzhX1n",
      "tags": []
    }
  },
  {
    "id": "shopify-product-videos",
    "title": "Shopify Product Video Factory",
    "description": "Collects Shopify catalog data, feeds prompts into Seedance + Fal/Latentsync, and assembles talking avatar product videos.",
    "problem": "Merchants want consistent video assets for ads and PDPs but canâ€™t produce them manually for every SKU.",
    "tags": [
      "shopify",
      "video",
      "fal",
      "seedance",
      "commerce"
    ],
    "workflow": {
      "name": "My workflow 53",
      "nodes": [
        {
          "parameters": {
            "formTitle": "Create a UGC-like video from a Shopify product",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Shopify store URL",
                  "placeholder": "Add the full shopify URL here",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Search term",
                  "placeholder": "What search term we should use to find a product?",
                  "requiredField": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.formTrigger",
          "typeVersion": 2.2,
          "position": [
            -780,
            800
          ],
          "id": "e14aed0b-0bfe-44c9-86f2-27cd83ef38b4",
          "name": "On form submission",
          "webhookId": "39b9f0f9-f469-4df0-82fc-5239911d77c5"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.SHOPIFY_URL }}/products.json?limit=250&page={{ $('Setup defaults').last().json.page }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -280,
            800
          ],
          "id": "4d93f9bd-63d3-49f9-91f9-f20489095e3b",
          "name": "Get the products from the Shopify store"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7d55d6da-a78c-4a28-9343-0ea9035a0aa3",
                  "name": "SHOPIFY_URL",
                  "value": "={{   ((u) => {   let s = u.trim();   if (!/^https?:\\/\\//i.test(s)) s = 'https://' + s;   const parts = s.split('/');   return parts[0] + '//' + parts[2]; })($('On form submission').first().json['Shopify store URL'])  }}",
                  "type": "string"
                },
                {
                  "id": "2915c500-dadd-414d-b49c-e4034ae4110d",
                  "name": "max_pages",
                  "value": 5,
                  "type": "number"
                },
                {
                  "id": "0d9bab79-3790-43e3-a338-8428daa23a3d",
                  "name": "max_products",
                  "value": 50,
                  "type": "number"
                },
                {
                  "id": "2ae82e10-3fd1-48ab-863c-dd98ad1688a8",
                  "name": "products",
                  "value": "={{ $json.products || [] }}",
                  "type": "array"
                },
                {
                  "id": "c7cbc705-4029-4a50-835d-1ebffc2a1fa7",
                  "name": "page",
                  "value": "={{ $json.page || 1 }}",
                  "type": "number"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -500,
            800
          ],
          "id": "b0ac5374-7484-4219-9b12-a3fcce8b4afa",
          "name": "Setup defaults"
        },
        {
          "parameters": {
            "content": "# 1. Select product",
            "height": 320,
            "width": 1700
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -540,
            680
          ],
          "id": "1000fdc3-0dcf-44da-9301-d5d770b65824",
          "name": "Sticky Note10"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "value": "gpt-4.1",
              "mode": "list",
              "cachedResultName": "gpt-4.1"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            -760,
            1200
          ],
          "id": "0e73e26e-e33f-4f6b-85c6-ed2c843990a3",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "amount": 3
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            400,
            1940
          ],
          "id": "a75a3917-9dfd-4afa-9a6a-d9b4229bee8b",
          "name": "Wait for the image",
          "webhookId": "385de300-af3f-4db6-b9c8-23b2122a68a7"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the image').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            580,
            1940
          ],
          "id": "6284b9e2-d4f0-4ee6-a139-df8bd940211c",
          "name": "Get the image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            760,
            1940
          ],
          "id": "0b7be214-1600-4200-bb9c-41b1377419d3",
          "name": "Image status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the image').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1060,
            1980
          ],
          "id": "e8606bdb-eafc-4ac7-885c-b33201749999",
          "name": "Download the image",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/flux-pro/kontext/max/multi",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n  \"prompt\": \"{{ $json.output.image_prompt }}\",\n  \"image_urls\": {{ JSON.stringify($('Aggregate base64').item.json.base64) }}\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            120,
            1940
          ],
          "id": "7c89e8b8-9ee9-4165-b577-8efb5872d772",
          "name": "Start generating the image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/bytedance/seedance/v1/lite/image-to-video",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "prompt",
                  "value": "={{ $('Generate prompts').item.json.output.video_prompt }}"
                },
                {
                  "name": "image_url",
                  "value": "={{ $json.images[0].url }}"
                },
                {
                  "name": "end_image_url",
                  "value": "={{ $json.images[0].url }}"
                },
                {
                  "name": "resolution",
                  "value": "480p"
                },
                {
                  "name": "duration",
                  "value": "5"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1320,
            1940
          ],
          "id": "21cd9560-05c5-4e6a-9072-ad3c0268b983",
          "name": "Start generating the video",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "2c3a90c7-f43a-47b3-bec7-77fdae122bfc",
                  "name": "product",
                  "value": "={{ $('Limits exceeded?').last().json.products.find(item => item.title === $json.Product) }}",
                  "type": "object"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            620,
            760
          ],
          "id": "88a48cc0-ebd2-422c-8efc-65824a8ff1ab",
          "name": "Setup product"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            1600,
            1940
          ],
          "id": "e5d5de10-d77c-4c1c-b3a8-735222f6276f",
          "name": "Wait for the video",
          "webhookId": "20df58f7-73b4-451f-8683-cf34eb4b6cfd"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the video').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1800,
            1940
          ],
          "id": "d5a4f624-c926-4ab6-a697-444fe9446e20",
          "name": "Get the video status",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            2040,
            1940
          ],
          "id": "ac5fa891-125b-4f97-8f01-1d2989f97d6d",
          "name": "Video status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the video').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            2320,
            1980
          ],
          "id": "8ba31946-7376-44e3-94ae-7ec4f8a1f4d7",
          "name": "Get the  video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -80,
            2340
          ],
          "id": "224e4eae-3cca-4710-806a-7a9219466f65",
          "name": "Wait for the speech",
          "webhookId": "900ad265-63ec-4840-aae6-7de08f4d9d14"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the speech').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            100,
            2340
          ],
          "id": "5a81c509-a2fe-43b0-bca1-7edadd93acba",
          "name": "Get the speech status",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/elevenlabs/tts/turbo-v2.5",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "text",
                  "value": "={{ $('Generate prompts').item.json.output.dialogue }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -300,
            2340
          ],
          "id": "5f789bae-1abf-4a19-bbb1-dd396e73ac2c",
          "name": "Start generating the speech",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            280,
            2340
          ],
          "id": "74ea81d8-4e94-43af-a8ee-b835c9724303",
          "name": "Speech status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the speech').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            560,
            2380
          ],
          "id": "1f7f29a5-1e06-4761-aa2f-9d0fd3536d16",
          "name": "Get the speech",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/latentsync",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "video_url",
                  "value": "={{ $('Get the  video').item.json.video.url }}"
                },
                {
                  "name": "audio_url",
                  "value": "={{ $json.audio.url }}"
                },
                {
                  "name": "loop_mode",
                  "value": "loop"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            820,
            2340
          ],
          "id": "b1a3c761-e5d0-4e23-bc91-e5b3d2a2e619",
          "name": "Start generating the lipsync",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            1160,
            2340
          ],
          "id": "46dda3b9-e0d3-4854-9438-8d29d9aba277",
          "name": "Wait for the lipsync",
          "webhookId": "d21191bf-cc1c-4fd6-a08d-d01ce6c8108d"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the lipsync').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1360,
            2340
          ],
          "id": "598be352-79ea-4cf8-899e-5c7ac5c6936d",
          "name": "Get the lipsync status",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            1600,
            2340
          ],
          "id": "429ec6b7-7652-482f-9a2b-f340c4cd4db5",
          "name": "Lipsync status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the lipsync').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1880,
            2380
          ],
          "id": "3e879351-439b-4547-af0f-b05c0f409fc2",
          "name": "Get the lipsync video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "jsCode": "const products = [...$('Setup defaults').last().json.products];\n\nfor (const item of $input.all()) {\n  if (\n    `${item.json.title} ${item.json.body_html}`.toLowerCase()\n      .includes(\n        $('On form submission').first().json['Search term'].toLowerCase()\n      )\n  ) {\n    products.push(item.json);  \n  }\n}\n\nreturn {\n  json: {\n    products,\n    page: $('Setup defaults').last().json.page + 1\n  }\n}"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            100,
            800
          ],
          "id": "65a30b27-2f23-4142-9dde-9d34f0f3abed",
          "name": "Edit loop variables"
        },
        {
          "parameters": {
            "fieldToSplitOut": "products",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            -80,
            800
          ],
          "id": "cd84f8c2-42fd-40a8-9042-9dc08c87ed34",
          "name": "For each product"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "9fdf17cd-63a3-4f2c-941f-5daa61d9a35c",
                  "leftValue": "={{ $json.page }}",
                  "rightValue": "={{ $('Setup defaults').first().json.max_pages }}",
                  "operator": {
                    "type": "number",
                    "operation": "gt"
                  }
                },
                {
                  "id": "958d42f5-27e4-4ff4-82d0-80d7f31c2771",
                  "leftValue": "={{ $json.products }}",
                  "rightValue": "={{ $('Setup defaults').first().json.max_products }}",
                  "operator": {
                    "type": "array",
                    "operation": "lengthGte",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "or"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            260,
            800
          ],
          "id": "4462e907-26f8-40da-8d51-978862a04898",
          "name": "Limits exceeded?"
        },
        {
          "parameters": {
            "defineForm": "json",
            "jsonOutput": "=[\n   {\n      \"fieldLabel\": \"Product\",\n      \"requiredField\": true,\n      \"fieldType\": \"dropdown\",\n      \"fieldOptions\": {\n        \"values\": {{ JSON.stringify($json.products.map(item => { return {option: `${item.title}`} })) }}\n      }\n   }\n]",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 1,
          "position": [
            460,
            760
          ],
          "id": "987aaa68-c52c-4700-8c29-37575023492b",
          "name": "Select product",
          "webhookId": "02870f80-3c7b-4444-b8a5-5c433f3f91fc"
        },
        {
          "parameters": {
            "operation": "completion",
            "completionTitle": "Sit tight!",
            "completionMessage": "We are generating the video for you, it could take up to 5 minutes",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 1,
          "position": [
            960,
            820
          ],
          "id": "b3026030-3909-4eda-9ae1-0e454fb806d8",
          "name": "Close the form",
          "webhookId": "ccd96940-1401-43a8-9671-4086def029d4"
        },
        {
          "parameters": {
            "url": "={{ $json.selected_images }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1740,
            1560
          ],
          "id": "b59593cb-b5fe-4e3c-8f77-91e26f215bfb",
          "name": "Download image"
        },
        {
          "parameters": {
            "operation": "resize",
            "width": 800,
            "height": 800,
            "options": {}
          },
          "type": "n8n-nodes-base.editImage",
          "typeVersion": 1,
          "position": [
            1880,
            1560
          ],
          "id": "44a7ce26-18ae-4715-ab29-561b6a823d6e",
          "name": "Resize image"
        },
        {
          "parameters": {
            "operation": "binaryToPropery",
            "options": {}
          },
          "type": "n8n-nodes-base.extractFromFile",
          "typeVersion": 1,
          "position": [
            2040,
            1560
          ],
          "id": "3f925ded-7db5-4699-8c2c-c513acc9b756",
          "name": "Convert image to base64"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "9136d2ce-9e89-4ee6-9a0b-bef338199bb5",
                  "name": "base64",
                  "value": "=data:image/{{ ((u)=>{let e=u.split('.').pop().split('?')[0]; return e==='jpg'?'jpeg':e})($('Split Out').last().json.selected_images) }};base64,{{ $json.data }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            2220,
            1560
          ],
          "id": "5f80e68f-3b1e-4dcd-b0d8-6e04417173d9",
          "name": "Set base64 data"
        },
        {
          "parameters": {
            "fieldsToAggregate": {
              "fieldToAggregate": [
                {
                  "fieldToAggregate": "base64"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            2380,
            1560
          ],
          "id": "4fbd6af3-829a-4367-9700-8d34d7b9938d",
          "name": "Aggregate base64"
        },
        {
          "parameters": {
            "content": "# 2. Setup images",
            "height": 680,
            "width": 3080
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -540,
            1060
          ],
          "id": "0424006f-6e66-46ca-8edb-f79112f188f8",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "content": "# 3. Generate prompts + dialogue",
            "height": 360,
            "width": 560
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -540,
            1800
          ],
          "id": "16cf099e-7bee-4753-8902-0b50590620dd",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Instructions>\nI'm working on creating a UGC (user generated content) ad for a fashion ecommerce product item.\n\nOur goal is to create a scene, where we can build a 5s long video that can easily be looped. That means, that the background should be still, and the character should be standing and talking to the camera.\n\nCreate the following items:\n\n1. An image prompt\n\nCreate an image prompt, that describes the background, and since the AI image generator receives the reference image, it should say to wear the item from the image. Have the character stand at a very slight angle to the camera. Give the character a slight smile. Include in the image prompt, that any text, illustration, signature, frame or border should be removed. Also include, that the main character should be looking into the camera.\n\n2. Dialogue for the main character\n\nCreate a dialogue that's about 550 characters long, and talks about the item. Use the product description, and the reference image.\nThe dialogue should sound natural, like an amateur product review.\n\n3. Video prompt\nA detailed description of the 5s long clip, that will be looped. The character should be visibly speaking in the video, with a slight smile.\nThe emotion of the character should not change during the full length of the clip.\nWe want the character to be in a very natural pose, arms resting naturally at the sides, both feet planted on the ground.\nStart the clip with the weight on one foot and shift it to the other one very very slowly and naturally, then shift it back.\nInclude in the video prompt, that nothing should move behind the character, should be no lifting of the feet, and no excessive turning, knee bending, arm movements, or any other odd movements. \nInclude in the video prompt that the clip should contain minimal camera movement, zoom in or out. \n\n4. The sex of the person on the attached image\n\n</Instructions>\n\n<FashionItem>\n# {{ $('Setup product').item.json.product.title }}\n\n{{ $('Markdown').item.json.body }}\n</FashionItem>",
            "hasOutputParser": true,
            "messages": {
              "messageValues": [
                {
                  "type": "HumanMessagePromptTemplate",
                  "messageType": "imageUrl",
                  "imageUrl": "={{ $('Did we reach the limit?').last().json.selected_images[0] }}"
                }
              ]
            },
            "batching": {}
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.7,
          "position": [
            -500,
            1960
          ],
          "id": "8e5742eb-c964-4710-ad6e-3ec1989c164d",
          "name": "Generate prompts",
          "retryOnFail": true
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"image_prompt\": {\n            \"type\": \"string\",\n            \"description\": \"The image prompt for the AI image generation\"\n        },\n        \"dialogue\": {\n            \"type\": \"string\",\n            \"description\": \"The dialogue that the main character should be saying to the camera\"\n        },\n        \"video_prompt\": {\n            \"type\": \"string\",\n            \"description\": \"The video prompt, that we are going to use to generate the video starting and finishing with the generated image\"\n        },\n        \"sex\": {\n            \"type\": \"string\",\n            \"description\": \"The sex of the person on the attached image\"\n        }\n    },\n    \"required\": [\n        \"image_prompt\",\n        \"dialogue\",\n        \"video_prompt\",\n        \"sex\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.3,
          "position": [
            -140,
            1900
          ],
          "id": "225b5ecd-d2c9-4ab0-b8ce-1ead188ac932",
          "name": "Structured Output Parser for prompt generation"
        },
        {
          "parameters": {
            "content": "# 4. Generate the main image",
            "height": 360,
            "width": 1140
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            80,
            1800
          ],
          "id": "52f403a7-5047-4c02-912c-9fab7246f41c",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# 5. Generate the looping video",
            "height": 360,
            "width": 1200
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1280,
            1800
          ],
          "id": "9cf40f40-acd0-4aeb-ad7c-601816b64d4b",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "content": "# 6. Generate speech",
            "height": 340,
            "width": 1260
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -540,
            2220
          ],
          "id": "4da17dbd-2fb9-4e1b-b073-20386ffe9c7b",
          "name": "Sticky Note4"
        },
        {
          "parameters": {
            "content": "# 7. Generate lipsync",
            "height": 340,
            "width": 1300
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            780,
            2220
          ],
          "id": "06205a76-c6ec-489a-823a-5bfd328cb278",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "url": "={{ $json.video.url }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            2240,
            2360
          ],
          "id": "e0b44536-59f2-4408-86b0-8169df91b5c4",
          "name": "Download the video"
        },
        {
          "parameters": {
            "content": "# ðŸŽ‰ Here's the generated video",
            "height": 340,
            "width": 400,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            2140,
            2220
          ],
          "id": "b76f4649-1ba3-4166-9d89-0c68f201f295",
          "name": "Sticky Note6"
        },
        {
          "parameters": {
            "model": "qwen3:32b",
            "options": {
              "numCtx": 16048
            }
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
          "typeVersion": 1,
          "position": [
            -1220,
            1200
          ],
          "id": "31c9123f-53c5-49ed-b2a8-3301fdab612f",
          "name": "Ollama Chat Model",
          "credentials": {
            "ollamaApi": {
              "id": "cWXUsJ0LsqnzOEx0",
              "name": "Ollama account"
            }
          }
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
          "typeVersion": 1,
          "position": [
            -900,
            1200
          ],
          "id": "85d542bc-7eea-45ef-b325-70a26a905c96",
          "name": "DeepSeek Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": "tngtech/deepseek-r1t-chimera:free",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
          "typeVersion": 1,
          "position": [
            -760,
            1540
          ],
          "id": "c39d2a13-c05a-4b16-b91e-d66cba75248e",
          "name": "OpenRouter Chat Model",
          "credentials": {
            "openRouterApi": {
              "id": "pKxg2Rhtt3cG3h19",
              "name": "OpenRouter account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "typeVersion": 1,
          "position": [
            -1220,
            1540
          ],
          "id": "6e3a85d7-3606-4e1b-af9b-86e72328c9f1",
          "name": "Google Gemini Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
          "typeVersion": 1,
          "position": [
            -1220,
            1360
          ],
          "id": "f61c7c00-faa5-43cc-b81f-8976a0590588",
          "name": "Azure OpenAI Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -1060,
            1360
          ],
          "id": "3920c595-cc60-4ce7-8911-fef177b2e165",
          "name": "xAI Grok Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "claude-sonnet-4-20250514",
              "cachedResultName": "Claude 4 Sonnet"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
          "typeVersion": 1.3,
          "position": [
            -900,
            1360
          ],
          "id": "bdb4ccc3-c1ee-4a3b-ad04-641901b70393",
          "name": "Anthropic Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -760,
            1360
          ],
          "id": "e5f71064-092d-48f7-8416-743ead6c3d2a",
          "name": "xAI Grok Chat Model1",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "typeVersion": 1,
          "position": [
            -900,
            1540
          ],
          "id": "0a6bbe13-409b-4c9b-b766-fea9349d3bf9",
          "name": "Groq Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
          "typeVersion": 1,
          "position": [
            -1060,
            1200
          ],
          "id": "877a7de7-575d-472d-bd80-fdf066109e54",
          "name": "AWS Bedrock Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
          "typeVersion": 1,
          "position": [
            -1060,
            1540
          ],
          "id": "eacd8a9e-e1e0-4eb2-b78c-caaeecc33b42",
          "name": "Mistral Cloud Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Pick your choice of LLM âš ï¸\nâš ï¸ Make sure to deactive/delete the rest of the LLMs after selecting one",
            "height": 680,
            "width": 700,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1300,
            1060
          ],
          "id": "0b2b2a14-9a10-4d4a-b248-81482f67fdf7",
          "name": "Sticky Note7"
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## Make sure to use n8n `1.97.1` or higher, lower versions could break the stuctured output node\n\n## 1. Setup the two LLM nodes, select a multimodal (!) LLM - I recommend using GPT 4.1 or GPT 4.1-mini. Make sure to disable the rest of the chat nodes.\n## 2. Find all the `Start generating the ...` and `Get the ... status` nodes, and setup your fal.ai authentication. Make sure to use this format in the header authentication: `key YOUR_KEY` - first writing `key` then a space and then pasting in your API key.\n",
            "height": 360,
            "width": 1680,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            240,
            160
          ],
          "id": "0f2305af-e8ad-45aa-a733-f3a74daf051d",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Be part of a growing community and help us create more content like this",
            "height": 260,
            "width": 700,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -540,
            260
          ],
          "id": "b9526699-6155-43e5-a53e-a48b78e0800e",
          "name": "Sticky Note16"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "bcbc506b-434c-4738-9a63-dd38efcace4f",
                  "name": "voice",
                  "value": "={{ $('Generate prompts').item.json.sex === \"female\" ? \"Aria\" : \"Roger\" }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -500,
            2340
          ],
          "id": "fb2f27c3-a4c2-4648-b8a1-a298ce5d0ddb",
          "name": "Set the voice based on sex"
        },
        {
          "parameters": {
            "html": "={{ $json.product.body_html }}",
            "destinationKey": "body",
            "options": {}
          },
          "type": "n8n-nodes-base.markdown",
          "typeVersion": 1,
          "position": [
            780,
            760
          ],
          "id": "beb071d2-16a4-4144-ab8b-32375e0878e7",
          "name": "Markdown"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "e644bc63-a4ad-476a-9abd-c2e43e748bc7",
                  "leftValue": "={{ $json.product.images }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthEquals",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            -500,
            1180
          ],
          "id": "ad8c0047-7b95-4859-894a-b551b08a9aaf",
          "name": "no images"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "b623894a-44da-4a24-9dc0-47754ac2945f",
                  "name": "images",
                  "value": "={{ $json.images || $json.product.images.filter(image => image.width > 200) }}",
                  "type": "array"
                },
                {
                  "id": "116430be-b1a8-4152-b7cb-3891e534aca2",
                  "name": "selected_images",
                  "value": "={{ $json.selected_images || [] }}",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -220,
            1260
          ],
          "id": "b48dd1fd-a3ef-459d-bab6-4b334de53ba5",
          "name": "Setup loop variables"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "93eadf68-6cab-4bcb-92c0-186fa6446c8e",
                  "name": "images",
                  "value": "={{ $('Setup loop variables').last().json.images.slice(1) }}",
                  "type": "array"
                },
                {
                  "id": "1669e0f6-4a4c-4d76-aee7-ee544db28e73",
                  "name": "selected_images",
                  "value": "={{\n\n$json.text === \"Allowed\" ? \n  [...$('Setup loop variables').last().json.selected_images, $('Setup image for processing').last().json.image_for_processing.src] :\n  $('Setup loop variables').last().json.selected_images\n\n}}",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1080,
            1360
          ],
          "id": "d47da686-6ca7-4347-97cb-b5645ba431aa",
          "name": "Update loop variables"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "92a8b8a3-59ed-4e2d-b652-d63b07b8ab59",
                  "name": "image_for_processing",
                  "value": "={{ $json.images[0] }}",
                  "type": "object"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -40,
            1260
          ],
          "id": "aa0af2e6-38d4-4422-9f9f-c62e81bccfbd",
          "name": "Setup image for processing"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "9dec6eba-f1d6-4b7e-bd6e-a808358d44bf",
                  "leftValue": "={{ $json.image_for_processing.width }}",
                  "rightValue": 200,
                  "operator": {
                    "type": "number",
                    "operation": "gt"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            180,
            1260
          ],
          "id": "b8bd3400-4ab1-4d26-9f87-db168e5bb7c8",
          "name": "The image is large enough"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "4dfe8c89-e1a3-4822-b442-009e514b97e8",
                  "name": "images",
                  "value": "={{ $('Setup loop variables').last().json.images.slice(1) }}",
                  "type": "array"
                },
                {
                  "id": "6dca0fae-b336-40be-a596-87511ef26e53",
                  "name": "selected_images",
                  "value": "={{ $('Setup loop variables').last().json.selected_images }}",
                  "type": "array"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            760,
            1540
          ],
          "id": "66201f5e-e3db-4862-953d-3d96fbc34ff7",
          "name": "Skip item"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "c8696b5c-288f-437f-ad0b-4c9e83cf7b28",
                  "leftValue": "={{ \n\n$json.selected_images.map(image => (u => u.split('?')[0].split('.').pop())(image)).includes('png')\n\n&&\n\n$json.selected_images.length >= 2 \n\n}}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                },
                {
                  "id": "fa369de6-0e9f-4c2a-a887-d73dfd957b2c",
                  "leftValue": "={{ \n\n!$json.selected_images.map(image => (u => u.split('?')[0].split('.').pop())(image)).includes('png')\n\n&& \n\n$json.selected_images.length >= 4 }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                },
                {
                  "id": "214cf419-6544-4c5c-a6ca-c1e8ff166f5d",
                  "leftValue": "={{ $json.images }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthEquals",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "or"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1260,
            1540
          ],
          "id": "420d8cda-77ca-4b46-b162-15b16255f1d4",
          "name": "Did we reach the limit?"
        },
        {
          "parameters": {
            "fieldToSplitOut": "selected_images",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            1600,
            1560
          ],
          "id": "bc9b8c12-73e4-4a79-81ea-dab7be2a9740",
          "name": "Split Out"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "5c137ab9-02fb-432d-b983-35a3ebf082db",
                  "leftValue": "={{ $json.selected_images }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthEquals",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1440,
            1460
          ],
          "id": "674b8e9e-689a-4d74-9270-978f3d5c3112",
          "name": "No usable image?"
        },
        {
          "parameters": {
            "errorMessage": "There was no usable image for the selected product"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            1620,
            1300
          ],
          "id": "c589d429-56c6-404a-95ac-db8d7ae332e2",
          "name": "No usable image error"
        },
        {
          "parameters": {
            "errorMessage": "No images found for the selected product"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            -220,
            1080
          ],
          "id": "602b0fac-514e-4b55-a770-c632a2d9b769",
          "name": "No image error"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=You are an AI system reviewing ecommerce product images. Your goal is to identify and flag images that contain significant explanatory or descriptive text overlaid on the image, such as labels, callouts, arrows with text, or UI elements that describe product features directly on the image (for example: \"Waist Tie-up\", \"Thread detailing\", \"Checkered pattern\", diagrams, or instructions).\n\nAllow for:\n\nSmall logos, watermarks, or brand signatures that are unobtrusive and do not describe product features.\nDo NOT allow:\n\nOverlaid text that explains, labels, or calls out product details/features, UI labels, instructions, or prominent text boxes/arrows on the main image content.\nYour output should be:\n\n\"Flagged\" if the image has any explanatory or callout text as described above.\n\"Allowed\" if the image only contains a logo, watermark, or signature.\nExamples:\n\nIf the image contains callouts like \"Checkered pattern\" or \"Thread detailing\" with arrows pointing to those features, respond with \"Flagged\".\nIf the only text is a small brand logo or signature, respond with \"Allowed\".",
            "messages": {
              "messageValues": [
                {
                  "type": "HumanMessagePromptTemplate",
                  "messageType": "imageUrl",
                  "imageUrl": "={{ $('Setup image for processing').item.json.image_for_processing.src }}",
                  "imageDetail": "high"
                }
              ]
            },
            "batching": {}
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.7,
          "position": [
            600,
            1260
          ],
          "id": "9f2e7107-88d7-4d0d-9787-ca882d39c6d8",
          "name": "Analyze image"
        }
      ],
      "pinData": {},
      "connections": {
        "On form submission": {
          "main": [
            [
              {
                "node": "Setup defaults",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the products from the Shopify store": {
          "main": [
            [
              {
                "node": "For each product",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup defaults": {
          "main": [
            [
              {
                "node": "Get the products from the Shopify store",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Generate prompts",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Analyze image",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the image": {
          "main": [
            [
              {
                "node": "Get the image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the image": {
          "main": [
            [
              {
                "node": "Image status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Image status": {
          "main": [
            [
              {
                "node": "Download the image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Download the image": {
          "main": [
            [
              {
                "node": "Start generating the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the image": {
          "main": [
            [
              {
                "node": "Wait for the image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup product": {
          "main": [
            [
              {
                "node": "Markdown",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the video": {
          "main": [
            [
              {
                "node": "Get the video status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the video status": {
          "main": [
            [
              {
                "node": "Video status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video status": {
          "main": [
            [
              {
                "node": "Get the  video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the video": {
          "main": [
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the  video": {
          "main": [
            [
              {
                "node": "Set the voice based on sex",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the speech": {
          "main": [
            [
              {
                "node": "Get the speech status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the speech status": {
          "main": [
            [
              {
                "node": "Speech status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the speech": {
          "main": [
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Speech status": {
          "main": [
            [
              {
                "node": "Get the speech",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the speech": {
          "main": [
            [
              {
                "node": "Start generating the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the lipsync": {
          "main": [
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the lipsync": {
          "main": [
            [
              {
                "node": "Get the lipsync status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the lipsync status": {
          "main": [
            [
              {
                "node": "Lipsync status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Lipsync status": {
          "main": [
            [
              {
                "node": "Get the lipsync video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit loop variables": {
          "main": [
            [
              {
                "node": "Limits exceeded?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "For each product": {
          "main": [
            [
              {
                "node": "Edit loop variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Limits exceeded?": {
          "main": [
            [
              {
                "node": "Select product",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup defaults",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Select product": {
          "main": [
            [
              {
                "node": "Setup product",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Close the form": {
          "main": [
            [
              {
                "node": "no images",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Download image": {
          "main": [
            [
              {
                "node": "Resize image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Resize image": {
          "main": [
            [
              {
                "node": "Convert image to base64",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Convert image to base64": {
          "main": [
            [
              {
                "node": "Set base64 data",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set base64 data": {
          "main": [
            [
              {
                "node": "Aggregate base64",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate base64": {
          "main": [
            [
              {
                "node": "Generate prompts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate prompts": {
          "main": [
            [
              {
                "node": "Start generating the image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Structured Output Parser for prompt generation": {
          "ai_outputParser": [
            [
              {
                "node": "Generate prompts",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Get the lipsync video": {
          "main": [
            [
              {
                "node": "Download the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set the voice based on sex": {
          "main": [
            [
              {
                "node": "Start generating the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Markdown": {
          "main": [
            [
              {
                "node": "Close the form",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "no images": {
          "main": [
            [
              {
                "node": "No image error",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup loop variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup loop variables": {
          "main": [
            [
              {
                "node": "Setup image for processing",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup image for processing": {
          "main": [
            [
              {
                "node": "The image is large enough",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Update loop variables": {
          "main": [
            [
              {
                "node": "Did we reach the limit?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "The image is large enough": {
          "main": [
            [
              {
                "node": "Analyze image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Skip item",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Skip item": {
          "main": [
            [
              {
                "node": "Did we reach the limit?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Did we reach the limit?": {
          "main": [
            [
              {
                "node": "No usable image?",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup loop variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "Download image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "No usable image?": {
          "main": [
            [
              {
                "node": "No usable image error",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Analyze image": {
          "main": [
            [
              {
                "node": "Update loop variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "cd0a0230-27dd-4026-9842-1247d919867e",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "luNO1hHMDUnffHAs",
      "tags": []
    }
  },
  {
    "id": "scary-story-tiktok",
    "title": "Scary Story TikTok Generator",
    "description": "Scrapes Reddit horror prompts, writes scripts with Gemini, renders scenes with Together AI, and posts short-form videos.",
    "problem": "Faceless YouTube/TikTok channels need a constant stream of spooky stories without writing or editing each clip.",
    "tags": [
      "tiktok",
      "reddit",
      "video",
      "horror",
      "fal"
    ],
    "workflow": {
      "name": "Episode 18 Scary Stories TikTok final",
      "nodes": [
        {
          "parameters": {
            "options": {}
          },
          "type": "n8n-nodes-base.splitInBatches",
          "typeVersion": 3,
          "position": [
            -2620,
            1920
          ],
          "id": "17a3416c-8768-4930-8284-9a86aaa31708",
          "name": "Loop Over Items"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://api.together.ai/v1/images/generations",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpBearerAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "model",
                  "value": "black-forest-labs/FLUX.1-schnell-Free"
                },
                {
                  "name": "prompt",
                  "value": "={{ $json.image_prompt }}"
                },
                {
                  "name": "width",
                  "value": "={{ 720 }}"
                },
                {
                  "name": "height",
                  "value": "={{ 1280 }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -2240,
            1660
          ],
          "id": "c6b3aa8e-5717-4c01-b8be-5a336406b497",
          "name": "Generate AI image",
          "alwaysOutputData": false,
          "credentials": {
            "httpBearerAuth": {
              "id": "Y58EiorQxBVC7D3s",
              "name": "Together AI"
            }
          },
          "onError": "continueErrorOutput"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "url",
                  "value": "={{ $json.data[0].url }}"
                },
                {
                  "name": "media_type",
                  "value": "image"
                }
              ]
            },
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1940,
            1600
          ],
          "id": "20e3cb91-358e-4845-b81c-d7d9c51a7ae5",
          "name": "Upload image to server",
          "retryOnFail": true
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start generating TTS (chatterbox)').item.json.file_id }}/status",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1260,
            1720
          ],
          "id": "0a5c293a-be60-4392-a81a-88500dc83f92",
          "name": "Get status of TTS generation",
          "retryOnFail": true
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "ready",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "91402596-3978-4dfc-91b7-9ffe3521b862"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "ready"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0c29765e-4213-434c-9bf3-c5e854dd6ee8",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "processing",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "processing"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "4a6cfd86-e690-417e-aa6d-ae497e1177ae",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "not_found",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "failed"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            -1080,
            1780
          ],
          "id": "42469903-80f0-4abc-a2c0-4db83d6b2376",
          "name": "TTS status switch"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/video-tools/generate/tts-captioned-video",
            "sendBody": true,
            "contentType": "form-urlencoded",
            "specifyBody": "string",
            "body": "={{ \n\n[\n  `background_id=${$('Upload image to server').last().json.file_id}`,\n  `audio_id=${$json.tts_audio_id}`,\n  `text=${encodeURIComponent($('Loop Over Items').last().json.text)}`,\n  'caption_config_line_count=2',\n  'caption_config_line_max_length=15',\n  'caption_config_font_size=80',\n  'caption_config_font_bold=true',\n  'caption_config_font_color=ffffff',\n  'caption_config_subtitle_position=bottom',\n  'image_effect=pan'\n].filter(Boolean).join('&')\n\n}}",
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -680,
            1760
          ],
          "id": "efca6ecb-3e86-476c-8a19-3382dd8c420d",
          "name": "Start generating captioned TTS video"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start generating captioned TTS video').item.json.file_id }}/status",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -280,
            1780
          ],
          "id": "3685a5e8-dbc9-4439-b61d-c0ac69c38096",
          "name": "Get video generation status",
          "retryOnFail": true
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "ready",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "91402596-3978-4dfc-91b7-9ffe3521b862"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "ready"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0c29765e-4213-434c-9bf3-c5e854dd6ee8",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "processing",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "processing"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "4a6cfd86-e690-417e-aa6d-ae497e1177ae",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "not_found",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "failed"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            -100,
            1780
          ],
          "id": "cff75dab-68cd-44bf-993d-9d80973fa135",
          "name": "Video generation switch"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "a7fdacca-749e-4f69-84fd-50075e0e3409",
                  "name": "video_id",
                  "value": "={{ $('Start generating captioned TTS video').item.json.file_id }}",
                  "type": "string"
                },
                {
                  "id": "6c99c267-5c41-4697-ba19-b51d9e8c9a4e",
                  "name": "tts_id",
                  "value": "={{ $('Setup TTS file_id').item.json.tts_audio_id }}",
                  "type": "string"
                },
                {
                  "id": "21dd08a7-f785-4829-8609-a99950f21572",
                  "name": "image_id",
                  "value": "={{ $('Upload image to server').item.json.file_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            160,
            1780
          ],
          "id": "fc3419e0-edf0-435e-951f-c4b88d3f4214",
          "name": "Setup media fields"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            -2180,
            2120
          ],
          "id": "99225c4c-5012-4675-b177-2cc1f473354a",
          "name": "Combine loop items"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/video-tools/merge",
            "sendBody": true,
            "contentType": "form-urlencoded",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "video_ids",
                  "value": "={{ $json.data.map(item => item.video_id).join(',') }}"
                },
                {
                  "name": "background_music_id",
                  "value": "={{ $('Set background music id').first().json.background_music_id ?? '' }}"
                },
                {
                  "name": "background_music_volume",
                  "value": "={{ $('Configure me').first().json.background_music_volume }}"
                }
              ]
            },
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1980,
            2120
          ],
          "id": "2b6905e2-4455-4da1-ba0b-f2401e8d2543",
          "name": "Start merging the videos"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start merging the videos').item.json.file_id }}/status",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1560,
            2160
          ],
          "id": "25055217-2567-44cb-b744-c433af2d6884",
          "name": "Get status of the video merge"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "ready",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "91402596-3978-4dfc-91b7-9ffe3521b862"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "ready"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0c29765e-4213-434c-9bf3-c5e854dd6ee8",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "processing",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "processing"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "4a6cfd86-e690-417e-aa6d-ae497e1177ae",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "not_found",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "failed"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            -1380,
            2180
          ],
          "id": "9decfc13-e138-4885-916c-9b9a316a2646",
          "name": "Video merge status switch"
        },
        {
          "parameters": {
            "amount": 10
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -1940,
            1780
          ],
          "id": "aa67d849-7d3f-42c8-845a-ad9076b2063d",
          "name": "Wait for the error / rate limit to go away",
          "webhookId": "dd4b24dd-3b50-4c92-b78f-2744086ba9d2"
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -1440,
            1720
          ],
          "id": "f2ac1bba-9d67-4277-8887-8df8fc24b3a4",
          "name": "Wait until the TTS gets generated",
          "webhookId": "5440c431-012b-43be-a88b-13c011800acc"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/audio-tools/tts/chatterbox",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "text",
                  "value": "={{ $('Loop Over Items').item.json.text }}"
                },
                {
                  "name": "sample_audio_id",
                  "value": "={{ $('Set sample voice id').first().json.sample_audio_id ?? '' }}"
                },
                {
                  "name": "exaggeration",
                  "value": "={{ $('Configure me').first().json.chatterbox_exaggeration }}"
                },
                {
                  "name": "cfg_weight",
                  "value": "={{ $('Configure me').first().json.chatterbox_cfg_weight }}"
                },
                {
                  "name": "temperature",
                  "value": "={{ $('Configure me').first().json.chatterbox_temperature }}"
                },
                {
                  "name": "chunk_chars",
                  "value": "256"
                },
                {
                  "name": "chunk_silence_ms",
                  "value": "350"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1620,
            1720
          ],
          "id": "a12564d2-a23a-41ad-95ed-0415f721be70",
          "name": "Start generating TTS (chatterbox)"
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -480,
            1780
          ],
          "id": "c0e279ff-3ade-4e2b-a188-6ee2ea210d0b",
          "name": "Wait until the video gets generated",
          "webhookId": "7ee4a3f6-a2f2-4b53-a6c1-cd3c23bc9aec"
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -1760,
            2160
          ],
          "id": "d3a2104f-5a96-427e-aa62-74a12ccb654f",
          "name": "Wait until the videos gets merged together",
          "webhookId": "291478b4-ab17-41fa-9c4c-c206ac8683c2"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "d41f1ef6-7591-41b7-805d-94b58caba5c4",
                  "name": "tts_audio_id",
                  "value": "={{ $('Start generating TTS (chatterbox)').item.json.file_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -900,
            1760
          ],
          "id": "3ba034bf-4491-4b28-91ab-e87033cd18c5",
          "name": "Setup TTS file_id"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "value": "gpt-4.1",
              "mode": "list",
              "cachedResultName": "gpt-4.1"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            320,
            240
          ],
          "id": "795a40ab-a8cf-4067-8190-e83aa82dff05",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "content": "# Pick your choice of LLM âš ï¸\nâš ï¸ Make sure to deactive/delete the rest of the LLMs after selecting one",
            "height": 700,
            "width": 700,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -220,
            100
          ],
          "id": "b010fe49-1edc-4afa-a7ed-0dbda845047d",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "model": "qwen3:32b",
            "options": {
              "numCtx": 16048
            }
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
          "typeVersion": 1,
          "position": [
            -140,
            240
          ],
          "id": "1fda7c39-546e-486d-bff1-e99e423ef367",
          "name": "Ollama Chat Model",
          "credentials": {
            "ollamaApi": {
              "id": "cWXUsJ0LsqnzOEx0",
              "name": "Ollama account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
          "typeVersion": 1,
          "position": [
            180,
            240
          ],
          "id": "77941471-b8f2-4177-8fe0-a99797400522",
          "name": "DeepSeek Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": "tngtech/deepseek-r1t-chimera:free",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
          "typeVersion": 1,
          "position": [
            320,
            580
          ],
          "id": "6bd948a1-6cc3-43ca-b7b9-d44d4971d13b",
          "name": "OpenRouter Chat Model",
          "credentials": {
            "openRouterApi": {
              "id": "pKxg2Rhtt3cG3h19",
              "name": "OpenRouter account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "typeVersion": 1,
          "position": [
            -140,
            580
          ],
          "id": "7b9e29e5-9313-4265-92ae-1a86d4143ec9",
          "name": "Google Gemini Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
          "typeVersion": 1,
          "position": [
            -140,
            400
          ],
          "id": "d6909aea-9d61-4b09-8ac2-440a8c5526fd",
          "name": "Azure OpenAI Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            20,
            400
          ],
          "id": "a13b8bbd-f24f-497f-ba91-416919517577",
          "name": "xAI Grok Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "claude-sonnet-4-20250514",
              "cachedResultName": "Claude 4 Sonnet"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
          "typeVersion": 1.3,
          "position": [
            180,
            400
          ],
          "id": "12592026-f863-4383-bcd4-e8d14fd756fb",
          "name": "Anthropic Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            320,
            400
          ],
          "id": "c51ea62f-9690-43d2-a96d-79f114caa340",
          "name": "xAI Grok Chat Model1",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "typeVersion": 1,
          "position": [
            180,
            580
          ],
          "id": "0f5a2a6c-5e99-4a34-9244-658f4414ce7b",
          "name": "Groq Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
          "typeVersion": 1,
          "position": [
            20,
            240
          ],
          "id": "2e459cd6-47c1-4a21-9918-cc1ba804dc1d",
          "name": "AWS Bedrock Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
          "typeVersion": 1,
          "position": [
            20,
            580
          ],
          "id": "15bf8cdb-5496-4371-bdfb-531c9d1f7789",
          "name": "Mistral Cloud Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# 2. Create script from the story",
            "height": 560,
            "width": 360
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -140,
            840
          ],
          "id": "8914cae6-944e-4c7f-b0b8-7300bdbf10e1",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "content": "# 6. Merge the videos",
            "height": 360,
            "width": 1180
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2280,
            2000
          ],
          "id": "99518b44-ad42-42f1-afad-f4cb3fcfbffd",
          "name": "Sticky Note6"
        },
        {
          "parameters": {
            "content": "# 3. Generate an image with Flux âš ï¸\n\nâš ï¸ add your credentials to the `Generate AI image` node\n\nthe free image generation is slow, if you want to make it faster, just remove the `free`",
            "height": 520,
            "width": 580
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2280,
            1440
          ],
          "id": "56659373-51de-4e26-8008-92c5d87eb44a",
          "name": "Sticky Note7"
        },
        {
          "parameters": {
            "content": "# 4. Create speech from text",
            "height": 520,
            "width": 900
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1660,
            1440
          ],
          "id": "31f9d57c-c8c8-41ab-b8cc-8056be480802",
          "name": "Sticky Note8"
        },
        {
          "parameters": {
            "content": "# 5. Generate captioned video",
            "height": 520,
            "width": 1040
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -720,
            1440
          ],
          "id": "a166544c-edbc-41d0-9088-44c640519d2e",
          "name": "Sticky Note9"
        },
        {
          "parameters": {
            "text": "=<Instructions>\nUsing the inspirations below, write a completely new scary story. \n\nUse the following structure for the story, and make sure it's coherent and the reading level is 8th grade. Make it sound like a camp counsellor telling the story to people around the campfire. Don't greet/address the audience, just start telling the story. Don't mention the campfire.\n\n1. Act 1: Set the scene with the protagonist and the antagonist. Start building up the sense of unease or the source of fear.\n2. Act 2: Growing tension between the protagonist and the antagonist\n3. Act 3: Conflict goes to a head\n4. Act 4: Aftermath\n\n\nFor each scene, create an image prompt that we'll use with an image generation tool.\n\nCreate the image generation prompt using the ImageTemplate below.\nAdd \"Do not add text or characters to the final image.\" to the end of each image prompt.\n\nUse the following art style for the images:\n\n{{ $('Configure me').first().json.art_style }}\n</Instructions>\n\n<ImageTemplate>\nGenerate an image that matches the following story scene, using the provided art style.\n\nStory scene:\n{ADD_STORY_SCENE_HERE}\n</ImageTemplate>\n\n<Inspirations>\n{{ $json.items.map(item => `<Story>\n${item.title}\n\n${item.selftext}\n</Story>`).join('\\n') }}\n</Inspirations>",
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"scenes\": {\n            \"type\": \"array\",\n            \"description\": \"Scenes for the story\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"text\": {\n                        \"type\": \"string\",\n                        \"description\": \"the text of the scene, it will be used for TTS\"\n                    },\n                    \"image_prompt\": {\n                        \"type\": \"string\",\n                        \"description\": \"prompt for image generation\"\n                    }\n                },\n                \"required\": [\n                    \"text\",\n                    \"image_prompt\"\n                ]\n            }\n        },\n        \"title\": {\n            \"type\": \"string\",\n            \"description\": \"the title of the tiktok video\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"the description of the tiktok video\"\n        },\n        \"tags\": {\n            \"type\": \"array\",\n            \"description\": \"tags for sharing the video on tiktok\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        }\n    },\n    \"required\": [\n        \"scenes\",\n        \"title\",\n        \"description\",\n        \"tags\"\n    ]\n}",
            "options": {
              "systemPromptTemplate": "You are an expert copywriter. You write exciting short stories."
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1.1,
          "position": [
            -80,
            1000
          ],
          "id": "bbe6f995-bf54-4d96-8a81-4e282afc4a6b",
          "name": "Create the script",
          "retryOnFail": true
        },
        {
          "parameters": {
            "fieldToSplitOut": "output.scenes",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            -20,
            1220
          ],
          "id": "6425e91e-9ba3-4ae4-a54d-21bc774e8284",
          "name": "Split Out"
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## Make sure to use n8n `1.97.1` or higher, lower versions could break the stuctured output node\n\n## 1. Add the AI Agents No-Code Tools server URL to the Configure me node, and optionally your Postiz server URL\n## 2. Select the LLM you want to use, make sure to deactivate the rest\n## 3. Add your free Together.ai API key to the Generate AI image node\n## 4. Setup the Postiz nodes with your credentials\n",
            "height": 360,
            "width": 1680,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1940,
            440
          ],
          "id": "e740737b-5019-4efa-9fe0-dcd524cb9621",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7bbb518a-c4f1-49a5-9e72-3e9d939b131b",
                  "name": "AI_AGENTS_NO_CODE_TOOLS_URL",
                  "value": "http://192.168.68.60:8000/",
                  "type": "string"
                },
                {
                  "id": "79226bcb-3a26-4d30-b3a3-e578cda677f9",
                  "name": "postiz_api_url",
                  "value": "https://api.postiz.com/public/v1",
                  "type": "string"
                },
                {
                  "id": "34f8b468-b669-46ed-be9d-e77e15f36380",
                  "name": "background_music_volume",
                  "value": 0.1,
                  "type": "number"
                },
                {
                  "id": "a725aaf1-c91e-4d5b-87f9-d540d309098c",
                  "name": "chatterbox_exaggeration",
                  "value": 0.5,
                  "type": "number"
                },
                {
                  "id": "d048e31d-f1cb-48ac-9ff2-13f1028c843e",
                  "name": "chatterbox_cfg_weight",
                  "value": 0.5,
                  "type": "number"
                },
                {
                  "id": "96943158-11f6-4731-9d4b-dbae0862d7ab",
                  "name": "chatterbox_temperature",
                  "value": 0.8,
                  "type": "number"
                },
                {
                  "id": "fd0df44b-b7d3-45af-8556-bd77ef83b2db",
                  "name": "art_style",
                  "value": "=Scene: Highly cinematic with a moody, noir atmosphere, inspired by detective and crime thriller films from the 1970s and 1980s. The setting can be anything, from an interior room to a suburban street, depicted in a tense, suspenseful moment. Emphasize the following details:\n\n- **Lighting:**Â Strong directional lighting with deep shadows; use cool blue and teal color grading with subtle hints of warm light from lamps or windows. The lighting should cast dramatic shadows across the scene.\n- **Mood:**Â Mysterious, somber, and slightly surreal ambiance, evoking a sense of unease or suspense.\n- **Subjects:**Â Human figures should appear contemplative, searching, tense, or whatever the scene calls for.\n- **Color Palette:**Â Dominant cold blues and teals contrasted by occasional soft warm light from lamps or daylight through curtains. The overall tone should be desaturated and muted.\n- **Cinematic Framing:**Â Framed like a movie still, with careful composition and leading lines, sometimes viewed through doorways or windows for added depth.\n- **Exterior Scenes:**Â Overcast skies, muted and overexposed daylight.\n\n**Style influences:** Denis Villeneuve, David Fincher, *Zodiac*, *Mindhunter*, *True Detective*, Gregory Crewdson, neo-noir photography.",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -2180,
            1080
          ],
          "id": "a2b8265d-e485-47cb-87b0-cce37d3fd1d3",
          "name": "Configure me"
        },
        {
          "parameters": {
            "content": "# Configure me âš ï¸\n",
            "height": 560,
            "width": 300,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2280,
            840
          ],
          "id": "8b109688-9c0f-4b95-80ef-616b9b46a689",
          "name": "Sticky Note12"
        },
        {
          "parameters": {
            "url": "={{ $json.AI_AGENTS_NO_CODE_TOOLS_URL }}/health",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1700,
            1000
          ],
          "id": "cea55748-015b-488d-993a-1e5f7e49fb77",
          "name": "HTTP Request",
          "onError": "continueErrorOutput"
        },
        {
          "parameters": {
            "errorMessage": "The server is not running or isn't configured"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            -1700,
            1220
          ],
          "id": "f4589939-9537-4201-967d-46d2854765fa",
          "name": "Server isn't ready"
        },
        {
          "parameters": {
            "content": "# Test connection",
            "height": 560,
            "width": 420,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1940,
            840
          ],
          "id": "f672f4cb-321f-4636-a66e-66733a455556",
          "name": "Sticky Note15"
        },
        {
          "parameters": {
            "content": "# 9. cleanup (removing tmp files)\nif you want to delete the generated video too, add it's id to the array",
            "height": 360,
            "width": 540
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1360,
            2400
          ],
          "id": "9d618443-9c44-421a-9eda-fcadfe604bab",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "27bcaf96-fcaa-41cb-8a51-436870ce2110",
                  "name": "file_ids",
                  "value": "={{ [...$('Combine loop items').last().json.data.map(item => [item.video_id, item.tts_id, item.image_id]).flat(), $('Configure me').first().json.chatterbox_clone_voice_id, $('Configure me').first().json.background_music_id, $('Upload overlay to the server').item.json.file_id].filter(Boolean) }}",
                  "type": "array"
                },
                {
                  "id": "ff26af44-84ff-46a0-8532-5eeca8dbb099",
                  "name": "",
                  "value": "",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1320,
            2520
          ],
          "id": "1d98b47c-e1e8-438f-84a1-e3e519ab47e5",
          "name": "Set file ids to delete"
        },
        {
          "parameters": {
            "method": "DELETE",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $json.file_ids }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1000,
            2520
          ],
          "id": "c924ca30-7479-457c-9842-0d5399a2faa0",
          "name": "Delete tmp files",
          "disabled": true
        },
        {
          "parameters": {
            "fieldToSplitOut": "file_ids",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            -1160,
            2520
          ],
          "id": "ab91bbe3-816d-40cb-ace0-efcdfa3c996d",
          "name": "For each file"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Get premium variations of this workflow!\n\n## Be part of a growing community and help us create more content like this",
            "height": 300,
            "width": 700,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2680,
            500
          ],
          "id": "0da53a2e-5461-4bf0-af28-df019e9db940",
          "name": "Sticky Note16"
        },
        {
          "parameters": {
            "content": "# 8. Schedule with Postiz",
            "height": 820,
            "width": 880,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2280,
            2400
          ],
          "id": "7400bb12-90d8-4ffa-8cdb-a57f691ec5c7",
          "name": "Sticky Note20"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start adding overlay to thevideo').last().json.file_id }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -2240,
            2520
          ],
          "id": "d21cbc05-fc8e-4a9b-b633-326eead7c93c",
          "name": "Download the video for Postiz"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Configure me').first().json.postiz_api_url }}/upload",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "data"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -2040,
            2520
          ],
          "id": "ea9f8e97-5dfd-4796-9a77-f5e3936c9cdb",
          "name": "Upload video to Postiz",
          "credentials": {
            "httpBearerAuth": {
              "id": "qaxoCSbcbmatcO44",
              "name": "Local postiz"
            },
            "httpCustomAuth": {
              "id": "X84DBVwdxIyjeWnM",
              "name": "Custom Auth account"
            },
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "url": "={{ $('Configure me').first().json.postiz_api_url }}/integrations",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1820,
            2520
          ],
          "id": "1c658fe2-6b27-4423-be6d-880c24fd0068",
          "name": "Get Postiz integrations",
          "credentials": {
            "httpBearerAuth": {
              "id": "qaxoCSbcbmatcO44",
              "name": "Local postiz"
            },
            "httpCustomAuth": {
              "id": "X84DBVwdxIyjeWnM",
              "name": "Custom Auth account"
            },
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            -1640,
            2520
          ],
          "id": "31434d65-1e61-483a-88a5-06e6da992537",
          "name": "Merge integrations",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Setup the integration\n\nYou should implement your own logic here.\n\n1. You can hard-code the desired integration id\n2. You can filter the integrations by your own logic\n\nMake sure to modify the `settings` field if you are sharing to other platforms than YouTube",
            "height": 500,
            "width": 380
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2240,
            2700
          ],
          "id": "d8eeed9a-c941-418b-b45e-8e406211d4b2",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "formTitle": "Scary story creator for TikTok",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Background music",
                  "fieldType": "file",
                  "multipleFiles": false,
                  "acceptFileTypes": ".mp3"
                },
                {
                  "fieldLabel": "Sample voice",
                  "fieldType": "file",
                  "multipleFiles": false,
                  "acceptFileTypes": ".wav, .mp3"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.formTrigger",
          "typeVersion": 2.2,
          "position": [
            -2520,
            1080
          ],
          "id": "c5800aad-08cc-498a-9953-0e14e9f03bb4",
          "name": "On form submission",
          "webhookId": "eba470c9-0082-43b1-b48d-e62981cb0415"
        },
        {
          "parameters": {
            "jsCode": "return $('On form submission').first()"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -1240,
            920
          ],
          "id": "6079b135-c5ec-4735-8f03-06077d6291ec",
          "name": "Relay background music"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7aec0c26-8c27-4aa6-bec7-1f65d9fe3aaf",
                  "name": "background_music_id",
                  "value": "={{ $json.file_id ?? '' }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1240,
            1220
          ],
          "id": "39375cce-c971-4181-a95d-cee48eba85a0",
          "name": "Set background music id"
        },
        {
          "parameters": {
            "jsCode": "return $('On form submission').first()"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -800,
            920
          ],
          "id": "bc416d69-0d4e-4323-8196-00b8b2d60b57",
          "name": "Relay sample audio"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7aec0c26-8c27-4aa6-bec7-1f65d9fe3aaf",
                  "name": "sample_audio_id",
                  "value": "={{ $json.file_id ?? '' }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -800,
            1240
          ],
          "id": "e52b820e-ae27-47c6-ae81-ecffb0101193",
          "name": "Set sample voice id"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "=data"
                },
                {
                  "name": "media_type",
                  "value": "video"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -820,
            2160
          ],
          "id": "2f6d03e2-0c63-4753-ab99-e68d45331e3b",
          "name": "Upload overlay to the server"
        },
        {
          "parameters": {
            "url": "https://github.com/gyoridavid/ai_agents_az/raw/refs/heads/main/episode_18/bg_1.mp4",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1000,
            2160
          ],
          "id": "68393334-1c9a-4b0c-86ae-c8219bd29f24",
          "name": "Download example overlay"
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -420,
            2160
          ],
          "id": "c08d5fc0-4d81-48a9-bccd-ac560bab17df",
          "name": "Wait until the videos gets merged together1",
          "webhookId": "b7a3186e-211b-47e7-96c4-11a942809b30"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/video-tools/add-colorkey-overlay",
            "sendBody": true,
            "contentType": "form-urlencoded",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "video_id",
                  "value": "={{ $('Start merging the videos').last().json.file_id }}"
                },
                {
                  "name": "overlay_video_id",
                  "value": "={{ $('Upload overlay to the server').last().json.file_id }}"
                },
                {
                  "name": "color",
                  "value": "#000000"
                }
              ]
            },
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -640,
            2160
          ],
          "id": "fee8b2bc-e42b-4ba4-a0cf-2bcb6d935092",
          "name": "Start adding overlay to thevideo"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start adding overlay to thevideo').last().json.file_id }}/status",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -220,
            2160
          ],
          "id": "42c718dd-a6c5-4b15-943c-2d376b6a92a7",
          "name": "Get status of the overlay"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "ready",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "91402596-3978-4dfc-91b7-9ffe3521b862"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "ready"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0c29765e-4213-434c-9bf3-c5e854dd6ee8",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "processing",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "processing"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "4a6cfd86-e690-417e-aa6d-ae497e1177ae",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "not_found",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "failed"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            20,
            2200
          ],
          "id": "3c25208f-a68d-4549-949a-657426116e21",
          "name": "Overlay status"
        },
        {
          "parameters": {
            "content": "To get free social media scheduling, you need to host your own [Postiz instance](https://docs.postiz.com/installation/coolify). \n\nAs an alternative, you can use the free tier of [ayrshare](https://www.ayrshare.com/).",
            "height": 340
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -2560,
            2400
          ],
          "id": "460af147-6ca5-4384-b538-ef7555ec34ea",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "content": "# Upload background music",
            "height": 560,
            "width": 400,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1480,
            840
          ],
          "id": "786ffc69-f976-466d-9e7d-ace8d5740691",
          "name": "Sticky Note17"
        },
        {
          "parameters": {
            "content": "# Upload voice sample",
            "height": 560,
            "width": 400,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1040,
            840
          ],
          "id": "f40dbe53-342e-4ee1-9906-7ac34450f52c",
          "name": "Sticky Note18"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "=Background_music"
                },
                {
                  "name": "media_type",
                  "value": "audio"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1240,
            1060
          ],
          "id": "6ea8126c-fb04-4cd7-807a-9c60de97804e",
          "name": "Upload background music to the server"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "=Sample_voice"
                },
                {
                  "name": "media_type",
                  "value": "audio"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -800,
            1060
          ],
          "id": "0eecbd01-e71e-4e4a-ae2a-fb2accf4da7f",
          "name": "Upload voice sample to the server"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7d55d6da-a78c-4a28-9343-0ea9035a0aa3",
                  "name": "AI_AGENTS_NO_CODE_TOOLS_URL",
                  "value": "={{   ((u) => {   let s = u.trim();   if (!/^https?:\\/\\//i.test(s)) s = 'https://' + s;   const parts = s.split('/');   return parts[0] + '//' + parts[2]; })($json.AI_AGENTS_NO_CODE_TOOLS_URL)  }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1900,
            1080
          ],
          "id": "ced29d51-7e87-45fd-b4ea-0cf072bf9dcb",
          "name": "Setup defaults"
        },
        {
          "parameters": {
            "content": "# 7. Add overlay",
            "height": 360,
            "width": 1320
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1060,
            2000
          ],
          "id": "6f6646dd-a3b4-4a8b-a995-428761281195",
          "name": "Sticky Note10"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "1f7adeed-3cd0-47bb-8bf5-5887d2c82cad",
                  "name": "postiz_integration_id",
                  "value": "={{ $json.data.find(integration => integration.identifier === 'tiktok')?.id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -2200,
            3000
          ],
          "id": "c16ccf96-822e-4f56-ba5c-cbca207be528",
          "name": "Set integration id for TikTok",
          "disabled": true
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Configure me').first().json.postiz_api_url }}/posts",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n  \"type\": \"schedule\",\n  \"date\": \"{{ $now.plus(1, 'days').toISO() }}\",\n  \"tags\": [],\n  \"shortLink\": false,\n  \"posts\": [\n    {\n      \"integration\": {\n        \"id\": \"{{ $json.postiz_integration_id }}\"\n      },\n      \"value\": [\n        {\n          \"content\": \"{{ $('Create the script').item.json.output.description }}\",\n          \"image\": [\n            {\n              \"id\": \"{{ $('Upload video to Postiz').item.json.id }}\",\n              \"path\": \"{{ $('Upload video to Postiz').item.json.path }}\"\n            }\n          ]\n        }\n      ],\n      \"settings\": {\n      \"title\": \"{{ $('Create the script').item.json.output.title }}\",\n      \"type\": \"unlisted\",\n      \"tags\": {{ JSON.stringify($('Create the script').item.json.output.tags.map(tag => ({ value: tag, label: tag }))) }}\n  }\n    }\n  ]\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -1660,
            3000
          ],
          "id": "df53357c-9cd3-4375-87dc-75ccef74e548",
          "name": "Schedule the TikTok video",
          "credentials": {
            "httpHeaderAuth": {
              "id": "vLZnCmQuaqpFY5LK",
              "name": "Postiz auth"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "url": "=https://www.reddit.com/r/creepyencounters/top.json?t=year&limit=100",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -520,
            980
          ],
          "id": "a3081c61-6c6d-46c3-9097-4c5fe72bdcb6",
          "name": "Get stories from reddit"
        },
        {
          "parameters": {
            "jsCode": "function getRandomItems(A, X) {\n  return A\n    .slice()\n    .sort(() => Math.random() - 0.5)\n    .slice(0, X);\n}\n\nconst items = getRandomItems($input.all().map(item => item.json.data), 3);\n\nreturn [{\n  json: {\n    items\n  }\n}]"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -340,
            1200
          ],
          "id": "42edb01a-c030-46b4-af29-3720bfe6fdd9",
          "name": "Code"
        },
        {
          "parameters": {
            "content": "# 1. Source inspirations from Reddit",
            "height": 560,
            "width": 420
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -600,
            840
          ],
          "id": "a513fd82-b6ff-45b3-9354-a40af0727176",
          "name": "Sticky Note11"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6b9c15f3-2db9-4a1e-a688-4fc4e95ded53",
                  "leftValue": "={{ $('On form submission').item.json['Sample voice'] }}",
                  "rightValue": "",
                  "operator": {
                    "type": "object",
                    "operation": "exists",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            -1000,
            1060
          ],
          "id": "946baa9d-14d2-456e-b51e-4097cad11d91",
          "name": "Upload voice sample?"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "6b9c15f3-2db9-4a1e-a688-4fc4e95ded53",
                  "leftValue": "={{ $('On form submission').item.json['Background music'] }}",
                  "rightValue": "",
                  "operator": {
                    "type": "object",
                    "operation": "exists",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            -1440,
            1120
          ],
          "id": "70a74fec-f110-4afe-adf6-6785cb2e28a9",
          "name": "Upload music?"
        },
        {
          "parameters": {
            "fieldToSplitOut": "data.children",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            -340,
            980
          ],
          "id": "5d006f17-caaa-4f64-b2ef-5b397e50419b",
          "name": "For each post"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "a6926aaf-b4ac-4e90-ac82-c32796fd7e0c",
                  "leftValue": "={{ $json.data.selftext.length }}",
                  "rightValue": 1500,
                  "operator": {
                    "type": "number",
                    "operation": "gt"
                  }
                },
                {
                  "id": "c81af31b-c032-4960-870f-ee7b6a6dc029",
                  "leftValue": "={{ $json.data.is_video }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "false",
                    "singleValue": true
                  }
                },
                {
                  "id": "659ef810-1298-4df0-81f4-e049c2c020b1",
                  "leftValue": "={{ $json.data.media === null }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.filter",
          "typeVersion": 2.2,
          "position": [
            -520,
            1200
          ],
          "id": "fdb85b1f-43a2-4dc4-8dd7-84bc76900ad3",
          "name": "Remove short ones"
        }
      ],
      "pinData": {},
      "connections": {
        "Loop Over Items": {
          "main": [
            [
              {
                "node": "Combine loop items",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Generate AI image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate AI image": {
          "main": [
            [
              {
                "node": "Upload image to server",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the error / rate limit to go away",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload image to server": {
          "main": [
            [
              {
                "node": "Start generating TTS (chatterbox)",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get status of TTS generation": {
          "main": [
            [
              {
                "node": "TTS status switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "TTS status switch": {
          "main": [
            [
              {
                "node": "Setup TTS file_id",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the TTS gets generated",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Start generating TTS (chatterbox)",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating captioned TTS video": {
          "main": [
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get video generation status": {
          "main": [
            [
              {
                "node": "Video generation switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video generation switch": {
          "main": [
            [
              {
                "node": "Setup media fields",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup media fields": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Combine loop items": {
          "main": [
            [
              {
                "node": "Start merging the videos",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start merging the videos": {
          "main": [
            [
              {
                "node": "Wait until the videos gets merged together",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get status of the video merge": {
          "main": [
            [
              {
                "node": "Video merge status switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video merge status switch": {
          "main": [
            [
              {
                "node": "Download example overlay",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the videos gets merged together",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the error / rate limit to go away": {
          "main": [
            [
              {
                "node": "Generate AI image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the TTS gets generated": {
          "main": [
            [
              {
                "node": "Get status of TTS generation",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating TTS (chatterbox)": {
          "main": [
            [
              {
                "node": "Wait until the TTS gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the video gets generated": {
          "main": [
            [
              {
                "node": "Get video generation status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the videos gets merged together": {
          "main": [
            [
              {
                "node": "Get status of the video merge",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup TTS file_id": {
          "main": [
            [
              {
                "node": "Start generating captioned TTS video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Create the script",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Create the script": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Configure me": {
          "main": [
            [
              {
                "node": "Setup defaults",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTTP Request": {
          "main": [
            [
              {
                "node": "Upload music?",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Server isn't ready",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set file ids to delete": {
          "main": [
            [
              {
                "node": "For each file",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "For each file": {
          "main": [
            [
              {
                "node": "Delete tmp files",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Download the video for Postiz": {
          "main": [
            [
              {
                "node": "Upload video to Postiz",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload video to Postiz": {
          "main": [
            [
              {
                "node": "Get Postiz integrations",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get Postiz integrations": {
          "main": [
            [
              {
                "node": "Merge integrations",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Merge integrations": {
          "main": [
            [
              {
                "node": "Set integration id for TikTok",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "On form submission": {
          "main": [
            [
              {
                "node": "Configure me",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Relay background music": {
          "main": [
            [
              {
                "node": "Upload background music to the server",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set background music id": {
          "main": [
            [
              {
                "node": "Upload voice sample?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Relay sample audio": {
          "main": [
            [
              {
                "node": "Upload voice sample to the server",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set sample voice id": {
          "main": [
            [
              {
                "node": "Get stories from reddit",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload overlay to the server": {
          "main": [
            [
              {
                "node": "Start adding overlay to thevideo",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Download example overlay": {
          "main": [
            [
              {
                "node": "Upload overlay to the server",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the videos gets merged together1": {
          "main": [
            [
              {
                "node": "Get status of the overlay",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start adding overlay to thevideo": {
          "main": [
            [
              {
                "node": "Wait until the videos gets merged together1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get status of the overlay": {
          "main": [
            [
              {
                "node": "Overlay status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Overlay status": {
          "main": [
            [
              {
                "node": "Download the video for Postiz",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the videos gets merged together1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload background music to the server": {
          "main": [
            [
              {
                "node": "Set background music id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload voice sample to the server": {
          "main": [
            [
              {
                "node": "Set sample voice id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup defaults": {
          "main": [
            [
              {
                "node": "HTTP Request",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set integration id for TikTok": {
          "main": [
            [
              {
                "node": "Schedule the TikTok video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Schedule the TikTok video": {
          "main": [
            [
              {
                "node": "Set file ids to delete",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get stories from reddit": {
          "main": [
            [
              {
                "node": "For each post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Code": {
          "main": [
            [
              {
                "node": "Create the script",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload voice sample?": {
          "main": [
            [
              {
                "node": "Relay sample audio",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Set sample voice id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload music?": {
          "main": [
            [
              {
                "node": "Relay background music",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Set background music id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "For each post": {
          "main": [
            [
              {
                "node": "Remove short ones",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Remove short ones": {
          "main": [
            [
              {
                "node": "Code",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "e47580c2-eda6-4996-a566-d21122aad982",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "vbVVE59RZMfezN7L",
      "tags": [
        {
          "createdAt": "2025-06-18T16:25:08.935Z",
          "updatedAt": "2025-06-18T16:25:08.935Z",
          "id": "1t0O0JsvnM933ez8",
          "name": "youtube"
        }
      ]
    }
  },
  {
    "id": "wan-text-to-video",
    "title": "Wan 2.2 Text-to-Video Launcher",
    "description": "Wraps Modal + ComfyUI endpoints to trigger Wan 2.2 video renders from text prompts and retrieve resulting clips.",
    "problem": "Creators want to experiment with Wan 2.2 without manual API calls; this workflow automates job submission and retrieval.",
    "tags": [
      "video",
      "modal",
      "comfyui",
      "wan",
      "ai"
    ],
    "workflow": {
      "name": "ComfyUI: wan 2.2 5b - text 2 video",
      "nodes": [
        {
          "parameters": {
            "formTitle": "Upload reference images",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "prompt",
                  "fieldType": "textarea",
                  "placeholder": "what should happen on the video",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Negative prompt",
                  "placeholder": "optional"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.formTrigger",
          "typeVersion": 2.2,
          "position": [
            -620,
            -60
          ],
          "id": "f7de41fc-a563-4e92-82ba-d5f3b877fa36",
          "name": "On form submission",
          "webhookId": "e0a61b98-84e7-42ab-9c8c-e5b130a8adc4"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7d55d6da-a78c-4a28-9343-0ea9035a0aa3",
                  "name": "COMFY_URL",
                  "value": "={{   ((u) => {   let s = u.trim();   if (!/^https?:\\/\\//i.test(s)) s = 'https://' + s;   const parts = s.split('/');   return parts[0] + '//' + parts[2]; })($json.comfyui_url)  }}",
                  "type": "string"
                },
                {
                  "id": "c491a696-6081-4e42-98f5-0c3b75c16edc",
                  "name": "NEGATIVE_PROMPT",
                  "value": "={{ $('On form submission').item.json['Negative prompt'] || $json.negative_prompt }}",
                  "type": "string"
                },
                {
                  "id": "e179a11b-ab0b-4772-b151-10b0b7d49a8c",
                  "name": "PROMPT",
                  "value": "={{ $('On form submission').item.json.prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -100,
            -60
          ],
          "id": "677e7deb-bf71-48b6-bea7-46b46ba6b18c",
          "name": "Setup defaults"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.COMFY_URL }}/history/{{ $('Start the workflow with ComfyUI').first().json.prompt_id }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            520,
            -60
          ],
          "id": "0fb73fc5-555b-49e1-8370-990732971fee",
          "name": "Get video generation status",
          "retryOnFail": true
        },
        {
          "parameters": {
            "amount": 10
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            320,
            -60
          ],
          "id": "ec329f92-0ca2-499b-900f-391da62266ba",
          "name": "Wait until the video gets generated",
          "webhookId": "e785aaa5-76f0-473d-bbc9-bd05b1c1565c"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "5e89df7d-4c0e-4bd4-8a84-b1e28bdb1f7e",
                  "leftValue": "={{ $json.keys().length > 0 && $json[$('Start the workflow with ComfyUI').item.json.prompt_id] && $json[$('Start the workflow with ComfyUI').item.json.prompt_id].status.completed }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                },
                {
                  "id": "354e3206-bbe3-481d-876b-255eed39f7cf",
                  "leftValue": "",
                  "rightValue": "",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            680,
            -60
          ],
          "id": "7f8edbdb-0dd2-46c7-83a2-2fce33dd7058",
          "name": "Completed?"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "9bfcdffd-8c7c-407d-b95c-83f8aa104845",
                  "leftValue": "={{ $json[$('Start the workflow with ComfyUI').item.json.prompt_id].status.status_str === 'success' }}",
                  "rightValue": "",
                  "operator": {
                    "type": "boolean",
                    "operation": "true",
                    "singleValue": true
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            980,
            -80
          ],
          "id": "14c2f182-2eee-4420-86dd-f2d7244db30d",
          "name": "Success?"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.COMFY_URL }}/view",
            "sendQuery": true,
            "queryParameters": {
              "parameters": [
                {
                  "name": "type",
                  "value": "output"
                },
                {
                  "name": "filename",
                  "value": "={{ $('Get video generation status').last().json[$('Start the workflow with ComfyUI').item.json.prompt_id].outputs.values().map(item => item.images).flat(Infinity).find(item => item.type === 'output').filename }}"
                },
                {
                  "name": "subfolder",
                  "value": "={{ $('Get video generation status').last().json[$('Start the workflow with ComfyUI').item.json.prompt_id].outputs['58'].images[0].subfolder }}"
                }
              ]
            },
            "sendBody": true,
            "contentType": "form-urlencoded",
            "bodyParameters": {
              "parameters": [
                {}
              ]
            },
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1260,
            -240
          ],
          "id": "f5d3ffcf-e9b2-4417-a489-ecdf46be67f6",
          "name": "HTTP Request"
        },
        {
          "parameters": {
            "errorMessage": "An error occoured while generating the image"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            1280,
            80
          ],
          "id": "42b6898a-7150-4c4e-9098-fc96865f1dc6",
          "name": "Stop and Error"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "1ece166a-0536-4c3e-bf1f-e0d4ff300169",
                  "name": "workflow",
                  "value": "={\n  \"3\": {\n    \"inputs\": {\n      \"seed\": {{ (() => {\n  const max = 0xFFFFFFFF - 1;\n  const seed = Math.floor(Math.random() * max) + 1;\n  return seed;\n})() }},\n      \"steps\": 20,\n      \"cfg\": 5,\n      \"sampler_name\": \"uni_pc\",\n      \"scheduler\": \"simple\",\n      \"denoise\": 1,\n      \"model\": [\n        \"48\",\n        0\n      ],\n      \"positive\": [\n        \"6\",\n        0\n      ],\n      \"negative\": [\n        \"7\",\n        0\n      ],\n      \"latent_image\": [\n        \"55\",\n        0\n      ]\n    },\n    \"class_type\": \"KSampler\",\n    \"_meta\": {\n      \"title\": \"KSampler\"\n    }\n  },\n  \"6\": {\n    \"inputs\": {\n      \"text\": \"${PROMPT}\",\n      \"clip\": [\n        \"38\",\n        0\n      ]\n    },\n    \"class_type\": \"CLIPTextEncode\",\n    \"_meta\": {\n      \"title\": \"CLIP Text Encode (Positive Prompt)\"\n    }\n  },\n  \"7\": {\n    \"inputs\": {\n      \"text\": \"${NEGATIVE_PROMPT}\",\n      \"clip\": [\n        \"38\",\n        0\n      ]\n    },\n    \"class_type\": \"CLIPTextEncode\",\n    \"_meta\": {\n      \"title\": \"CLIP Text Encode (Negative Prompt)\"\n    }\n  },\n  \"8\": {\n    \"inputs\": {\n      \"samples\": [\n        \"3\",\n        0\n      ],\n      \"vae\": [\n        \"39\",\n        0\n      ]\n    },\n    \"class_type\": \"VAEDecode\",\n    \"_meta\": {\n      \"title\": \"VAE Decode\"\n    }\n  },\n  \"37\": {\n    \"inputs\": {\n      \"unet_name\": \"wan2.2_ti2v_5B_fp16.safetensors\",\n      \"weight_dtype\": \"default\"\n    },\n    \"class_type\": \"UNETLoader\",\n    \"_meta\": {\n      \"title\": \"Load Diffusion Model\"\n    }\n  },\n  \"38\": {\n    \"inputs\": {\n      \"clip_name\": \"umt5_xxl_fp8_e4m3fn_scaled.safetensors\",\n      \"type\": \"wan\",\n      \"device\": \"default\"\n    },\n    \"class_type\": \"CLIPLoader\",\n    \"_meta\": {\n      \"title\": \"Load CLIP\"\n    }\n  },\n  \"39\": {\n    \"inputs\": {\n      \"vae_name\": \"wan2.2_vae.safetensors\"\n    },\n    \"class_type\": \"VAELoader\",\n    \"_meta\": {\n      \"title\": \"Load VAE\"\n    }\n  },\n  \"48\": {\n    \"inputs\": {\n      \"shift\": 8,\n      \"model\": [\n        \"37\",\n        0\n      ]\n    },\n    \"class_type\": \"ModelSamplingSD3\",\n    \"_meta\": {\n      \"title\": \"ModelSamplingSD3\"\n    }\n  },\n  \"55\": {\n    \"inputs\": {\n      \"width\": 1280,\n      \"height\": 704,\n      \"length\": 121,\n      \"batch_size\": 1,\n      \"vae\": [\n        \"39\",\n        0\n      ]\n    },\n    \"class_type\": \"Wan22ImageToVideoLatent\",\n    \"_meta\": {\n      \"title\": \"Wan22ImageToVideoLatent\"\n    }\n  },\n  \"57\": {\n    \"inputs\": {\n      \"fps\": 24,\n      \"images\": [\n        \"8\",\n        0\n      ]\n    },\n    \"class_type\": \"CreateVideo\",\n    \"_meta\": {\n      \"title\": \"Create Video\"\n    }\n  },\n  \"58\": {\n    \"inputs\": {\n      \"filename_prefix\": \"video/ComfyUI\",\n      \"format\": \"auto\",\n      \"codec\": \"auto\",\n      \"video-preview\": \"\",\n      \"video\": [\n        \"57\",\n        0\n      ]\n    },\n    \"class_type\": \"SaveVideo\",\n    \"_meta\": {\n      \"title\": \"Save Video\"\n    }\n  }\n}",
                  "type": "string"
                },
                {
                  "id": "92df0709-c03c-400e-b2ac-1a8e3aff7416",
                  "name": "comfyui_url",
                  "value": "YOUR_COMFYUI_URL",
                  "type": "string"
                },
                {
                  "id": "fb621130-6eac-41ab-b514-576a0275f6b1",
                  "name": "negative_prompt",
                  "value": "è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£Žæ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½Žè´¨é‡ï¼ŒJPEGåŽ‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èžåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -380,
            -60
          ],
          "id": "1f08ab0e-14b2-4ed9-a83a-722a1f9b0ea4",
          "name": "Configuration"
        },
        {
          "parameters": {
            "content": "# Configure me",
            "height": 420,
            "width": 260,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -460,
            -280
          ],
          "id": "2c275d22-12c7-420f-b172-920b69ab1288",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.COMFY_URL }}/prompt",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n  \"client_id\": \"n8n\",\n  \"prompt\": {{ \n\n    $('Configuration').item.json.workflow\n      .replace('${PROMPT}', $('Setup defaults').first().json.PROMPT)\n      .replace('${NEGATIVE_PROMPT}', $('Setup defaults').first().json.NEGATIVE_PROMPT) \n\n}}\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            60,
            -60
          ],
          "id": "a3d6ad94-891f-4e4d-861b-543a424f45d9",
          "name": "Start the workflow with ComfyUI"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Get premium variations of this workflow!\n\n## Be part of a growing community and help us create more content like this",
            "height": 300,
            "width": 700,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -460,
            -620
          ],
          "id": "2eb38610-f368-4a22-ae45-bf140231693a",
          "name": "Sticky Note16"
        }
      ],
      "pinData": {},
      "connections": {
        "On form submission": {
          "main": [
            [
              {
                "node": "Configuration",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup defaults": {
          "main": [
            [
              {
                "node": "Start the workflow with ComfyUI",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get video generation status": {
          "main": [
            [
              {
                "node": "Completed?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the video gets generated": {
          "main": [
            [
              {
                "node": "Get video generation status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Completed?": {
          "main": [
            [
              {
                "node": "Success?",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Success?": {
          "main": [
            [
              {
                "node": "HTTP Request",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Stop and Error",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Configuration": {
          "main": [
            [
              {
                "node": "Setup defaults",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start the workflow with ComfyUI": {
          "main": [
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "3d16e9b0-95ad-4ab5-8806-4465fea2e17e",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "DuIW59NyIFVGq0C4",
      "tags": []
    }
  },
  {
    "id": "sleep-music-longform",
    "title": "Sleep Music Long-form Creator",
    "description": "Combines GPT-5 scripts, ElevenLabs music, seed scenes, and editing logic to output hour-long sleep tracks ready for YouTube.",
    "problem": "Sleep-music channels struggle to produce long videos daily; this flow automates narration, visuals, and audio blending.",
    "tags": [
      "sleep",
      "music",
      "youtube",
      "ai",
      "longform"
    ],
    "workflow": {
      "name": "Episode 22: sleep",
      "nodes": [
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7bbb518a-c4f1-49a5-9e72-3e9d939b131b",
                  "name": "AI_AGENTS_NO_CODE_TOOLS_URL",
                  "value": "http://localhost:8000",
                  "type": "string"
                },
                {
                  "id": "526ec84c-8c10-4e62-b5dd-9c7ce17e5c11",
                  "name": "DURATION_IN_MINUTES",
                  "value": 10,
                  "type": "number"
                },
                {
                  "id": "be15f2fa-ce57-4843-b283-bdfc397967aa",
                  "name": "CONCEPT_PROMPT",
                  "value": "=<Instructions>\nCreate one concept for a new sleep video on youtube.\nMy main theme is cute animals and characters in 3d style.\nThe length of the video is going to be 3 hours long, and it will be one looped video and a generated, classical music lullaby.\nFor the visual, make sure to create something where looping makes sense: small, gentle movements, that looks great when it's on repeat.\n</Instructions>\n<Examples>\n\t<Example>\n\t\t<Title>\n          Brahms Lullaby For Babies To Go To Sleep Make Bedtime Super Easy Good Night And Sweet Dreams\n    </Title>\n\t\t<Visual>\n      This whimsical and serene image is a screenshot from a YouTube sleep video, designed to be calming and help viewers relax.\n      The scene features two adorable, fluffy kittens with large, expressive eyes. One kitten is a soft pink, while the other is a gentle baby blue. They are set against a dreamy night sky filled with soft, purple and blue clouds, twinkling stars, and a crescent moon.\n      Adding to the magical atmosphere are glowing, heart-shaped bubbles floating in the air and the silhouette of a fairytale-like castle in the distance. The overall art style is very soft and cute, typical of content created to aid with sleep and relaxation.\n    </Visual>\n\t</Example>\n\t<Example>\n\t\t<Title>\n          Soft Music for Sleep and Relaxing â€¢ Listening For 3 Minutes, Fall Into Deep Sleep â€¢ Remove Insomnia\n    </Title>\n\t\t<Visual>\n      This charming and heartwarming image, likely from a YouTube sleep video, captures a moment of pure sweetness and comfort.\n      At the center of the composition is an irresistibly cute, fluffy white bunny with large, expressive dark eyes. The tiny creature is depicted nibbling on a large bar of milk chocolate, holding it with its small paws.\n      The enchanting scene is further enhanced by an array of delectable chocolates scattered around the bunny, including truffles and other candy pieces. A warm, gentle glow emanates from a lit candle in the soft-focused background, casting a serene and cozy ambiance over the entire setting. Adding to the whimsical atmosphere, a cup or holder decorated with bunny ears can be seen in the background. The overall color palette is a soothing blend of warm browns, soft pinks, and creamy whites, creating a visually relaxing and dreamy experience perfect for a sleep video.\n    </Visual>\n\t</Example>\n</Examples>",
                  "type": "string"
                },
                {
                  "id": "65e843d3-1444-4a19-b5b1-8328a50ee4a2",
                  "name": "CREATE_PROMPTS_PROMPT",
                  "value": "=<Instructions>\nI'm creating a sleep video on youtube for the concept below. Help me to create the following materials:\n\n1. Image prompt\n\nCreate a prompt for a nice visual, suitable for children and very cute.\n\n2. Video prompt\n\nMake sure the generated, 12s video can be easily looped, and the loops make sense. Make sure to include in the prompt, that things should not move in straight line, for example clouds should be still, a car shouldn't cross into the picture.\n\n3. Music prompt\n\nCreate a prompt for a classical lullaby.\nInclude in the prompt: the music should be fully instrumental and designed for looping with no distinct intro or outro, just a continous main theme.\nThe music should be 60bpm at most.\n</Instructions>\n<Concept>\n{CONCEPT}\n</Concept>",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1232,
            -1248
          ],
          "id": "9fcd12dc-851b-4373-b67f-42cbb20dfd5c",
          "name": "Configure me"
        },
        {
          "parameters": {
            "content": "# Configure me âš ï¸\n",
            "height": 560,
            "width": 204,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1280,
            -1488
          ],
          "id": "67bd461f-02b1-4294-934a-c55f07d9fcdf",
          "name": "Sticky Note12"
        },
        {
          "parameters": {
            "url": "={{ $json.AI_AGENTS_NO_CODE_TOOLS_URL }}/health",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -784,
            -1328
          ],
          "id": "cec7633f-9045-49fe-a021-ef6c1ddb09ee",
          "name": "HTTP Request",
          "onError": "continueErrorOutput"
        },
        {
          "parameters": {
            "errorMessage": "The server is not running or isn't configured"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            -784,
            -1104
          ],
          "id": "c219e229-8aa3-4ecc-8edc-1de577dac86e",
          "name": "Server isn't ready"
        },
        {
          "parameters": {
            "content": "# Test connection \ndon't delete/touch this",
            "height": 560,
            "width": 420,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1024,
            -1488
          ],
          "id": "c064a991-bf2c-4ea8-a93f-49be19647270",
          "name": "Sticky Note15"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7d55d6da-a78c-4a28-9343-0ea9035a0aa3",
                  "name": "AI_AGENTS_NO_CODE_TOOLS_URL",
                  "value": "={{   ((u) => {   let s = u.trim();   if (!/^https?:\\/\\//i.test(s)) s = 'https://' + s;   const parts = s.split('/');   return parts[0] + '//' + parts[2]; })($json.AI_AGENTS_NO_CODE_TOOLS_URL)  }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -992,
            -1248
          ],
          "id": "15fc5886-e896-4c2e-8d20-c6f8f17a89f9",
          "name": "Setup defaults"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start creating the sleep video').item.json.file_id }}/status",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            2016,
            -1248
          ],
          "id": "ff0799fb-9f2c-40d8-9041-02379f0f0bdb",
          "name": "Get video generation status",
          "retryOnFail": true
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "ready",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "91402596-3978-4dfc-91b7-9ffe3521b862"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "ready"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0c29765e-4213-434c-9bf3-c5e854dd6ee8",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "processing",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "processing"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "4a6cfd86-e690-417e-aa6d-ae497e1177ae",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "not_found",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "failed"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            2208,
            -1248
          ],
          "id": "f6fb0b91-b714-4f87-9e28-fdb99f0375db",
          "name": "Video generation switch"
        },
        {
          "parameters": {
            "amount": 10
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            1824,
            -1248
          ],
          "id": "aa4c3483-e180-4eee-9656-2c86c3a0a556",
          "name": "Wait until the video gets generated",
          "webhookId": "79a98417-9547-42a4-ae3a-5ba656396d41"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/video-tools/long-form-ambient",
            "sendBody": true,
            "contentType": "form-urlencoded",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "video_id",
                  "value": "={{ $json.video_id }}"
                },
                {
                  "name": "audio_id",
                  "value": "={{ $json.music_id }}"
                },
                {
                  "name": "duration_minutes",
                  "value": "={{ $('Configure me').item.json.DURATION_IN_MINUTES }}"
                }
              ]
            },
            "options": {
              "redirect": {
                "redirect": {}
              }
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1632,
            -1248
          ],
          "id": "de9aebb6-8c9f-48be-979a-6117d287c584",
          "name": "Start creating the sleep video"
        },
        {
          "parameters": {
            "errorMessage": "Something happened while generating the video - contact Miri!"
          },
          "type": "n8n-nodes-base.stopAndError",
          "typeVersion": 1,
          "position": [
            2416,
            -1104
          ],
          "id": "7d0e3a58-39a2-4e77-9e49-1ae75fab7d29",
          "name": "Stop and Error"
        },
        {
          "parameters": {
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage/{{ $('Start creating the sleep video').item.json.file_id }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            2656,
            -1264
          ],
          "id": "8f5111ba-45e5-4e40-8a4d-89ded8a0b113",
          "name": "Download the video"
        },
        {
          "parameters": {
            "content": "# Generate the final video",
            "height": 560,
            "width": 1216,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1344,
            -1472
          ],
          "id": "0ee96c73-818c-4666-a09e-b917a1c3f226",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "content": "# Done",
            "height": 560,
            "width": 208,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            2608,
            -1472
          ],
          "id": "6ecd54b4-72a2-4939-ba68-63e5a5f0026f",
          "name": "Sticky Note1"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.manualTrigger",
          "typeVersion": 1,
          "position": [
            -1456,
            -1248
          ],
          "id": "8b13f87e-e5b2-4160-8929-5bea41bb0bf3",
          "name": "When clicking â€˜Execute workflowâ€™"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            288,
            -1632
          ],
          "id": "5c13e90d-f358-4396-a215-9974e15a2d4a",
          "name": "Wait for seed image",
          "webhookId": "e8d6e2f8-2c00-4b80-a18c-3693765b6976"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            736,
            -1632
          ],
          "id": "42afdec9-0c2f-49cc-adb4-58a1532e6208",
          "name": "Seed image status"
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate seed image').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1152,
            -1568
          ],
          "id": "cb0498d4-7347-4319-a71b-e6e426ae9adc",
          "name": "Get the seed image",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "mode": "combine",
            "combineBy": "combineByPosition",
            "options": {}
          },
          "type": "n8n-nodes-base.merge",
          "typeVersion": 3.2,
          "position": [
            1440,
            -1248
          ],
          "id": "2bdd317b-193b-41b8-887e-66f80e3d3f07",
          "name": "Merge1"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            512,
            -1264
          ],
          "id": "1367f84f-9c3f-4cbd-8d86-79a5a7c15dbc",
          "name": "Looping video status"
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Start generating the looping video').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            752,
            -1232
          ],
          "id": "251bb482-f2b9-45d5-ba99-9ae1bd3c1a29",
          "name": "Get the looping video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "name": "media_type",
                  "value": "video"
                },
                {
                  "name": "url",
                  "value": "={{ $json.video.url }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            960,
            -1232
          ],
          "id": "d49e97e5-a5e8-458c-9413-897eef2c7616",
          "name": "Upload the looping video to the server"
        },
        {
          "parameters": {
            "jsCode": "for (const item of $input.all()) {\n  const output = item.json.output.find(item => item.type === 'message');\n  if (output.status !== 'completed') {\n    throw new Error('OpenAI call failed');\n  }\n  const textContent = output?.content?.[0].text;\n  if (!textContent) {\n    throw new Error('No content received from OpenAI');\n  }\n\n  \n  item.json = {\n    output: JSON.parse(textContent)\n  }\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -304,
            -1376
          ],
          "id": "a476eb1e-b117-4bc8-a807-0f810bb6dac9",
          "name": "Parse concept"
        },
        {
          "parameters": {
            "jsCode": "for (const item of $input.all()) {\n  const output = item.json.output.find(item => item.type === 'message');\n  if (output.status !== 'completed') {\n    throw new Error('OpenAI call failed');\n  }\n  const textContent = output?.content?.[0].text;\n  if (!textContent) {\n    throw new Error('No content received from OpenAI');\n  }\n\n  \n  item.json = {\n    output: JSON.parse(textContent)\n  }\n}\n\nreturn $input.all();"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -304,
            -1136
          ],
          "id": "53b7d756-e55f-4b22-8dfe-f5b5f7b6b6f7",
          "name": "Parse prompts"
        },
        {
          "parameters": {
            "content": "# Create script",
            "height": 560,
            "width": 420,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -560,
            -1488
          ],
          "id": "cc5e7f67-688f-46c3-a66a-c156a1cd225f",
          "name": "Sticky Note16"
        },
        {
          "parameters": {
            "content": "# Generate music",
            "height": 288,
            "width": 1396,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -96,
            -992
          ],
          "id": "5dd92973-4465-4dbc-97c0-946078d1a62f",
          "name": "Sticky Note18"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "={{ $('Setup defaults').first().json.AI_AGENTS_NO_CODE_TOOLS_URL }}/api/v1/media/storage",
            "sendBody": true,
            "contentType": "multipart-form-data",
            "bodyParameters": {
              "parameters": [
                {
                  "parameterType": "formBinaryData",
                  "name": "file",
                  "inputDataFieldName": "=data"
                },
                {
                  "name": "media_type",
                  "value": "audio"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            416,
            -896
          ],
          "id": "5fe03bb6-6685-4374-a538-eb6687b7a5c1",
          "name": "Upload music to the server"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "09899c0c-4e96-40f6-9038-718fb42d4ed4",
                  "name": "music_id",
                  "value": "={{ $json.file_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            640,
            -896
          ],
          "id": "e8b9772f-e15e-4abf-827e-c00698f9843c",
          "name": "Map music file_id"
        },
        {
          "parameters": {
            "content": "# Generate seed image",
            "height": 288,
            "width": 1396,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -96,
            -1680
          ],
          "id": "f69a4b15-3bba-4cec-bdb0-dddfccb16f7d",
          "name": "Sticky Note19"
        },
        {
          "parameters": {
            "content": "# Generate looping video",
            "height": 320,
            "width": 1396,
            "color": 7
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -96,
            -1344
          ],
          "id": "3f4ff8fd-c845-4312-9de4-7d7830d0b57f",
          "name": "Sticky Note20"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            160,
            -1264
          ],
          "id": "cc21467b-6867-4cbc-bdad-92f60ff02b6e",
          "name": "Wait for the looping video",
          "webhookId": "e8d6e2f8-2c00-4b80-a18c-3693765b6976"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "09899c0c-4e96-40f6-9038-718fb42d4ed4",
                  "name": "video_id",
                  "value": "={{ $json.file_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1152,
            -1232
          ],
          "id": "87773962-0810-4b34-900d-7f799a92bf44",
          "name": "Map the loopin video file_id"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://api.openai.com/v1/responses",
            "authentication": "predefinedCredentialType",
            "nodeCredentialType": "openAiApi",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n   \"model\":\"gpt-5\",\n   \"input\": {{ JSON.stringify($('Configure me').item.json.CONCEPT_PROMPT) }},\n   \"reasoning\":{\n      \"effort\":\"minimal\",\n      \"summary\":\"auto\"\n   },\n   \"text\":{\n      \"format\": {\n        \"type\": \"json_schema\",\n        \"name\": \"video_concept\",\n        \"schema\": {\n           \"type\":\"object\",\n           \"properties\":{\n              \"title\":{\n                 \"type\":\"string\",\n                 \"description\":\"the title of the video idea\"\n              },\n              \"visual\":{\n                 \"type\":\"string\",\n                 \"description\":\"the visual characteristics of the video\"\n              }\n           },\n           \"required\":[\n              \"title\",\n              \"visual\"\n           ],\n           \"additionalProperties\": false\n        }\n      },\n      \"verbosity\":\"high\"\n   },\n   \"stream\":false,\n   \"store\":false\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -480,
            -1376
          ],
          "id": "4cbefd90-22b3-4485-ab92-4799f3b1eb6c",
          "name": "âš ï¸ Create concept",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://api.openai.com/v1/responses",
            "authentication": "predefinedCredentialType",
            "nodeCredentialType": "openAiApi",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n   \"model\":\"gpt-5\",\n   \"input\": {{ JSON.stringify($('Configure me').item.json.CREATE_PROMPTS_PROMPT.replace('{CONCEPT}', `\n  ${$json.output.title}\n\n  ${$json.output.visual}\n`)) }},\n   \"reasoning\":{\n      \"effort\":\"low\",\n      \"summary\":\"auto\"\n   },\n   \"text\":{\n      \"format\": {\n        \"type\": \"json_schema\",\n        \"name\": \"video_concept\",\n        \"schema\": {\n           \"type\":\"object\",\n           \"properties\": {\n                \"music_prompt\": {\n                    \"type\": \"string\",\n                    \"description\": \"the music prompt for music generation\"\n                },\n                \"image_prompt\": {\n                    \"type\": \"string\",\n                    \"description\": \"the image prompt to generate the seed image for the video generation\"\n                },\n                \"video_prompt\": {\n                    \"type\": \"string\",\n                    \"description\": \"the video prompt to generate the looping video\"\n                }\n            },\n            \"required\": [\n                \"music_prompt\",\n                \"image_prompt\",\n                \"video_prompt\"\n            ],\n           \"additionalProperties\": false\n        }\n      },\n      \"verbosity\":\"high\"\n   },\n   \"stream\":false,\n   \"store\":false\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -480,
            -1136
          ],
          "id": "c0ce5aee-687a-4d04-84de-5369092110b1",
          "name": "âš ï¸ Create prompts",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## 1. Add your server URL to the `Configure me` node and setup the desired video length\n## Next, add credentials to the nodes marked with the âš ï¸ emoji\n## 2. Setup your OpenAI credentials in the `Create concept` and `Create prompts` nodes\n## 3. Setup your Fal.ai credentials in the `Generate seed image`, `Get status of the seed image`, `Start generating the looping video` and the `Get status of the looping video` nodes\n## 4. Setup your ElevenLabs credentials in the `Create music plan` and `Generate music` nodes",
            "height": 372,
            "width": 1220,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1344,
            -1888
          ],
          "id": "fae2fe17-b1d5-4e1b-8026-16c1890b7eed",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for more sleep video automations, support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Be part of a growing community and help us create more content like this\n\n## And get access to our premium workflows and our hosted servers",
            "height": 372,
            "width": 1132,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1280,
            -1904
          ],
          "id": "08b489d0-7d2b-4c4d-9cc0-4adaeb0c500f",
          "name": "Sticky Note17"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://api.elevenlabs.io/v1/music/plan",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "prompt",
                  "value": "={{ $json.output.music_prompt.slice(0, 2000) }}"
                },
                {
                  "name": "music_length_ms",
                  "value": "240000"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -32,
            -896
          ],
          "id": "3776c249-f21d-4c65-bc75-1f7b0cf93207",
          "name": "âš ï¸ Create music plan",
          "credentials": {
            "httpHeaderAuth": {
              "id": "lTjJlaw5BpPoTt5b",
              "name": "ElevenLabs full key"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://api.elevenlabs.io/v1/music",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={\n  \"composition_plan\": {\n    \"positive_global_styles\": {{ JSON.stringify($json.positive_global_styles) }},\n    \"negative_global_styles\": {{ JSON.stringify($json.negative_global_styles) }},\n    \"sections\": {{ JSON.stringify($json.sections) }}\n  },\n  \"model_id\": \"music_v1\"\n}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            192,
            -896
          ],
          "id": "32477f71-bddd-4857-8d04-87ee63c8881e",
          "name": "âš ï¸ Generate music",
          "credentials": {
            "httpHeaderAuth": {
              "id": "lTjJlaw5BpPoTt5b",
              "name": "ElevenLabs full key"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/imagen4/preview",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "prompt",
                  "value": "={{ $json.output.image_prompt }}"
                },
                {
                  "name": "aspect_ratio",
                  "value": "=16:9"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -32,
            -1600
          ],
          "id": "553b49c6-994e-44ee-9a28-68abdaa3c988",
          "name": "âš ï¸ Generate seed image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate seed image').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            496,
            -1632
          ],
          "id": "1898d50b-f74c-43b5-ac26-f27a51d08a70",
          "name": "âš ï¸ Get status of the seed image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/bytedance/seedance/v1/lite/image-to-video",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "prompt",
                  "value": "={{ $('Parse prompts').item.json.output.video_prompt }}"
                },
                {
                  "name": "resolution",
                  "value": "=480p"
                },
                {
                  "name": "duration",
                  "value": "12"
                },
                {
                  "name": "camera_fixed",
                  "value": "true"
                },
                {
                  "name": "image_url",
                  "value": "={{ $json.images?.[0].url }}"
                },
                {
                  "name": "end_image_url",
                  "value": "={{ $json.images?.[0].url }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -48,
            -1248
          ],
          "id": "7314f71f-b41d-49e1-84e5-1ac859410e31",
          "name": "âš ï¸ Start generating the looping video",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Start generating the looping video').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            336,
            -1264
          ],
          "id": "435d3488-b390-4294-82a4-8f098671d0ea",
          "name": "âš ï¸ Get the status of the looping video",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        }
      ],
      "pinData": {},
      "connections": {
        "Configure me": {
          "main": [
            [
              {
                "node": "Setup defaults",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "HTTP Request": {
          "main": [
            [
              {
                "node": "âš ï¸ Create concept",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Server isn't ready",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup defaults": {
          "main": [
            [
              {
                "node": "HTTP Request",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get video generation status": {
          "main": [
            [
              {
                "node": "Video generation switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video generation switch": {
          "main": [
            [
              {
                "node": "Download the video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Stop and Error",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait until the video gets generated": {
          "main": [
            [
              {
                "node": "Get video generation status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start creating the sleep video": {
          "main": [
            [
              {
                "node": "Wait until the video gets generated",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "When clicking â€˜Execute workflowâ€™": {
          "main": [
            [
              {
                "node": "Configure me",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for seed image": {
          "main": [
            [
              {
                "node": "âš ï¸ Get status of the seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Seed image status": {
          "main": [
            [
              {
                "node": "Get the seed image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the seed image": {
          "main": [
            [
              {
                "node": "âš ï¸ Start generating the looping video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Looping video status": {
          "main": [
            [
              {
                "node": "Get the looping video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the looping video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the looping video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the looping video": {
          "main": [
            [
              {
                "node": "Upload the looping video to the server",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Merge1": {
          "main": [
            [
              {
                "node": "Start creating the sleep video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload the looping video to the server": {
          "main": [
            [
              {
                "node": "Map the loopin video file_id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Parse concept": {
          "main": [
            [
              {
                "node": "âš ï¸ Create prompts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Parse prompts": {
          "main": [
            [
              {
                "node": "âš ï¸ Generate seed image",
                "type": "main",
                "index": 0
              },
              {
                "node": "âš ï¸ Create music plan",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload music to the server": {
          "main": [
            [
              {
                "node": "Map music file_id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Map music file_id": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 1
              }
            ]
          ]
        },
        "Wait for the looping video": {
          "main": [
            [
              {
                "node": "âš ï¸ Get the status of the looping video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Map the loopin video file_id": {
          "main": [
            [
              {
                "node": "Merge1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Create concept": {
          "main": [
            [
              {
                "node": "Parse concept",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Create prompts": {
          "main": [
            [
              {
                "node": "Parse prompts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Create music plan": {
          "main": [
            [
              {
                "node": "âš ï¸ Generate music",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Generate music": {
          "main": [
            [
              {
                "node": "Upload music to the server",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Generate seed image": {
          "main": [
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Get status of the seed image": {
          "main": [
            [
              {
                "node": "Seed image status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Start generating the looping video": {
          "main": [
            [
              {
                "node": "Wait for the looping video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Get the status of the looping video": {
          "main": [
            [
              {
                "node": "Looping video status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "3e38ef47-0881-4595-a985-fef63d18b979",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "1PYCKdNE20TuTQHn",
      "tags": []
    }
  },
  {
    "id": "ugc-nanobanana",
    "title": "UGC Ads with Nanobanana",
    "description": "Generates UGC-style ad scenes using Google nanobanana, ElevenLabs, and Seedance, then stitches them into paid media assets.",
    "problem": "Brands need UGC ads fast but real creator shoots are expensive; this agent fabricates them programmatically.",
    "tags": [
      "ugc",
      "ads",
      "nanobanana",
      "seedance",
      "marketing"
    ],
    "workflow": {
      "name": "Episode 23: UGC with nanobanana",
      "nodes": [
        {
          "parameters": {
            "model": {
              "__rl": true,
              "value": "gpt-5",
              "mode": "list",
              "cachedResultName": "gpt-5"
            },
            "options": {
              "responseFormat": "json_object"
            }
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            -1312,
            -912
          ],
          "id": "4dded72c-e430-460f-bbaf-3d0bb501a3bd",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "model": "qwen3:32b",
            "options": {
              "numCtx": 16048
            }
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
          "typeVersion": 1,
          "position": [
            -1760,
            -912
          ],
          "id": "0f677115-006c-4ee2-9f99-1ae3e8f748bc",
          "name": "Ollama Chat Model",
          "credentials": {
            "ollamaApi": {
              "id": "cWXUsJ0LsqnzOEx0",
              "name": "Ollama account"
            }
          }
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
          "typeVersion": 1,
          "position": [
            -1440,
            -912
          ],
          "id": "a4557cc7-f684-4eb1-aa5f-8d2ed81cfb15",
          "name": "DeepSeek Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": "tngtech/deepseek-r1t-chimera:free",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
          "typeVersion": 1,
          "position": [
            -1312,
            -576
          ],
          "id": "ac496073-7092-43fe-ac65-1b6eb08c57eb",
          "name": "OpenRouter Chat Model",
          "credentials": {
            "openRouterApi": {
              "id": "pKxg2Rhtt3cG3h19",
              "name": "OpenRouter account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "typeVersion": 1,
          "position": [
            -1760,
            -576
          ],
          "id": "04db5d3d-64f0-485f-8c1f-012b736f8eae",
          "name": "Google Gemini Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
          "typeVersion": 1,
          "position": [
            -1760,
            -752
          ],
          "id": "1ad3b054-3f84-4e7b-aafe-55575d19b17d",
          "name": "Azure OpenAI Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -1600,
            -752
          ],
          "id": "e1d60af5-4a6f-4f25-b813-e729ffe15ac7",
          "name": "xAI Grok Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "claude-sonnet-4-20250514",
              "cachedResultName": "Claude 4 Sonnet"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
          "typeVersion": 1.3,
          "position": [
            -1440,
            -752
          ],
          "id": "8f2b1a75-190c-4ee3-8962-f9d817aa0116",
          "name": "Anthropic Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -1312,
            -752
          ],
          "id": "1aec8db8-bd6d-42fa-92a1-268afdfc31ce",
          "name": "xAI Grok Chat Model1",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "typeVersion": 1,
          "position": [
            -1440,
            -576
          ],
          "id": "46e7a7a2-6725-4148-a172-2a367716c2c7",
          "name": "Groq Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
          "typeVersion": 1,
          "position": [
            -1600,
            -912
          ],
          "id": "e52e65c0-5156-4d3e-a268-107d4cf41a35",
          "name": "AWS Bedrock Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
          "typeVersion": 1,
          "position": [
            -1600,
            -576
          ],
          "id": "a75c5985-3992-4125-9964-e0c16ce5bb9d",
          "name": "Mistral Cloud Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Pick your choice of LLM âš ï¸\nâš ï¸ Make sure to deactive/delete the rest of the LLMs after selecting one",
            "height": 680,
            "width": 700,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1840,
            -1056
          ],
          "id": "8e0d21de-d9e4-4e41-96ba-09f48d9d3154",
          "name": "Sticky Note7"
        },
        {
          "parameters": {
            "formTitle": "Create a UGC-like video for a product",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Details of the product",
                  "fieldType": "textarea",
                  "placeholder": "name, description, etc.",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Product image",
                  "fieldType": "file",
                  "multipleFiles": false,
                  "acceptFileTypes": ".jpg,.jpeg,.png,.webp",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Instructions for the video",
                  "fieldType": "textarea"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.formTrigger",
          "typeVersion": 2.2,
          "position": [
            -1232,
            -1664
          ],
          "id": "040d2bdc-dcce-4a30-94d5-b574db086243",
          "name": "On form submission",
          "webhookId": "fe600a73-6a8b-4137-81c0-8f78a689d891"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "bcbc506b-434c-4738-9a63-dd38efcace4f",
                  "name": "voice",
                  "value": "={{ $('Create main scene').item.json.output.sex  === \"female\" ? \"Sarah\" : \"Roger\" }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -608,
            640
          ],
          "id": "aefbfe77-9ab8-4f25-a6b1-6b9fd0c82d73",
          "name": "Set the voice based on sex"
        },
        {
          "parameters": {
            "content": "# ðŸŽ‰ Here's the generated video",
            "height": 916,
            "width": 400,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            1696,
            512
          ],
          "id": "0b316ec3-b456-436f-94e0-be4bad9c11ec",
          "name": "Sticky Note6"
        },
        {
          "parameters": {
            "url": "={{ $json.video.url }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1792,
            944
          ],
          "id": "a866da3e-1548-46ce-93c3-3dec5129fcda",
          "name": "Download the video"
        },
        {
          "parameters": {
            "content": "# 7. Generate lipsync",
            "height": 916,
            "width": 804
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            832,
            512
          ],
          "id": "1fb8c08f-11ae-4ad2-8449-e96c3f51190b",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the lipsync').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1472,
            912
          ],
          "id": "bd196ffa-29bd-46e7-97d1-f2e35d468210",
          "name": "Get the lipsync video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            1312,
            1200
          ],
          "id": "c5cca6db-c171-49b4-a906-72db309434b8",
          "name": "Lipsync status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the lipsync').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1088,
            1216
          ],
          "id": "1bcf1617-ffa5-473d-a3ec-fd4f33d6e61e",
          "name": "Get the lipsync status",
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            1088,
            928
          ],
          "id": "2c533dbf-d8c7-42b0-9242-209af23afdcd",
          "name": "Wait for the lipsync",
          "webhookId": "4f5e5279-5484-47a8-8d18-cc1dc9c5a042"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/latentsync",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "video_url",
                  "value": "={{ $json.video_url }}"
                },
                {
                  "name": "audio_url",
                  "value": "={{ $json.audio_url }}"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            1072,
            640
          ],
          "id": "2e0ca6cc-0dea-4d41-8a1c-e1a2741b4370",
          "name": "Start generating the lipsync",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the speech').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            416,
            672
          ],
          "id": "af173ccd-fbef-4b28-87e0-105a98479c93",
          "name": "Get the speech",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            144,
            624
          ],
          "id": "0ddeecf5-5c23-407f-b91a-41f5d1d17bbb",
          "name": "Speech status"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/elevenlabs/tts/eleven-v3",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "text",
                  "value": "={{ $('Create main scene').item.json.output.dialogue }}"
                },
                {
                  "name": "voice",
                  "value": "={{ $json.voice }}"
                },
                {
                  "name": "style",
                  "value": "0.5"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -448,
            640
          ],
          "id": "eb80e649-b190-4c04-9408-32962153239e",
          "name": "Start generating the speech",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the speech').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -32,
            640
          ],
          "id": "740d61b6-b6dc-4813-9779-373e29f34a59",
          "name": "Get the speech status",
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -224,
            640
          ],
          "id": "2deeb522-ceac-48c1-a8f0-e252b84a9d43",
          "name": "Wait for the speech",
          "webhookId": "76c0b34b-8a7d-44d8-8705-019ccc6c2367"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the video').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            112,
            80
          ],
          "id": "bfef97fc-8777-41f9-9022-535640d3f690",
          "name": "Get the  video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            -160,
            48
          ],
          "id": "561cce2b-0496-46bf-b90c-e55dc11b4dc7",
          "name": "Video status"
        },
        {
          "parameters": {
            "url": "={{ $('Start generating the video').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -400,
            48
          ],
          "id": "2b636c8b-444c-457d-a4d4-ace3d636a7df",
          "name": "Get the video status",
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "amount": 1
          },
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -608,
            48
          ],
          "id": "faf299bd-f329-4488-95bf-251d21acdb5c",
          "name": "Wait for the video",
          "webhookId": "7fdf42c3-fb77-4420-8e49-699ebea41e29"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/bytedance/seedance/v1/lite/image-to-video",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "bodyParameters": {
              "parameters": [
                {
                  "name": "prompt",
                  "value": "={{ $json.prompt }}"
                },
                {
                  "name": "image_url",
                  "value": "={{ $json.start_image }}"
                },
                {
                  "name": "end_image_url",
                  "value": "={{ $json.end_image ? $json.end_image : undefined }}"
                },
                {
                  "name": "resolution",
                  "value": "480p"
                },
                {
                  "name": "duration",
                  "value": "8"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -800,
            48
          ],
          "id": "a367b516-9ba0-4175-95a4-15fbed3fb7cc",
          "name": "Start generating the video",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "9136d2ce-9e89-4ee6-9a0b-bef338199bb5",
                  "name": "base64",
                  "value": "={{ $json.data }}",
                  "type": "string"
                },
                {
                  "id": "0efe7428-8ca6-44ff-a569-910c9ca3847e",
                  "name": "mime",
                  "value": "={{ $('On form submission').item.json['Product image'].mimetype }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -576,
            -1168
          ],
          "id": "6d6f57d1-c136-463e-b04f-846d71ade842",
          "name": "Set base64 data"
        },
        {
          "parameters": {
            "operation": "binaryToPropery",
            "binaryPropertyName": "Product_image",
            "options": {}
          },
          "type": "n8n-nodes-base.extractFromFile",
          "typeVersion": 1,
          "position": [
            -800,
            -1168
          ],
          "id": "8e008123-6f44-4c63-a986-b03bb8a73277",
          "name": "Convert image to base64"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "c277f1ec-44a8-49c7-8f50-37633160a722",
                  "name": "image_prompts",
                  "value": "={{ $('Create scenes').item.json.output.scenes.slice(1).map(scene => $('Create main scene').item.json.output.image_prompt + ' ' + scene.starter_image_prompt + ' The scene should be the same as the reference image.') }}",
                  "type": "array"
                },
                {
                  "id": "526dbae5-1eda-4a52-af98-99b9cbab3de6",
                  "name": "seed_image",
                  "value": "={{ $json.images[0].url }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1040,
            -768
          ],
          "id": "99d58051-211e-44bd-be82-89688bde268d",
          "name": "Edit Fields"
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "n8n-nodes-base.splitInBatches",
          "typeVersion": 3,
          "position": [
            -560,
            -768
          ],
          "id": "9845b87c-e57e-4925-9953-d06359fe45c3",
          "name": "Loop Over Items"
        },
        {
          "parameters": {
            "fieldToSplitOut": "image_prompts",
            "options": {}
          },
          "type": "n8n-nodes-base.splitOut",
          "typeVersion": 1,
          "position": [
            -816,
            -768
          ],
          "id": "1ebc95cb-ff5d-4185-97b1-bb2ce23eb4b5",
          "name": "Split Out"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=Continuous Dynamic Scene Prompt Template (Self-contained)\n\nWe have a dialogue:\n\n{{ $json.output.dialogue }}  \n\n\nThe main image is created with the following base prompt:\n\n{{ $json.output.image_prompt }}  \n\n\nEach scene will be 8s long.\nThe character is talking continuously, so:\n\nDo not stop the talk.\n\nDo not cover the mouth.\n\nNo eating, drinking, yawning, or actions that block lipsync.\n\nIf the character is holding the product, they must hold it in every scene.\n\nThe background, lighting, and environment must stay 100% identical in every scene.\nDo not change or move objects in the surroundings.\nOnly change the characterâ€™s gestures/expressions slightly.\n\nâš ï¸ Important: Each prompt must be self-contained.\n\nDo not reference \"previous scene,\" \"next scene,\" \"continuation,\" or \"earlier.\"\n\nEach scene must repeat all continuity requirements explicitly.\n\nPrompt Pairs (3 self-contained examples)\nScene 1\n\nImage prompt: Character is standing naturally, holding the product steadily, looking at the camera, mouth open mid-speech. Neutral gesture.\n\nVideo prompt: Character gently nods once while speaking, keeping the product visible and steady. Background and environment remain unchanged. The character continues talking without interruption.\n\nScene 2\n\nImage prompt: Character is still holding the product, slightly raising eyebrows, one hand lightly gesturing near the chest while mouth open mid-speech. The environment and objects remain identical.\n\nVideo prompt: Character moves hand in a small outward gesture while talking, maintaining eye contact and holding the product. The background, lighting, and all surroundings remain unchanged. The character continues talking without interruption.\n\nScene 3\n\nImage prompt: Character smiling slightly while talking, holding the product in the same position, other hand resting casually by side. The background and environment remain unchanged.\n\nVideo prompt: Character makes a subtle hand wave or small pointing motion while continuing to talk, product still visible and stable. The background, lighting, and all objects remain identical. The character continues talking without interruption.",
            "hasOutputParser": true,
            "batching": {}
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.7,
          "position": [
            -688,
            -1664
          ],
          "id": "1e58ac71-bec3-472b-ab9f-49e7b37bf032",
          "name": "Create scenes"
        },
        {
          "parameters": {
            "promptType": "define",
            "text": "=<Instructions>  \nIâ€™m creating a UGC-style ad for an ecommerce product.  \n\nYour task is to create a natural, authentic scene and dialogue:  \n\n1. **Scene setup**  \n   - Place the character in an everyday environment that matches the product naturally (e.g. in a car, at the gym, cooking at home, running at the park).  \n   - The scene should feel casual, relatable, and influencer-like.  \n   - The character should always be the focus â€” close-up, as if recorded on a phone for social media.  \n   - Make sure the product fits seamlessly into the environment, not staged or artificial.  \n\n2. **Dialogue**  \n   - Write a **casual, genuine-sounding dialogue** (max 250 characters).  \n   - Tone: conversational, natural, like a friend giving a quick recommendation.  \n   - Avoid scripted/advertisy language, keep it real and simple.  \n\n3. **Character info**  \n   - Return the **sex of the character** (so the correct TTS voice can be chosen).  \n\n4. **Special rules**  \n   - Apply the following additional instructions:  \n     {{ $json['Instructions for the video'] }}  \n\n</Instructions>  \n\n<Product>  \n{{ $json['Details of the product'] }}  \n</Product>  \n",
            "hasOutputParser": true,
            "messages": {
              "messageValues": [
                {
                  "type": "HumanMessagePromptTemplate",
                  "messageType": "imageBinary",
                  "binaryImageDataKey": "Product_image"
                }
              ]
            },
            "batching": {}
          },
          "type": "@n8n/n8n-nodes-langchain.chainLlm",
          "typeVersion": 1.7,
          "position": [
            -992,
            -1664
          ],
          "id": "ccf9faf0-7dc9-430d-b617-0edd00fb4dbb",
          "name": "Create main scene",
          "retryOnFail": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "n8n-nodes-base.splitInBatches",
          "typeVersion": 3,
          "position": [
            -1040,
            64
          ],
          "id": "dfc8989f-acfb-47c9-a4d2-3bd27c4eb8b1",
          "name": "Loop Over Items1"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            608,
            -800
          ],
          "id": "16452108-a860-452f-91dc-73e57ca8261f",
          "name": "Aggregate"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/ffmpeg-api/merge-videos",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={{ JSON.stringify({\n\n  video_urls: $json.data.map(item => item.video.url),\n  resolution: {\n    width: 1080,\n    height: 1080\n  }\n\n}, null, 2) }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -544,
            1120
          ],
          "id": "29ce8426-8b2e-44ff-a8f9-3d5c0c6195fb",
          "name": "Start merging the videos",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('Start merging the videos').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -144,
            1120
          ],
          "id": "a62292cd-714e-4031-8f69-9699c716a289",
          "name": "Get the status of the video merge",
          "alwaysOutputData": false,
          "executeOnce": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            96,
            1120
          ],
          "id": "e1b7f9ca-1c8d-4a5f-97a7-befbaf9a6be5",
          "name": "Video merge status"
        },
        {
          "parameters": {
            "url": "={{ $('Start merging the videos').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            432,
            1120
          ],
          "id": "f1b00b4b-5c1a-4c90-b94b-13c437fb0c18",
          "name": "Get the merged video",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -352,
            1120
          ],
          "id": "cf33eec4-3f5b-476c-bb65-e1d7618bd295",
          "name": "Wait for the merged video",
          "webhookId": "7fdf42c3-fb77-4420-8e49-699ebea41e29"
        },
        {
          "parameters": {
            "mode": "combine",
            "combineBy": "combineByPosition",
            "options": {}
          },
          "type": "n8n-nodes-base.merge",
          "typeVersion": 3.2,
          "position": [
            912,
            912
          ],
          "id": "ecdbeb65-dc67-4fbc-bebd-f74b3bb5c173",
          "name": "Merge"
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -48,
            -1248
          ],
          "id": "daa54bda-873e-467c-89a7-d7efc7c53258",
          "name": "Wait for seed image",
          "webhookId": "5ba253c4-2ea2-4ecc-81cc-251ca00a5058"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            400,
            -1248
          ],
          "id": "c6edca48-23cb-4f46-af0f-47dbd312119b",
          "name": "Seed image status"
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate seed image').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            816,
            -1136
          ],
          "id": "1949ec85-a03e-4005-b689-8d024897623e",
          "name": "Get the seed image",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/nano-banana/edit",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={{ JSON.stringify(\n\n  {\n    prompt: $('Create main scene').item.json.output.image_prompt + ' ' + $('Create scenes').item.json.output.scenes[0].starter_image_prompt,\n    image_urls: [\n      `data:${$json.mime};base64,${$json.base64}`\n    ]\n  }, null, 2\n\n) }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -304,
            -1232
          ],
          "id": "16608e73-8e3a-4e5c-9b1b-ebd44f69eccb",
          "name": "âš ï¸ Generate seed image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate seed image').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            160,
            -1248
          ],
          "id": "ecaf5768-29d8-40d8-8ac9-a91f31b022b9",
          "name": "âš ï¸ Get status of the seed image",
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "content": "# 1. Create scenes",
            "height": 384,
            "width": 672
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1072,
            -1872
          ],
          "id": "644e18cf-4f0b-4eb8-97be-4b9a5e68f02d",
          "name": "Sticky Note1"
        },
        {
          "parameters": {
            "content": "# 2. Generate the main seed image",
            "height": 464,
            "width": 2096
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1072,
            -1424
          ],
          "id": "f04db1e1-4448-4ea6-aa61-a661c161f73b",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# 3. Generate the rest of the seed images",
            "height": 704,
            "width": 2112
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1088,
            -896
          ],
          "id": "d486e662-6a0e-4241-a323-ad3f8df64bbc",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "content": "# 4. Create the videos for each scene",
            "height": 560,
            "width": 2112
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1088,
            -128
          ],
          "id": "bc8a0c8f-8f1c-4387-a63d-0c3b75d2cb94",
          "name": "Sticky Note4"
        },
        {
          "parameters": {
            "content": "# 5. Create the text to speech",
            "height": 432,
            "width": 1440
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -672,
            496
          ],
          "id": "4e6e641f-918d-4ab4-8df0-eab5e778336f",
          "name": "Sticky Note8"
        },
        {
          "parameters": {
            "content": "# 6. Merge the videos",
            "height": 432,
            "width": 1440
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -672,
            992
          ],
          "id": "dae46aee-a5c1-47d3-9411-94f08b569424",
          "name": "Sticky Note9"
        },
        {
          "parameters": {
            "content": "# Structured output",
            "height": 304,
            "width": 400
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1536,
            -1424
          ],
          "id": "016fbee6-5496-49a2-a269-ebd0fde6482c",
          "name": "Sticky Note10"
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## 1. Setup your Fal.ai credentials in the `Generate seed image`, `Get status of the seed image`, `Generate rest of the seed image`, `Get status of the image`, `Staart generating the video`, `Get the video status`, `Start generating the speech, `Get the speech status`, `Start merging the videos`, `Get the status of the video merge` , `Start generating the lipsync` and `Get the lipsync status` nodes\n## 2. Pick a multimodal LLM (stronger the better) and connect it to the `Create main scene` and `Create scenes` nodes",
            "height": 388,
            "width": 1348,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -336,
            -1872
          ],
          "id": "22775964-6820-4936-b426-de37b4a6d839",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for more automations, support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Be part of a growing community and help us create more content like this\n\n## And get access to our premium workflows and our hosted servers",
            "height": 372,
            "width": 1132,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1072,
            -2304
          ],
          "id": "289d36f0-063f-4ae7-b1d7-f975f4a19d26",
          "name": "Sticky Note17"
        },
        {
          "parameters": {
            "method": "POST",
            "url": "https://queue.fal.run/fal-ai/nano-banana/edit",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "sendBody": true,
            "specifyBody": "json",
            "jsonBody": "={{ JSON.stringify(\n\n  {\n    prompt: $('Create main scene').item.json.output.image_prompt + ' ' + $json.image_prompts,\n    image_urls: [\n      $('Edit Fields').item.json.seed_image\n    ]\n  }, null, 2\n\n) }}",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            -336,
            -496
          ],
          "id": "7661e0f4-e560-4de5-b1d6-12cde1af4a38",
          "name": "âš ï¸ Generate rest of the seed image",
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {},
          "type": "n8n-nodes-base.wait",
          "typeVersion": 1.1,
          "position": [
            -144,
            -480
          ],
          "id": "b7d4130f-ab4f-47d6-9c1c-122e20934f08",
          "name": "Wait for image",
          "webhookId": "5ba253c4-2ea2-4ecc-81cc-251ca00a5058"
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate rest of the seed image').item.json.status_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {
              "timeout": 10000
            }
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            64,
            -480
          ],
          "id": "8d0aacbb-29f1-4a05-99eb-38043f6abc0b",
          "name": "âš ï¸ Get status of the image",
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "COMPLETED",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "6fc5bea4-1567-474b-bfca-5394eb303217"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "COMPLETED"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "0882f634-2472-4d24-a1c3-a39f0cd94855",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_PROGRESS",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_PROGRESS"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "e6c8b207-13ac-4537-8c5c-677039bc2fef",
                        "leftValue": "={{ $json.status }}",
                        "rightValue": "IN_QUEUE",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "IN_QUEUE"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.2,
          "position": [
            304,
            -480
          ],
          "id": "63833f9d-caa3-49df-b272-fd5c438ce583",
          "name": "Image status"
        },
        {
          "parameters": {
            "url": "={{ $('âš ï¸ Generate rest of the seed image').item.json.response_url }}",
            "authentication": "genericCredentialType",
            "genericAuthType": "httpHeaderAuth",
            "options": {}
          },
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 4.2,
          "position": [
            560,
            -416
          ],
          "id": "d409ac1b-9025-456e-a30c-a0e632f05cbc",
          "name": "Get image",
          "alwaysOutputData": false,
          "retryOnFail": true,
          "credentials": {
            "httpHeaderAuth": {
              "id": "BUYuOe8V0hqLtA02",
              "name": "fal.ai"
            }
          }
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"image_prompt\": {\n            \"type\": \"string\",\n            \"description\": \"The image prompt for the AI image generation\"\n        },\n        \"sex\": {\n            \"type\": \"string\",\n            \"description\": \"The sex of the person on the attached image\"\n        },\n        \"dialogue\": {\n            \"type\": \"string\",\n            \"description\": \"the dialogue for the UGC video\"\n        }\n    },\n    \"required\": [\n        \"image_prompt\",\n        \"sex\",\n        \"dialogue\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.3,
          "position": [
            -1456,
            -1312
          ],
          "id": "775aaefb-70c3-41c8-bd3f-ebae1f73285b",
          "name": "Main scene output parser"
        },
        {
          "parameters": {
            "schemaType": "manual",
            "inputSchema": "{\n    \"type\": \"object\",\n    \"properties\": {\n        \"scenes\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"starter_image_prompt\": {\n                        \"type\": \"string\",\n                        \"description\": \"describing the gestures/motions of the character\"\n                    },\n                    \"video_prompt\": {\n                        \"type\": \"string\",\n                        \"description\": \"describing what happens in the scene\"\n                    }\n                },\n                \"required\": [\n                    \"starter_image_prompt\",\n                    \"video_prompt\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"scenes\"\n    ]\n}"
          },
          "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
          "typeVersion": 1.3,
          "position": [
            -1280,
            -1312
          ],
          "id": "0f9a32a8-4cac-409f-b99b-1bb8ae7940da",
          "name": "Scenes output parser"
        },
        {
          "parameters": {
            "jsCode": "return $('On form submission').first()"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -1024,
            -1168
          ],
          "id": "ef4c4789-8354-4b19-9d10-634ad9a08b13",
          "name": "Relay image",
          "alwaysOutputData": false
        },
        {
          "parameters": {
            "jsCode": "const scenes = []\n\nconst urlArray = [\n  $('Edit Fields').first().json.seed_image,\n  ...$input.first().json.data.map(item => item.images[0].url)\n]\n\n$('Create scenes').first().json.output.scenes.forEach((item, index) => {\n  const start_image = urlArray[index];\n  const end_image = index < urlArray.length - 1 ? urlArray[index + 1] : undefined;\n    \n    scenes.push({\n      prompt: item.video_prompt,\n      start_image,\n      end_image\n    })\n  })\n\nreturn scenes.map(scene => ({\n  json: scene\n}))"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            864,
            -368
          ],
          "id": "6b2c35b2-4d09-4997-848b-da76f7c188de",
          "name": "Setup the scenes"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            -864,
            288
          ],
          "id": "4ee65aa5-9c69-4eab-914c-4732a64b8a47",
          "name": "Collect videos"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "8a10e867-bc74-403e-988d-776eeed86c27",
                  "name": "audio_url",
                  "value": "={{ $json.audio.url }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            592,
            672
          ],
          "id": "692f592c-b4c6-4d55-89b9-f9d06416caf5",
          "name": "Set audio url"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7993e2cc-6dde-4b29-9561-7c45ee39172c",
                  "name": "video_url",
                  "value": "={{ $json.video.url }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            608,
            1120
          ],
          "id": "ef497da5-3939-440b-80cd-9245d2edd14f",
          "name": "Set video url"
        }
      ],
      "pinData": {},
      "connections": {
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Create main scene",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Create scenes",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Get the lipsync video": {
          "main": [
            [
              {
                "node": "Download the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Lipsync status": {
          "main": [
            [
              {
                "node": "Get the lipsync video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the lipsync status": {
          "main": [
            [
              {
                "node": "Lipsync status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the lipsync": {
          "main": [
            [
              {
                "node": "Get the lipsync status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the lipsync": {
          "main": [
            [
              {
                "node": "Wait for the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set the voice based on sex": {
          "main": [
            [
              {
                "node": "Start generating the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Speech status": {
          "main": [
            [
              {
                "node": "Get the speech",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the speech": {
          "main": [
            [
              {
                "node": "Wait for the speech",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the speech status": {
          "main": [
            [
              {
                "node": "Speech status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the speech": {
          "main": [
            [
              {
                "node": "Get the speech status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the  video": {
          "main": [
            [
              {
                "node": "Loop Over Items1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video status": {
          "main": [
            [
              {
                "node": "Get the  video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the video status": {
          "main": [
            [
              {
                "node": "Video status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the video": {
          "main": [
            [
              {
                "node": "Get the video status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start generating the video": {
          "main": [
            [
              {
                "node": "Wait for the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "On form submission": {
          "main": [
            [
              {
                "node": "Create main scene",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the speech": {
          "main": [
            [
              {
                "node": "Set audio url",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set base64 data": {
          "main": [
            [
              {
                "node": "âš ï¸ Generate seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Convert image to base64": {
          "main": [
            [
              {
                "node": "Set base64 data",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields": {
          "main": [
            [
              {
                "node": "Split Out",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Loop Over Items": {
          "main": [
            [
              {
                "node": "Aggregate",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "âš ï¸ Generate rest of the seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Split Out": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Create scenes": {
          "main": [
            [
              {
                "node": "Relay image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Create main scene": {
          "main": [
            [
              {
                "node": "Create scenes",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Loop Over Items1": {
          "main": [
            [
              {
                "node": "Collect videos",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Start generating the video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate": {
          "main": [
            [
              {
                "node": "Setup the scenes",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Start merging the videos": {
          "main": [
            [
              {
                "node": "Wait for the merged video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the status of the video merge": {
          "main": [
            [
              {
                "node": "Video merge status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video merge status": {
          "main": [
            [
              {
                "node": "Get the merged video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the merged video",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for the merged video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for the merged video": {
          "main": [
            [
              {
                "node": "Get the status of the video merge",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the merged video": {
          "main": [
            [
              {
                "node": "Set video url",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Merge": {
          "main": [
            [
              {
                "node": "Start generating the lipsync",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for seed image": {
          "main": [
            [
              {
                "node": "âš ï¸ Get status of the seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Seed image status": {
          "main": [
            [
              {
                "node": "Get the seed image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Generate seed image": {
          "main": [
            [
              {
                "node": "Wait for seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Get status of the seed image": {
          "main": [
            [
              {
                "node": "Seed image status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the seed image": {
          "main": [
            [
              {
                "node": "Edit Fields",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Generate rest of the seed image": {
          "main": [
            [
              {
                "node": "Wait for image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Wait for image": {
          "main": [
            [
              {
                "node": "âš ï¸ Get status of the image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "âš ï¸ Get status of the image": {
          "main": [
            [
              {
                "node": "Image status",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Image status": {
          "main": [
            [
              {
                "node": "Get image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Wait for image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get image": {
          "main": [
            [
              {
                "node": "Loop Over Items",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Main scene output parser": {
          "ai_outputParser": [
            [
              {
                "node": "Create main scene",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Scenes output parser": {
          "ai_outputParser": [
            [
              {
                "node": "Create scenes",
                "type": "ai_outputParser",
                "index": 0
              }
            ]
          ]
        },
        "Relay image": {
          "main": [
            [
              {
                "node": "Convert image to base64",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup the scenes": {
          "main": [
            [
              {
                "node": "Loop Over Items1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Collect videos": {
          "main": [
            [
              {
                "node": "Set the voice based on sex",
                "type": "main",
                "index": 0
              },
              {
                "node": "Start merging the videos",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set audio url": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set video url": {
          "main": [
            [
              {
                "node": "Merge",
                "type": "main",
                "index": 1
              }
            ]
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "e90863de-a37e-4c95-b79d-e6d706883cb6",
      "meta": {
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "YyEbl4OcYaZ596pO",
      "tags": []
    }
  },
  {
    "id": "influencer-machine",
    "title": "Instagram Influencer Machine",
    "description": "Plans weekly content, generates captions/images via Fal.ai, stores schedules in DB tables, and posts to Instagram Business accounts.",
    "problem": "AI influencer brands need coordinated publishing across multiple personas; this workflow manages planning + posting.",
    "tags": [
      "instagram",
      "influencer",
      "scheduler",
      "fal"
    ],
    "workflow": {
      "name": "Influencer 2.0",
      "nodes": [
        {
          "parameters": {
            "formTitle": "Influencer workflow 2.0 by AI Agents A-Z",
            "formFields": {
              "values": [
                {
                  "fieldLabel": "What do you want to do?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Add a new influencer"
                      },
                      {
                        "option": "Create a weekly plan"
                      },
                      {
                        "option": "Create a new post"
                      }
                    ]
                  }
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.formTrigger",
          "typeVersion": 2.3,
          "position": [
            -1552,
            -112
          ],
          "id": "761a9cea-2189-401a-bbd1-8debfd486afb",
          "name": "On form submission",
          "webhookId": "d9176a7c-2df4-4823-b5a1-9073c7eca7f0"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "af22e08c-fb4c-4f71-beeb-baf1396e3025",
                        "leftValue": "={{ $('On form submission').item.json['What do you want to do?'] }}",
                        "rightValue": "Add a new influencer",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "Add a new influencer"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "31301ad8-6aea-4a83-aea9-32c4b54fcccb",
                        "leftValue": "={{ $('On form submission').item.json['What do you want to do?'] }}",
                        "rightValue": "Create a weekly plan",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "Create a weekly plan"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $('On form submission').item.json['What do you want to do?'] }}",
                        "rightValue": "Create a new post",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "a1482d9a-1250-4821-ac3c-088193496380"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "Create a new post"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.3,
          "position": [
            -1008,
            -128
          ],
          "id": "2cfbfb08-8619-4a5b-a020-5b62128e2857",
          "name": "Switch"
        },
        {
          "parameters": {
            "jsCode": "const results = [];\n\nfor (const file in $input.first().binary) {\n  try {\n    const bin = $input.first().binary[file];\n    const binBuffer = await this.helpers.getBinaryDataBuffer(0, file);\n\n    const path = bin.directory\n      ? `${bin.directory}/${bin.fileName}`\n      : bin.fileName;\n\n    results.push(`data:${bin.mimeType};base64,` + Buffer.from(binBuffer).toString('base64'));\n  } catch (error) {\n    console.error(`Error processing file \"${file}\": ${error.message}`);\n  }\n}\n\nreturn [{\n  json: {\n    files: results,\n  }\n}];"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -592,
            -672
          ],
          "id": "7ffd4e23-6ac3-4984-ac46-7d51c31fd9dc",
          "name": "Convert images to base64"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Name of the influencer",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Bio of the influencer",
                  "fieldType": "textarea",
                  "placeholder": "be as thorough as possible",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Reference image",
                  "fieldType": "file",
                  "acceptFileTypes": ".jpg,.png",
                  "requiredField": true
                },
                {
                  "fieldLabel": "Add a weekly plan",
                  "fieldType": "checkbox",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Add a weekly plan"
                      }
                    ]
                  }
                },
                {
                  "fieldLabel": "Instagram Business ID",
                  "placeholder": "use the guide to get the ID"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -752,
            -672
          ],
          "id": "fbf84d2f-1b40-40c4-84ac-6170ca780d3c",
          "name": "Influencer details",
          "webhookId": "d5ba0708-5fc2-4621-b672-4548f39da099"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "88fdb102-725a-43d9-9244-2871042a803d",
                  "leftValue": "={{ $('Influencer details').item.json['Add a weekly plan'] }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthGt",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            -256,
            -672
          ],
          "id": "d7652926-5229-43e3-88f3-d1c6267b206b",
          "name": "Add weekly plan?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "9ac51cc9-10e5-44b4-8c6d-878fb3656503",
                  "name": "influencer_id",
                  "value": "={{ $json.id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            448,
            -112
          ],
          "id": "b87f34ba-7857-415c-adee-1e9069043f82",
          "name": "Set influencer id"
        },
        {
          "parameters": {
            "text": "=Create a social media post calendar for this artificial person, who's sharing the life events on Instagram using the instructions below.\nEach day of the week should be carefully planned, monday to sunday. Add at least one paragraph to each day.\nMake sure to add 3 different post ideas for each day.\n\n<PersonalProfile>\n{{ $('Get influencer for weekly planning').item.json.name }}\n\n{{ $('Get influencer for weekly planning').item.json.bio }}\n</PersonalProfile>\n\n<Instructions>\n{{ $json.Plan }}\n</Instructions>\n\n{{ $json.change_requests ? `\nThe weekly plan was already generated, please make the requested changes.\n\n<WeeklyPlan>\n${$json.weekly_plan}\n</WeeklyPlan>\n\n<ChangeRequests>\n${$json.change_requests}\n</ChangeRequests>\n` : '' }}",
            "attributes": {
              "attributes": [
                {
                  "name": "weekly_plan",
                  "description": "the weekly plan",
                  "required": true
                }
              ]
            },
            "options": {
              "systemPromptTemplate": "You are a travel planner for a famous instagram celebrity. Create a detailed plan according to the instructions."
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1,
          "position": [
            1760,
            -320
          ],
          "id": "dccc0eee-58d0-4514-b057-71d03f4198e2",
          "name": "Generate weekly plan"
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "gpt-4.1-mini"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
          "typeVersion": 1.2,
          "position": [
            -1040,
            416
          ],
          "id": "3356af24-5cc0-4e6f-80aa-40614ef854c7",
          "name": "OpenAI Chat Model",
          "credentials": {
            "openAiApi": {
              "id": "tGvJRP2th9CbI2oq",
              "name": "OpenAi account 2"
            }
          }
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.influencer_db }}",
              "mode": "id"
            },
            "filters": {
              "conditions": [
                {
                  "keyValue": "={{ $json.influencer_id }}"
                }
              ]
            }
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            672,
            -112
          ],
          "id": "1f6dcb21-3f0c-4bf8-9a50-c17ccf50f1b3",
          "name": "Get influencer for weekly planning"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.influencer_db }}",
              "mode": "id"
            },
            "returnAll": true
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            -736,
            -112
          ],
          "id": "6bdb1907-c4a8-42c4-9e3e-8091bfbf5330",
          "name": "Get all influencers for weekly planning",
          "alwaysOutputData": true
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            -544,
            -112
          ],
          "id": "3e8a38ea-9fd4-4764-9c56-b53e809c2e1f",
          "name": "Aggregate influencers",
          "alwaysOutputData": true
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            1056,
            -112
          ],
          "id": "4ae4f1f7-0c28-4e8f-8596-5b9199fa2ef7",
          "name": "Aggregate previous plans"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.plans_db }}",
              "mode": "id"
            },
            "filters": {
              "conditions": [
                {
                  "keyName": "influencer_id",
                  "keyValue": "={{ $('Set influencer id').item.json.influencer_id }}"
                }
              ]
            },
            "returnAll": true
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            864,
            -112
          ],
          "id": "59a7bf4f-4539-4bec-accf-cf5e2387b625",
          "name": "Get previous plans",
          "alwaysOutputData": true
        },
        {
          "parameters": {
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.plans_db }}",
              "mode": "id"
            },
            "columns": {
              "mappingMode": "defineBelow",
              "value": {
                "influencer_id": "={{ $('Set influencer id').item.json.influencer_id }}",
                "week": "={{ ((weekString) => {\n  const matches = weekString.match(/^(\\d{4}), week (\\d{1,2})/);\n  return `${matches[1]}/${matches[2]}`;\n})($('Select the week').item.json['Select week']) }}",
                "plan": "={{ $('Generate weekly plan').last().json.output.weekly_plan }}"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "influencer_id",
                  "displayName": "influencer_id",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "week",
                  "displayName": "week",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "plan",
                  "displayName": "plan",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {}
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            2384,
            -336
          ],
          "id": "3e7cf4e2-e75f-471b-9007-d02c2c4cc124",
          "name": "Insert plan"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "7b46b57d-a476-4d73-969c-2b590ddf4967",
                  "name": "influencer_id",
                  "value": "={{ $json.influencer_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -752,
            240
          ],
          "id": "ed38b981-3ba6-4bab-b9f3-5f4a4e34dbc8",
          "name": "Edit Fields2"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.influencer_db }}",
              "mode": "id"
            },
            "filters": {
              "conditions": [
                {
                  "keyValue": "={{ $json.influencer_id }}"
                }
              ]
            }
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            176,
            400
          ],
          "id": "74777967-8d31-4bc0-89ff-a497ec3c4c53",
          "name": "Get influencer for creating a post"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "0c71548d-c249-42aa-998e-2d91bc29a230",
                  "name": "influencer_db",
                  "value": "<<insert here your influencer database id>>",
                  "type": "string"
                },
                {
                  "id": "65a94cf4-b0ea-47ce-8289-acde7768fb2e",
                  "name": "plans_db",
                  "value": "<<insert here your influencer plans database id>>",
                  "type": "string"
                },
                {
                  "id": "627b55aa-69b2-4712-b81f-36ac2fccf2ce",
                  "name": "posts_db",
                  "value": "<<insert here your influencer posts database id>>",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -1280,
            -112
          ],
          "id": "320aecb1-81cf-40ca-b7bb-825f5b889286",
          "name": "Configure workflow"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Post type",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Image"
                      },
                      {
                        "option": "Video"
                      }
                    ]
                  },
                  "requiredField": true
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            1376,
            416
          ],
          "id": "fad1c9a5-ec98-4c17-bee8-15064f14a6df",
          "name": "Select post type",
          "webhookId": "e9886663-3a3a-43ab-8973-9ccb2b1d9e5d"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            1056,
            384
          ],
          "id": "915a5a26-bab9-44d7-a833-64daf498da9a",
          "name": "Aggregate daily posts"
        },
        {
          "parameters": {
            "content": "# Post to instagram\n# [Guide to setup Facebook (Instagram)](https://github.com/gyoridavid/ai_agents_az/blob/main/episode_8/guide-instagram.md)",
            "height": 884,
            "width": 464,
            "color": 4
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            2320,
            480
          ],
          "id": "ded2b5d0-158f-4855-aa29-3e0da1bb1682",
          "name": "Sticky Note3"
        },
        {
          "parameters": {
            "rules": {
              "values": [
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "leftValue": "={{ $json['Post type'] }}",
                        "rightValue": "Image",
                        "operator": {
                          "type": "string",
                          "operation": "equals"
                        },
                        "id": "d5b604c1-33a9-4d85-bf97-df9ab8369121"
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "Image"
                },
                {
                  "conditions": {
                    "options": {
                      "caseSensitive": true,
                      "leftValue": "",
                      "typeValidation": "strict",
                      "version": 2
                    },
                    "conditions": [
                      {
                        "id": "ca0ddd39-98ec-417e-8627-e5ac1a7c6407",
                        "leftValue": "={{ $json['Post type'] }}",
                        "rightValue": "Video",
                        "operator": {
                          "type": "string",
                          "operation": "equals",
                          "name": "filter.operator.equals"
                        }
                      }
                    ],
                    "combinator": "and"
                  },
                  "renameOutput": true,
                  "outputKey": "Video"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.switch",
          "typeVersion": 3.3,
          "position": [
            -752,
            944
          ],
          "id": "725d7f3f-616e-4683-89d6-c90a4c2a3cb8",
          "name": "Switch1"
        },
        {
          "parameters": {
            "text": "=Create a social media video post for this artificial person, who's sharing her life on Instagram using the instructions below.\nUse the detailed weekly plan to find what to post today. Make sure to look at the previous posts (if available) to make sure the post fits to the plan in a logical order.\n\nFor each post, generate an instagram post (text content, seed image generation prompt and a video prompt (that will use the seed image as the starter image)). \nAs I'm using a reference image for the image generation, don't describe the general look of the person, and start with \"create a photorealistic image of me\", and continue with describing the scene in great detail, make it a few paragraph long. Make sure the image prompt includes \"do not add any text on the image\".\nCreate a short summary of the post for cataloging purposes.\n\n<PersonalProfile>\n{{ $('Get influencer for creating a post').item.json.name }}\n\n{{ $('Get influencer for creating a post').item.json.bio }}\n</PersonalProfile>\n\n<WeeklyPlan>\n{{ $('Get the plan for the week').item.json.plan }}\n</WeeklyPlan>\n\n<DayOfTheWeek>\n{{ $now.format('EEEE') }}\n</DayOfTheWeek>\n\n{{ !$('Aggregate daily posts').item.json.data.length ? `\n<PreviousPostsFromToday>\n${$('Aggregate daily posts').item.json.data.map(item => `\n<Post>\n  <Content>${item.post_summary}</Content>\n</Post>\n`).join('\\n')}\n</PreviousPostsFromToday>\n` : '' }}\n\n{{ $json.change_requests ? `\nThe post was already generated, please apply the change requests\n\n<PostContent>\n${$json.post_content}\n</PostContent>\n\n<ImagePrompt>\n${$json.image_prompt}\n</ImagePrompt>\n\n<VideoPrompt>\n${$json.video_prompt}\n</VideoPrompt>\n\n<ChangeRequests>\n${$json.change_requests}\n</ChangeRequests>\n` : '' }}",
            "attributes": {
              "attributes": [
                {
                  "name": "post_content",
                  "description": "the instagram post's text content to share with the image. use emojis, hashtags",
                  "required": true
                },
                {
                  "name": "image_prompt",
                  "description": "the seed image prompt to use to generate the social media image",
                  "required": true
                },
                {
                  "name": "summary",
                  "description": "short summary of the post",
                  "required": true
                },
                {
                  "name": "video_prompt",
                  "description": "the video prompt, that will generate the 8s long video, starting from the seed image",
                  "required": true
                }
              ]
            },
            "options": {
              "systemPromptTemplate": "You are a social media expert. Create a post for instagram based on the instructions."
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1,
          "position": [
            -464,
            1120
          ],
          "id": "4846a5ba-e349-46ef-9aae-6b72c6711833",
          "name": "Generate new Instagram post for video"
        },
        {
          "parameters": {
            "text": "=Create a social media post for this artificial person, who's sharing her life on Instagram using the instructions below.\nUse the detailed weekly plan to find what to post today. Make sure to look at the previous posts (if available) to make sure the post fits to the plan in a logical order.\n\nFor each post, generate an instagram post (text content and an image generation prompt). \nAs I'm using a reference image for the image generation, don't describe the general look of the person, and start with \"create a photorealistic image of me\", and continue with describing the scene in great detail, make it a few paragraph long. Make sure the image prompt includes \"do not add any text on the image\".\nCreate a short summary of the post for cataloging purposes.\n\n<PersonalProfile>\n{{ $('Get influencer for creating a post').item.json.name }}\n\n{{ $('Get influencer for creating a post').item.json.bio }}\n</PersonalProfile>\n\n<WeeklyPlan>\n{{ $('Get the plan for the week').item.json.plan }}\n</WeeklyPlan>\n\n<DayOfTheWeek>\n{{ $now.format('EEEE') }}\n</DayOfTheWeek>\n\n{{ !$('Aggregate daily posts').item.json.data.length ? `\n<PreviousPostsFromToday>\n${$('Aggregate daily posts').item.json.data.map(item => `\n<Post>\n  <Content>${item.post_summary}</Content>\n</Post>\n`).join('\\n')}\n</PreviousPostsFromToday>\n` : '' }}\n\n{{ $json.change_requests ? `\nThe post was already generated, please apply the change requests\n\n<PostContent>\n${$json.post_content}\n</PostContent>\n\n<ImagePrompt>\n${$json.image_prompt}\n</ImagePrompt>\n\n<ChangeRequests>\n${$json.change_requests}\n</ChangeRequests>\n` : '' }}",
            "attributes": {
              "attributes": [
                {
                  "name": "post_content",
                  "description": "the instagram post's text content to share with the image. use emojis, hashtags",
                  "required": true
                },
                {
                  "name": "image_prompt",
                  "description": "the image prompt to use to generate the social media image",
                  "required": true
                },
                {
                  "name": "summary",
                  "description": "short summary of the post",
                  "required": true
                }
              ]
            },
            "options": {
              "systemPromptTemplate": "You are a social media expert. Create a post for instagram based on the instructions."
            }
          },
          "type": "@n8n/n8n-nodes-langchain.informationExtractor",
          "typeVersion": 1,
          "position": [
            -464,
            704
          ],
          "id": "1da00350-152c-4994-8fd3-079440484a95",
          "name": "Generate new Instagram post for image"
        },
        {
          "parameters": {
            "workflowId": {
              "__rl": true,
              "value": "qENpKJWFtOASEV54",
              "mode": "list",
              "cachedResultUrl": "/workflow/qENpKJWFtOASEV54",
              "cachedResultName": "Fal.ai nanobanana subworkflow"
            },
            "workflowInputs": {
              "mappingMode": "defineBelow",
              "value": {
                "prompt": "={{ $json.image_prompt }}",
                "image_base64": "={{ $('Get influencer for creating a post').item.json.image }}",
                "aspect_ratio": "9:16"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "prompt",
                  "displayName": "prompt",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "width",
                  "displayName": "width",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number",
                  "removed": true
                },
                {
                  "id": "height",
                  "displayName": "height",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number",
                  "removed": true
                },
                {
                  "id": "image_base64",
                  "displayName": "image_base64",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "aspect_ratio",
                  "displayName": "aspect_ratio",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": true
            },
            "options": {}
          },
          "type": "n8n-nodes-base.executeWorkflow",
          "typeVersion": 1.3,
          "position": [
            576,
            1104
          ],
          "id": "8b7cfa86-4a55-42db-bb2b-172542165666",
          "name": "Generate seed image"
        },
        {
          "parameters": {
            "workflowId": {
              "__rl": true,
              "value": "csjah07VqeSWIUn0",
              "mode": "list",
              "cachedResultUrl": "/workflow/csjah07VqeSWIUn0",
              "cachedResultName": "Fal.ai Veo 3.1 image to video subworkflow"
            },
            "workflowInputs": {
              "mappingMode": "defineBelow",
              "value": {
                "prompt": "={{ $json.video_prompt }}",
                "image_base64": "={{ $('Generate seed image').item.json.images[0].url }}",
                "aspect_ratio": "9:16",
                "resolution": "1080p",
                "generate_audio": true
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "prompt",
                  "displayName": "prompt",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "image_base64",
                  "displayName": "image_base64",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "aspect_ratio",
                  "displayName": "aspect_ratio",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "resolution",
                  "displayName": "resolution",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "generate_audio",
                  "displayName": "generate_audio",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "boolean",
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": true
            },
            "options": {}
          },
          "type": "n8n-nodes-base.executeWorkflow",
          "typeVersion": 1.3,
          "position": [
            1520,
            1088
          ],
          "id": "3b240738-190d-4f49-b1cf-ff6b29b13ad3",
          "name": "Generate video"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "bca7d364-d81e-415f-b759-b1ccceffb763",
                  "name": "video_prompt",
                  "value": "={{ $json.video_prompt || $('Generate new Instagram post for video').item.json.output.video_prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1344,
            1088
          ],
          "id": "c4e8621e-e136-435d-aed4-6cb3727e85ee",
          "name": "Set video prompt"
        },
        {
          "parameters": {
            "workflowId": {
              "__rl": true,
              "value": "qENpKJWFtOASEV54",
              "mode": "list",
              "cachedResultUrl": "/workflow/qENpKJWFtOASEV54",
              "cachedResultName": "Fal.ai nanobanana subworkflow"
            },
            "workflowInputs": {
              "mappingMode": "defineBelow",
              "value": {
                "prompt": "={{ $json.image_prompt }}",
                "image_base64": "={{ $('Get influencer for creating a post').item.json.image }}",
                "aspect_ratio": "9:16"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "prompt",
                  "displayName": "prompt",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "width",
                  "displayName": "width",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number",
                  "removed": true
                },
                {
                  "id": "height",
                  "displayName": "height",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "number",
                  "removed": true
                },
                {
                  "id": "image_base64",
                  "displayName": "image_base64",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                },
                {
                  "id": "aspect_ratio",
                  "displayName": "aspect_ratio",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "canBeUsedToMatch": true,
                  "type": "string",
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": true
            },
            "options": {}
          },
          "type": "n8n-nodes-base.executeWorkflow",
          "typeVersion": 1.3,
          "position": [
            768,
            688
          ],
          "id": "c0577237-9db8-4a9f-afaa-9f4f11d14f24",
          "name": "Generate image"
        },
        {
          "parameters": {
            "content": "# Configure me âš ï¸",
            "height": 480,
            "width": 304,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1360,
            -288
          ],
          "id": "9c710a3f-f84b-40da-bd8e-36168ead6287",
          "name": "Sticky Note"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "d74c44d8-e66b-4835-9e15-729676b0c4d5",
                  "leftValue": "={{ $json.data.filter(item => item.id) }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthGt",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            -368,
            -112
          ],
          "id": "e2a6f0b1-4816-4f3a-92b9-33602a30a463",
          "name": "If no influencer"
        },
        {
          "parameters": {
            "options": {
              "formTitle": "You don't have any influencers yet",
              "buttonLabel": "Create a new influencer"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -48,
            -352
          ],
          "id": "892cdc96-72a2-4391-9699-334e4cf9603e",
          "name": "Notify user to create an influencer",
          "webhookId": "de7583f1-0244-4738-a222-4091a0797699"
        },
        {
          "parameters": {
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.influencer_db }}",
              "mode": "id"
            },
            "columns": {
              "mappingMode": "defineBelow",
              "value": {
                "name": "={{ $('Influencer details').item.json['Name of the influencer'] }}",
                "bio": "={{ $('Influencer details').item.json['Bio of the influencer'] }}",
                "image": "={{ $json.files[0] }}",
                "instagram_business_id": "={{ $('Influencer details').item.json['Instagram Business ID'] }}"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "name",
                  "displayName": "name",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "bio",
                  "displayName": "bio",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "image",
                  "displayName": "image",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "instagram_business_id",
                  "displayName": "instagram_business_id",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {}
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            -416,
            -672
          ],
          "id": "0d28f503-9ca0-4646-9616-21e32ddfc0c9",
          "name": "Add influencer"
        },
        {
          "parameters": {
            "operation": "completion",
            "completionTitle": "=Great success!",
            "completionMessage": "={{ $json['Name of the influencer'] }} was saved successfully to the database. Now it's time to add some plans and posts!",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            48,
            -672
          ],
          "id": "b89205e7-4108-4186-b583-39a6e91f5871",
          "name": "Influencer saved",
          "webhookId": "ed74d1ab-db40-48c9-8a42-99ebf608c367"
        },
        {
          "parameters": {
            "defineForm": "json",
            "jsonOutput": "={{ JSON.stringify([\n  {\n    \"fieldLabel\": \"Influencer\",\n    \"requiredField\": true,\n    \"fieldType\": \"dropdown\",\n    \"fieldOptions\": {\n      \"values\": $json.data.map(item => { return {option: `${item.name}`} })\n    }\n  }\n]) }}",
            "options": {
              "formTitle": "Select the influencer"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -112,
            -128
          ],
          "id": "51d9662b-0c56-48cb-94ce-ff26ab506ee3",
          "name": "Select influencer for planning",
          "webhookId": "dd733256-81ee-4213-abcb-91cbe246d6e0"
        },
        {
          "parameters": {
            "jsCode": "let id;\n// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  const selectedInfluencer = item.json.Influencer;\n  id = $('Aggregate influencers').first().json.data.find(influencer => selectedInfluencer === influencer.name)?.id;\n}\n\nreturn [{\n  json: {\n    id\n  }\n}]"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            128,
            -128
          ],
          "id": "1f23a89d-3630-4bb8-8cf1-a1d7213073ab",
          "name": "Map influencer for planning"
        },
        {
          "parameters": {
            "jsCode": "let weeks = [];\n\nfunction weekBounds(year, weekNumber) {\n  const monday = DateTime.fromObject({\n    weekYear: year,\n    weekNumber: weekNumber,\n    weekday: 1,   // Monday\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0\n  });\n  \n  const sunday = monday.plus({ days: 6 });\n\n  return {\n    start: monday.toFormat(\"MM/dd/yyyy\"),\n    end: sunday.toFormat(\"MM/dd/yyyy\")\n  };\n}\n\nfor (const item of $input.all()) {\n  let currentWeek = DateTime.now().weekNumber;\n  let currentYear = 2025;\n\n  while(weeks.length < 4) {\n    if (currentWeek > 52) {\n      currentWeek = 1;\n      currentYear++;\n    }\n    if ($input.first().json.data.find(previous => previous?.week === `${currentYear}/${currentWeek}`)) {\n      currentWeek++;\n      continue;\n    }\n    const {start, end} = weekBounds(currentYear, currentWeek)\n    weeks.push({\n      currentYear,\n      currentWeek,\n      startOfWeek: start,\n      endOfWeek: end\n    });\n    currentWeek++;\n  }\n}\n\nreturn [{\n  json: {\n    weeks\n  }\n}]"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            1248,
            -112
          ],
          "id": "c9667e05-934a-4e88-974f-6e4b4a841f8a",
          "name": "Generate week options"
        },
        {
          "parameters": {
            "defineForm": "json",
            "jsonOutput": "={{ JSON.stringify([\n  {\n    \"fieldLabel\": \"Select week\",\n    \"requiredField\": true,\n    \"fieldType\": \"dropdown\",\n    \"fieldOptions\": {\n      \"values\": $json.weeks.map(item => { return {option: `${item.currentYear}, week ${item.currentWeek} (${item.startOfWeek}-${item.endOfWeek})`} })\n    }\n  },\n  {\n    \"fieldLabel\": \"Plan\",\n    \"fieldType\": \"textarea\",\n    \"requiredField\": true\n  }\n]) }}",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            1440,
            -112
          ],
          "id": "71649751-93ee-4038-ae34-9cde6d3e2dae",
          "name": "Select the week",
          "webhookId": "e88b064f-10d2-48af-baff-086b69085e00"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "If you selected no, what changes do you want to apply?",
                  "fieldType": "textarea",
                  "placeholder": "Be as thorough as possible"
                },
                {
                  "fieldLabel": "Create post",
                  "fieldType": "checkbox",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Create post"
                      }
                    ]
                  }
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the weekly plan:\n\n{{ $json.output.weekly_plan }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            2032,
            -320
          ],
          "id": "d4fa092e-9883-4944-84dd-4540336b8fe9",
          "name": "Plan approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            2192,
            -320
          ],
          "id": "a5e8bbf5-c820-41b0-a52c-c875e055f017",
          "name": "Approve plan?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "a6d99474-863d-4926-bbf6-6f8d96502ca4",
                  "name": "change_requests",
                  "value": "={{ $json['If you selected no, what changes do you want to apply?'] }}",
                  "type": "string"
                },
                {
                  "id": "562dcfe4-60c2-4883-989c-97b2fa8accd0",
                  "name": "weekly_plan",
                  "value": "={{ $('Generate weekly plan').last().json.output.weekly_plan }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            2416,
            -128
          ],
          "id": "b2879d80-0a15-40d4-b158-11d8805c7ee8",
          "name": "Set plan variables"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "9bc0ab4b-838e-4f5f-a5e0-d4227bd65d58",
                  "leftValue": "={{ $('Plan approval').last().json['Create post'] }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthGt",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            2656,
            -112
          ],
          "id": "e5cd092b-017d-4efc-8576-1cbcd4fed685",
          "name": "Create post?"
        },
        {
          "parameters": {
            "operation": "completion",
            "completionTitle": "=Great success!",
            "completionMessage": "=The plan for {{ $json.week }} was saved successfully to the database. Now it's time to add some posts!",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            2912,
            -128
          ],
          "id": "a4fb2571-6032-4cb6-a71d-60e8fa137278",
          "name": "Plan saved",
          "webhookId": "ed74d1ab-db40-48c9-8a42-99ebf608c367"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.influencer_db }}",
              "mode": "id"
            },
            "returnAll": true
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            -768,
            400
          ],
          "id": "a7562054-769b-45b8-b7a9-9860876ee78a",
          "name": "Get all influencers for creating posts"
        },
        {
          "parameters": {
            "aggregate": "aggregateAllItemData",
            "options": {}
          },
          "type": "n8n-nodes-base.aggregate",
          "typeVersion": 1,
          "position": [
            -576,
            400
          ],
          "id": "c583751c-0b76-4845-9012-f2389bff7be4",
          "name": "Aggregate influencers for creating post"
        },
        {
          "parameters": {
            "defineForm": "json",
            "jsonOutput": "={{ JSON.stringify([\n  {\n    \"fieldLabel\": \"Influencer\",\n    \"requiredField\": true,\n    \"fieldType\": \"dropdown\",\n    \"fieldOptions\": {\n      \"values\": $json.data.map(item => { return {option: `${item.name}`} })\n    }\n  }\n]) }}",
            "options": {
              "formTitle": "Select the influencer"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -384,
            400
          ],
          "id": "e1dd75a3-24c8-43b9-951e-02df15ceed31",
          "name": "Select influencer for creating post",
          "webhookId": "dd733256-81ee-4213-abcb-91cbe246d6e0"
        },
        {
          "parameters": {
            "jsCode": "let influencer_id;\n// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  const selectedInfluencer = item.json.Influencer;\n  influencer_id = $('Aggregate influencers for creating post').first().json.data.find(influencer => selectedInfluencer === influencer.name)?.id;\n}\n\nreturn [{\n  json: {\n    influencer_id\n  }\n}]"
          },
          "type": "n8n-nodes-base.code",
          "typeVersion": 2,
          "position": [
            -224,
            400
          ],
          "id": "5744c2d1-b679-4b55-aec4-4bcfb1742ebe",
          "name": "Map influencer for creating post"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "9ac51cc9-10e5-44b4-8c6d-878fb3656503",
                  "name": "influencer_id",
                  "value": "={{ $json.influencer_id }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            -48,
            400
          ],
          "id": "05d60f28-1e34-4ecd-bbb6-c168479c23ab",
          "name": "Set influencer id for creating a post"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.plans_db }}",
              "mode": "id"
            },
            "matchType": "allConditions",
            "filters": {
              "conditions": [
                {
                  "keyName": "week",
                  "keyValue": "={{ $now.format('yyyy/WW') }}"
                },
                {
                  "keyName": "influencer_id",
                  "keyValue": "={{ $json.id }}"
                }
              ]
            }
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            352,
            400
          ],
          "id": "ba762d6c-9c26-4783-b54d-0fd344718dd4",
          "name": "Get the plan for the week",
          "alwaysOutputData": true
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "c2454227-a8e8-41d2-970a-bbaf3b587693",
                  "leftValue": "={{ $json.keys() }}",
                  "rightValue": 0,
                  "operator": {
                    "type": "array",
                    "operation": "lengthGt",
                    "rightType": "number"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            624,
            400
          ],
          "id": "a9a1cd4a-a41c-43e7-8714-7536503e2d38",
          "name": "Has a plan for the week?"
        },
        {
          "parameters": {
            "operation": "get",
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.posts_db }}",
              "mode": "id"
            },
            "filters": {
              "conditions": [
                {
                  "keyName": "createdAt",
                  "condition": "gt",
                  "keyValue": "={{ $now.startOf('day').toUTC() }}"
                }
              ]
            },
            "returnAll": true
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            864,
            384
          ],
          "id": "6c992df4-a073-4dad-ba77-8152508a335c",
          "name": "Get previous posts for today",
          "alwaysOutputData": true
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "If you selected no, what changes do you want to apply?",
                  "fieldType": "textarea",
                  "placeholder": "Be as thorough as possible"
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the post:\n{{ $json.output.post_content }}\n\nThis is the image prompt:\n{{ $json.output.image_prompt }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -144,
            704
          ],
          "id": "ed28c35e-ba15-407d-baf3-8456c3d78670",
          "name": "Image post approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            48,
            704
          ],
          "id": "9f569d5d-b518-4d3a-9653-990580fe0e19",
          "name": "Approve image post?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "a6d99474-863d-4926-bbf6-6f8d96502ca4",
                  "name": "change_requests",
                  "value": "={{ $json['If you selected no, what changes do you want to apply?'] }}",
                  "type": "string"
                },
                {
                  "id": "2b67b23c-bb56-4e31-adbf-3c5596098822",
                  "name": "post_content",
                  "value": "={{ $('Generate new Instagram post for image').item.json.output.post_content }}",
                  "type": "string"
                },
                {
                  "id": "7cafc015-bb66-4ce4-9406-2d9485008430",
                  "name": "image_prompt",
                  "value": "={{ $('Generate new Instagram post for image').item.json.output.image_prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            256,
            784
          ],
          "id": "5611a7af-2643-4b2b-902c-581f3caa4c44",
          "name": "Set image post variables"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "bca7d364-d81e-415f-b759-b1ccceffb763",
                  "name": "image_prompt",
                  "value": "={{ $json.image_prompt || $('Generate new Instagram post for image').last().json.output.image_prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            528,
            688
          ],
          "id": "0b1289b5-d0ba-4fb0-9e6c-6c201e33931b",
          "name": "Set image prompt for image post"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "The image prompt",
                  "fieldType": "textarea",
                  "placeholder": "Change the image prompt here"
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the generated image:\n<img src=\"{{ $json.images[0].url }}\" width=\"100%\" alt=\"\" />\n\nThis was the image prompt:\n{{ $('Set image prompt for image post').last().json.image_prompt }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            1056,
            688
          ],
          "id": "18d0dae4-f1e3-4202-96d0-f0b6928f5354",
          "name": "Image approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1264,
            688
          ],
          "id": "6185f378-e15d-4b5a-8838-3ddfc95808f4",
          "name": "Approve image?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "6ab73f03-24e1-40be-8a98-3148546f18d6",
                  "name": "image_prompt",
                  "value": "={{ $json['The image prompt'] }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1472,
            784
          ],
          "id": "6e8ebac0-0e32-4190-92bd-af9acb9ceaa1",
          "name": "Setup image variables"
        },
        {
          "parameters": {
            "httpRequestMethod": "POST",
            "graphApiVersion": "v22.0",
            "node": "={{ $('Get influencer for creating a post').item.json.instagram_business_id }}",
            "edge": "media_publish",
            "options": {
              "queryParameters": {
                "parameter": [
                  {
                    "name": "creation_id",
                    "value": "={{ $json.id }}"
                  }
                ]
              }
            }
          },
          "type": "n8n-nodes-base.facebookGraphApi",
          "typeVersion": 1,
          "position": [
            2592,
            720
          ],
          "id": "09006f1d-7562-4f62-adde-c4aede45750c",
          "name": "Post to Instagram",
          "credentials": {
            "facebookGraphApi": {
              "id": "6QYA8nXTfX9mWQr4",
              "name": "Facebook Graph account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "httpRequestMethod": "POST",
            "graphApiVersion": "v22.0",
            "node": "={{ $('Get influencer for creating a post').item.json.instagram_business_id }}",
            "edge": "media",
            "options": {
              "queryParameters": {
                "parameter": [
                  {
                    "name": "image_url",
                    "value": "={{ $('Generate image').item.json.images[0].url }}"
                  },
                  {
                    "name": "caption",
                    "value": "={{ $('Generate new Instagram post for image').last().json.output.post_content }}"
                  }
                ]
              }
            }
          },
          "type": "n8n-nodes-base.facebookGraphApi",
          "typeVersion": 1,
          "position": [
            2400,
            720
          ],
          "id": "31f1f159-f6a4-455d-a3a7-8499cabc85a4",
          "name": "Upload image to Instagram",
          "credentials": {
            "facebookGraphApi": {
              "id": "6QYA8nXTfX9mWQr4",
              "name": "Facebook Graph account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.posts_db }}",
              "mode": "id"
            },
            "columns": {
              "mappingMode": "defineBelow",
              "value": {
                "influencer_id": "={{ $('Get influencer for creating a post').item.json.id }}",
                "post_summary": "={{ $('Generate new Instagram post for image').last().json.output.summary }}"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "influencer_id",
                  "displayName": "influencer_id",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "post_summary",
                  "displayName": "post_summary",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {}
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            2944,
            720
          ],
          "id": "578fd357-290a-4da6-9427-692cb7514bff",
          "name": "Insert image post"
        },
        {
          "parameters": {
            "operation": "completion",
            "completionTitle": "The post was created",
            "completionMessage": "Posted, and saved to the database",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            3120,
            720
          ],
          "id": "da9ceb71-27ce-4003-8304-6e4ca63cd072",
          "name": "Image post saved",
          "webhookId": "9a7cb03a-7c1a-43c6-8ba1-d97dc3c0349e"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "If you selected no, what changes do you want to apply?",
                  "fieldType": "textarea",
                  "placeholder": "Be as thorough as possible"
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the post:\n{{ $json.output.post_content }}\n\nThis is the image prompt:\n{{ $json.output.image_prompt }}\n\nThis is the video prompt:\n{{ $json.output.video_prompt }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -176,
            1120
          ],
          "id": "8ed3381d-7625-4190-acdd-cbab1da9191f",
          "name": "Video post approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            16,
            1120
          ],
          "id": "3caf3917-fd48-4586-bb3f-f5deb13301fd",
          "name": "Approve video post?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "a6d99474-863d-4926-bbf6-6f8d96502ca4",
                  "name": "change_requests",
                  "value": "={{ $json['If you selected no, what changes do you want to apply?'] }}",
                  "type": "string"
                },
                {
                  "id": "2b67b23c-bb56-4e31-adbf-3c5596098822",
                  "name": "post_content",
                  "value": "={{ $('Generate new Instagram post for video').item.json.output.post_content }}",
                  "type": "string"
                },
                {
                  "id": "7cafc015-bb66-4ce4-9406-2d9485008430",
                  "name": "image_prompt",
                  "value": "={{ $('Generate new Instagram post for video').item.json.output.image_prompt }}",
                  "type": "string"
                },
                {
                  "id": "044a617b-6df1-44b7-9c54-c93e4425769e",
                  "name": "video_prompt",
                  "value": "={{ $('Generate new Instagram post for video').item.json.output.video_prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            192,
            1232
          ],
          "id": "0e7cbcbd-14ce-4786-8dca-ca24f75bada1",
          "name": "Setup video post variables"
        },
        {
          "parameters": {
            "options": {
              "formTitle": "No plan for this week!",
              "formDescription": "You need a weekly plan before creating a post",
              "buttonLabel": "Create a weekly plan"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            -48,
            208
          ],
          "id": "18557be3-f274-4944-bb43-a8dbdb299bdb",
          "name": "Notify user about the missing plan",
          "webhookId": "96a38fbf-a480-4aa9-8a91-54d119873518"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "79a1670d-70d1-4f58-b036-4583e5c8568a",
                  "name": "id",
                  "value": "={{ $('Get influencer for creating a post').item.json.id }}",
                  "type": "number"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            160,
            208
          ],
          "id": "12d6dd2f-373c-4095-be9a-3880957b5ab8",
          "name": "Setup the influencer id"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "The image prompt",
                  "fieldType": "textarea",
                  "placeholder": "Change the image prompt here"
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the generated image:\n<img src=\"{{ $json.images[0].url }}\" width=\"100%\" alt=\"\" />\n\nThis was the image prompt:\n{{ $('Set image prompt for seed image').last().json.image_prompt }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            768,
            1104
          ],
          "id": "9a41fb25-d799-4056-8bb7-453ef70675c8",
          "name": "Seed image approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            944,
            1104
          ],
          "id": "126b98e4-b3f4-4153-b3dc-1c3236a37254",
          "name": "Approve seed image?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "6ab73f03-24e1-40be-8a98-3148546f18d6",
                  "name": "image_prompt",
                  "value": "={{ $json['The image prompt'] }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            1136,
            1232
          ],
          "id": "002eeafd-5feb-4ae6-badd-1159d9cd9673",
          "name": "Setup seed image variables"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "bca7d364-d81e-415f-b759-b1ccceffb763",
                  "name": "image_prompt",
                  "value": "={{ $json.image_prompt || $('Generate new Instagram post for video').last().json.output.image_prompt }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            384,
            1104
          ],
          "id": "aec9b722-de38-4f53-8897-f6f0b6503bc0",
          "name": "Set image prompt for seed image"
        },
        {
          "parameters": {
            "formFields": {
              "values": [
                {
                  "fieldLabel": "Do you approve?",
                  "fieldType": "radio",
                  "fieldOptions": {
                    "values": [
                      {
                        "option": "Yes"
                      },
                      {
                        "option": "No"
                      }
                    ]
                  },
                  "requiredField": true
                },
                {
                  "fieldLabel": "The video prompt",
                  "fieldType": "textarea",
                  "placeholder": "Change the video prompt here"
                }
              ]
            },
            "options": {
              "formDescription": "=Here's the generated image:\n<video width=\"100%\" controls>\n  <source src=\"{{ $json.video.url }}\" type=\"video/mp4\">\n  Your browser does not support the video tag.\n</video>\n\nThis was the video prompt:\n{{ $('Set video prompt').last().json.video_prompt }}"
            }
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            1712,
            1088
          ],
          "id": "4ba885a6-40a0-4283-87b2-53868d0b8742",
          "name": "Video approval",
          "webhookId": "b4fd283b-aab4-4766-b444-12ecba728534"
        },
        {
          "parameters": {
            "conditions": {
              "options": {
                "caseSensitive": true,
                "leftValue": "",
                "typeValidation": "strict",
                "version": 2
              },
              "conditions": [
                {
                  "id": "4c919b7b-8ddc-4c10-afa4-68cd7edf2176",
                  "leftValue": "={{ $json['Do you approve?'] }}",
                  "rightValue": "Yes",
                  "operator": {
                    "type": "string",
                    "operation": "equals",
                    "name": "filter.operator.equals"
                  }
                }
              ],
              "combinator": "and"
            },
            "options": {}
          },
          "type": "n8n-nodes-base.if",
          "typeVersion": 2.2,
          "position": [
            1904,
            1088
          ],
          "id": "00c8abc4-1a0f-41df-b75d-3aeb88ab35bd",
          "name": "Approve video?"
        },
        {
          "parameters": {
            "assignments": {
              "assignments": [
                {
                  "id": "6ab73f03-24e1-40be-8a98-3148546f18d6",
                  "name": "video_prompt",
                  "value": "={{ $json['The video prompt'] }}",
                  "type": "string"
                }
              ]
            },
            "options": {}
          },
          "type": "n8n-nodes-base.set",
          "typeVersion": 3.4,
          "position": [
            2112,
            1232
          ],
          "id": "1d89eb1a-5679-45ae-b32b-b40ed8be8da4",
          "name": "Video variables"
        },
        {
          "parameters": {
            "httpRequestMethod": "POST",
            "graphApiVersion": "v22.0",
            "node": "={{ $('Get influencer for creating a post').item.json.instagram_business_id }}",
            "edge": "media",
            "options": {
              "queryParameters": {
                "parameter": [
                  {
                    "name": "video_url",
                    "value": "={{ $('Generate video').last().json.video }}"
                  },
                  {
                    "name": "caption",
                    "value": "={{ $('Generate new Instagram post for image').last().json.output.post_content }}"
                  },
                  {
                    "name": "media_type",
                    "value": "VIDEO"
                  }
                ]
              }
            }
          },
          "type": "n8n-nodes-base.facebookGraphApi",
          "typeVersion": 1,
          "position": [
            2400,
            1088
          ],
          "id": "225caaf8-27df-408b-870a-0493073425d1",
          "name": "Upload video to Instagram",
          "credentials": {
            "facebookGraphApi": {
              "id": "6QYA8nXTfX9mWQr4",
              "name": "Facebook Graph account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "httpRequestMethod": "POST",
            "graphApiVersion": "v22.0",
            "node": "={{ $('Get influencer for creating a post').item.json.instagram_business_id }}",
            "edge": "media_publish",
            "options": {
              "queryParameters": {
                "parameter": [
                  {
                    "name": "creation_id",
                    "value": "={{ $json.id }}"
                  }
                ]
              }
            }
          },
          "type": "n8n-nodes-base.facebookGraphApi",
          "typeVersion": 1,
          "position": [
            2592,
            1088
          ],
          "id": "bfe2fda4-e662-4e75-b129-567d83d11910",
          "name": "Post video post to Instagram",
          "credentials": {
            "facebookGraphApi": {
              "id": "6QYA8nXTfX9mWQr4",
              "name": "Facebook Graph account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Create a new influencer",
            "height": 352,
            "width": 1056
          },
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -800,
            -816
          ],
          "typeVersion": 1,
          "id": "2fac96fc-fac9-4abf-828d-81225dcfd003",
          "name": "Sticky Note2"
        },
        {
          "parameters": {
            "content": "# Add a weekly plan",
            "height": 432,
            "width": 3920
          },
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -800,
            -384
          ],
          "typeVersion": 1,
          "id": "ac16f82b-8c57-435d-92be-d50886950c94",
          "name": "Sticky Note5"
        },
        {
          "parameters": {
            "content": "# Create a post",
            "height": 1264,
            "width": 4144
          },
          "type": "n8n-nodes-base.stickyNote",
          "position": [
            -800,
            144
          ],
          "typeVersion": 1,
          "id": "6e05a38c-8c6b-4a42-8e3c-4201c88aa068",
          "name": "Sticky Note6"
        },
        {
          "parameters": {
            "content": "# ðŸ“š [Join our Skool community for video automations, support, premium content and more!](https://www.skool.com/ai-agents-az/about?w9)\n\n## Be part of a growing community and help us create more content like this\n\n## And get access to our premium workflows and our hosted GPU media server with voice cloning and video tools",
            "height": 372,
            "width": 1052,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -800,
            -1264
          ],
          "id": "a0a845c2-0ea2-4cbd-ab5d-2ecabdf21c7a",
          "name": "Sticky Note17"
        },
        {
          "parameters": {
            "content": "# How to set up this automation?\n\n## 0. Make sure you are using n8n 1.118.1+\n## 1. Follow the YouTube video and create the databases\n## 2. Setup the database ids in the configure me node (see the YouTube video)\n## 3. Download and import the subworkflows (links in the YouTube video's description or on GitHub). Setup the subworkflows (add your credential)]\n## 5. Select the LLM you want to use and connect it to the AI nodes. Disable the rest of the LLM providers\n## 6. Setup the Facebook Graph nodes, add your token (see the guide on how to create it and connect your Instagram account)\n## 4. Done! ðŸŽ‰\n\n# Resources:\n\n## [Watch the video](https://www.youtube.com/watch?v=PjXYr6M4fjY)\n## [Guide to connect Facebook](https://github.com/gyoridavid/ai_agents_az/blob/main/episode_8/guide-instagram.md)\n## [GitHub](https://github.com/gyoridavid/ai_agents_az/tree/main/episode_35)",
            "height": 788,
            "width": 1220,
            "color": 6
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            336,
            -1248
          ],
          "id": "d580d4ff-b3ff-4e73-b02f-a154d9d58750",
          "name": "Sticky Note14"
        },
        {
          "parameters": {
            "model": "qwen3:32b",
            "options": {
              "numCtx": 16048
            }
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
          "typeVersion": 1,
          "position": [
            -1520,
            416
          ],
          "id": "5a03bcfa-cacf-482c-9b7f-6b5163375e3b",
          "name": "Ollama Chat Model",
          "credentials": {
            "ollamaApi": {
              "id": "cWXUsJ0LsqnzOEx0",
              "name": "Ollama account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
          "typeVersion": 1,
          "position": [
            -1184,
            416
          ],
          "id": "615ce328-b2f7-422d-a5d1-f8753bab36ad",
          "name": "DeepSeek Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": "tngtech/deepseek-r1t-chimera:free",
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
          "typeVersion": 1,
          "position": [
            -1056,
            768
          ],
          "id": "7eae7ff1-499a-447f-b256-1cf2ca69b30d",
          "name": "OpenRouter Chat Model",
          "credentials": {
            "openRouterApi": {
              "id": "pKxg2Rhtt3cG3h19",
              "name": "OpenRouter account"
            }
          },
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
          "typeVersion": 1,
          "position": [
            -1520,
            768
          ],
          "id": "e1743b15-6cb0-4ea2-b141-784bed5a00e0",
          "name": "Google Gemini Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
          "typeVersion": 1,
          "position": [
            -1520,
            576
          ],
          "id": "ecf00c57-588b-4129-bedc-efe9d506fe9f",
          "name": "Azure OpenAI Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -1344,
            576
          ],
          "id": "7a1dfc5e-34a9-48d2-aedc-4bd23814381a",
          "name": "xAI Grok Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "model": {
              "__rl": true,
              "mode": "list",
              "value": "claude-sonnet-4-20250514",
              "cachedResultName": "Claude 4 Sonnet"
            },
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
          "typeVersion": 1.3,
          "position": [
            -1184,
            576
          ],
          "id": "944c2068-9245-4186-af4c-50863bf8791e",
          "name": "Anthropic Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
          "typeVersion": 1,
          "position": [
            -1056,
            576
          ],
          "id": "012b7f68-0084-4d60-a08c-b68b337c3093",
          "name": "xAI Grok Chat Model1",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
          "typeVersion": 1,
          "position": [
            -1184,
            768
          ],
          "id": "2ae4898b-0523-49df-a1de-8e19a7cebf2b",
          "name": "Groq Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
          "typeVersion": 1,
          "position": [
            -1344,
            416
          ],
          "id": "588b81d4-df0e-44ca-8039-97a23b622af3",
          "name": "AWS Bedrock Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "options": {}
          },
          "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
          "typeVersion": 1,
          "position": [
            -1344,
            768
          ],
          "id": "15493324-2136-4185-b47c-31103cd3b721",
          "name": "Mistral Cloud Chat Model",
          "disabled": true
        },
        {
          "parameters": {
            "content": "# Pick your choice of LLM âš ï¸\nâš ï¸ Make sure to deactive/delete the rest of the LLMs after selecting one",
            "height": 700,
            "width": 700,
            "color": 3
          },
          "type": "n8n-nodes-base.stickyNote",
          "typeVersion": 1,
          "position": [
            -1600,
            288
          ],
          "id": "32e5ed0d-39f0-4a13-8b3a-c952f6495155",
          "name": "Sticky Note7"
        },
        {
          "parameters": {
            "dataTableId": {
              "__rl": true,
              "value": "={{ $('Configure workflow').item.json.posts_db }}",
              "mode": "id"
            },
            "columns": {
              "mappingMode": "defineBelow",
              "value": {
                "influencer_id": "={{ $('Get influencer for creating a post').item.json.id }}",
                "post_summary": "={{ $('Generate new Instagram post for video').last().json.output.summary }}"
              },
              "matchingColumns": [],
              "schema": [
                {
                  "id": "influencer_id",
                  "displayName": "influencer_id",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                },
                {
                  "id": "post_summary",
                  "displayName": "post_summary",
                  "required": false,
                  "defaultMatch": false,
                  "display": true,
                  "type": "string",
                  "readOnly": false,
                  "removed": false
                }
              ],
              "attemptToConvertTypes": false,
              "convertFieldsToString": false
            },
            "options": {}
          },
          "type": "n8n-nodes-base.dataTable",
          "typeVersion": 1,
          "position": [
            2944,
            1088
          ],
          "id": "bec6a68f-0329-4f39-a032-cf75f501e325",
          "name": "Insert video post"
        },
        {
          "parameters": {
            "operation": "completion",
            "completionTitle": "The post was created",
            "completionMessage": "Posted, and saved to the database",
            "options": {}
          },
          "type": "n8n-nodes-base.form",
          "typeVersion": 2.3,
          "position": [
            3136,
            1088
          ],
          "id": "0861eb94-5b3c-4061-adcd-2fda1e5aea89",
          "name": "Video post saved",
          "webhookId": "9a7cb03a-7c1a-43c6-8ba1-d97dc3c0349e"
        }
      ],
      "pinData": {},
      "connections": {
        "On form submission": {
          "main": [
            [
              {
                "node": "Configure workflow",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Switch": {
          "main": [
            [
              {
                "node": "Influencer details",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Get all influencers for weekly planning",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Get all influencers for creating posts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Convert images to base64": {
          "main": [
            [
              {
                "node": "Add influencer",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Influencer details": {
          "main": [
            [
              {
                "node": "Convert images to base64",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Add weekly plan?": {
          "main": [
            [
              {
                "node": "Set influencer id",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Influencer saved",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set influencer id": {
          "main": [
            [
              {
                "node": "Get influencer for weekly planning",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate weekly plan": {
          "main": [
            [
              {
                "node": "Plan approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenAI Chat Model": {
          "ai_languageModel": [
            [
              {
                "node": "Generate weekly plan",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Generate new Instagram post for video",
                "type": "ai_languageModel",
                "index": 0
              },
              {
                "node": "Generate new Instagram post for image",
                "type": "ai_languageModel",
                "index": 0
              }
            ]
          ]
        },
        "Get all influencers for weekly planning": {
          "main": [
            [
              {
                "node": "Aggregate influencers",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate influencers": {
          "main": [
            [
              {
                "node": "If no influencer",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get influencer for weekly planning": {
          "main": [
            [
              {
                "node": "Get previous plans",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate previous plans": {
          "main": [
            [
              {
                "node": "Generate week options",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get previous plans": {
          "main": [
            [
              {
                "node": "Aggregate previous plans",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Insert plan": {
          "main": [
            [
              {
                "node": "Create post?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Edit Fields2": {
          "main": [
            [
              {
                "node": "Set influencer id for creating a post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get influencer for creating a post": {
          "main": [
            [
              {
                "node": "Get the plan for the week",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Configure workflow": {
          "main": [
            [
              {
                "node": "Switch",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Select post type": {
          "main": [
            [
              {
                "node": "Switch1",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate daily posts": {
          "main": [
            [
              {
                "node": "Select post type",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Switch1": {
          "main": [
            [
              {
                "node": "Generate new Instagram post for image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Generate new Instagram post for video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate new Instagram post for video": {
          "main": [
            [
              {
                "node": "Video post approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate new Instagram post for image": {
          "main": [
            [
              {
                "node": "Image post approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate seed image": {
          "main": [
            [
              {
                "node": "Seed image approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate video": {
          "main": [
            [
              {
                "node": "Video approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set video prompt": {
          "main": [
            [
              {
                "node": "Generate video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate image": {
          "main": [
            [
              {
                "node": "Image approval",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "If no influencer": {
          "main": [
            [
              {
                "node": "Select influencer for planning",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Notify user to create an influencer",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Notify user to create an influencer": {
          "main": [
            [
              {
                "node": "Influencer details",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Add influencer": {
          "main": [
            [
              {
                "node": "Add weekly plan?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Select influencer for planning": {
          "main": [
            [
              {
                "node": "Map influencer for planning",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Map influencer for planning": {
          "main": [
            [
              {
                "node": "Set influencer id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Generate week options": {
          "main": [
            [
              {
                "node": "Select the week",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Select the week": {
          "main": [
            [
              {
                "node": "Generate weekly plan",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Plan approval": {
          "main": [
            [
              {
                "node": "Approve plan?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve plan?": {
          "main": [
            [
              {
                "node": "Insert plan",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Set plan variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set plan variables": {
          "main": [
            [
              {
                "node": "Generate weekly plan",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Create post?": {
          "main": [
            [
              {
                "node": "Edit Fields2",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Plan saved",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get all influencers for creating posts": {
          "main": [
            [
              {
                "node": "Aggregate influencers for creating post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Aggregate influencers for creating post": {
          "main": [
            [
              {
                "node": "Select influencer for creating post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Select influencer for creating post": {
          "main": [
            [
              {
                "node": "Map influencer for creating post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Map influencer for creating post": {
          "main": [
            [
              {
                "node": "Set influencer id for creating a post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set influencer id for creating a post": {
          "main": [
            [
              {
                "node": "Get influencer for creating a post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get the plan for the week": {
          "main": [
            [
              {
                "node": "Has a plan for the week?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Has a plan for the week?": {
          "main": [
            [
              {
                "node": "Get previous posts for today",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Notify user about the missing plan",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Get previous posts for today": {
          "main": [
            [
              {
                "node": "Aggregate daily posts",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Image post approval": {
          "main": [
            [
              {
                "node": "Approve image post?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve image post?": {
          "main": [
            [
              {
                "node": "Set image prompt for image post",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Set image post variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set image post variables": {
          "main": [
            [
              {
                "node": "Generate new Instagram post for image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set image prompt for image post": {
          "main": [
            [
              {
                "node": "Generate image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Image approval": {
          "main": [
            [
              {
                "node": "Approve image?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve image?": {
          "main": [
            [
              {
                "node": "Upload image to Instagram",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup image variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup image variables": {
          "main": [
            [
              {
                "node": "Set image prompt for image post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Post to Instagram": {
          "main": [
            [
              {
                "node": "Insert image post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload image to Instagram": {
          "main": [
            [
              {
                "node": "Post to Instagram",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Insert image post": {
          "main": [
            [
              {
                "node": "Image post saved",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video post approval": {
          "main": [
            [
              {
                "node": "Approve video post?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve video post?": {
          "main": [
            [
              {
                "node": "Set image prompt for seed image",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup video post variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup video post variables": {
          "main": [
            [
              {
                "node": "Generate new Instagram post for video",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Notify user about the missing plan": {
          "main": [
            [
              {
                "node": "Setup the influencer id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup the influencer id": {
          "main": [
            [
              {
                "node": "Set influencer id",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Seed image approval": {
          "main": [
            [
              {
                "node": "Approve seed image?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve seed image?": {
          "main": [
            [
              {
                "node": "Set video prompt",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Setup seed image variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Setup seed image variables": {
          "main": [
            [
              {
                "node": "Set image prompt for seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Set image prompt for seed image": {
          "main": [
            [
              {
                "node": "Generate seed image",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video approval": {
          "main": [
            [
              {
                "node": "Approve video?",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Approve video?": {
          "main": [
            [
              {
                "node": "Upload video to Instagram",
                "type": "main",
                "index": 0
              }
            ],
            [
              {
                "node": "Video variables",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Video variables": {
          "main": [
            [
              {
                "node": "Set video prompt",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Upload video to Instagram": {
          "main": [
            [
              {
                "node": "Post video post to Instagram",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Post video post to Instagram": {
          "main": [
            [
              {
                "node": "Insert video post",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "Insert video post": {
          "main": [
            [
              {
                "node": "Video post saved",
                "type": "main",
                "index": 0
              }
            ]
          ]
        },
        "OpenRouter Chat Model": {
          "ai_languageModel": [
            []
          ]
        }
      },
      "active": false,
      "settings": {
        "executionOrder": "v1"
      },
      "versionId": "74c9dc3a-b292-45eb-91cc-5211aa206f42",
      "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "636db6b6ab21a21c6458e2137f340e33dc3e49f5a1c560c8d1e2372c227cf40e"
      },
      "id": "iMREBdiBCOBD93Hv",
      "tags": []
    }
  }
]